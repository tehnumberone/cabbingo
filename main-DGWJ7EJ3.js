var TS=Object.defineProperty,DS=Object.defineProperties;var bS=Object.getOwnPropertyDescriptors;var sa=Object.getOwnPropertySymbols;var Mv=Object.prototype.hasOwnProperty,Ov=Object.prototype.propertyIsEnumerable;var Nv=(e,t,n)=>t in e?TS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_=(e,t)=>{for(var n in t||={})Mv.call(t,n)&&Nv(e,n,t[n]);if(sa)for(var n of sa(t))Ov.call(t,n)&&Nv(e,n,t[n]);return e},K=(e,t)=>DS(e,bS(t));var kv=(e,t)=>{var n={};for(var r in e)Mv.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&sa)for(var r of sa(e))t.indexOf(r)<0&&Ov.call(e,r)&&(n[r]=e[r]);return n};var m=(e,t,n)=>new Promise((r,i)=>{var o=c=>{try{a(n.next(c))}catch(l){i(l)}},s=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(e,t)).next())});var ed;function aa(){return ed}function Mt(e){let t=ed;return ed=e,t}var Pv=Symbol("NotFound");function Br(e){return e===Pv||e?.name==="\u0275NotFound"}function xv(e,t){return Object.is(e,t)}var De=null,ca=!1,nd=1,SS=null,Gt=Symbol("SIGNAL");function k(e){let t=De;return De=e,t}function la(){return De}var ua={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function da(e){if(ca)throw new Error("");if(De===null)return;De.consumerOnSignalRead(e);let t=De.producersTail;if(t!==void 0&&t.producer===e)return;let n,r=De.recomputing;if(r&&(n=t!==void 0?t.nextProducer:De.producers,n!==void 0&&n.producer===e)){De.producersTail=n,n.lastReadVersion=e.version;return}let i=e.consumersTail;if(i!==void 0&&i.consumer===De&&(!r||AS(i,De)))return;let o=Hr(De),s={producer:e,consumer:De,nextProducer:n,prevConsumer:i,lastReadVersion:e.version,nextConsumer:void 0};De.producersTail=s,t!==void 0?t.nextProducer=s:De.producers=s,o&&jv(e,s)}function Lv(){nd++}function Fv(e){if(!(Hr(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===nd)){if(!e.producerMustRecompute(e)&&!ha(e)){td(e);return}e.producerRecomputeValue(e),td(e)}}function rd(e){if(e.consumers===void 0)return;let t=ca;ca=!0;try{for(let n=e.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||RS(r)}}finally{ca=t}}function id(){return De?.consumerAllowSignalWrites!==!1}function RS(e){e.dirty=!0,rd(e),e.consumerMarkedDirty?.(e)}function td(e){e.dirty=!1,e.lastCleanEpoch=nd}function fa(e){return e&&(e.producersTail=void 0,e.recomputing=!0),k(e)}function od(e,t){if(k(t),!e)return;e.recomputing=!1;let n=e.producersTail,r=n!==void 0?n.nextProducer:e.producers;if(r!==void 0){if(Hr(e))do r=sd(r);while(r!==void 0);n!==void 0?n.nextProducer=void 0:e.producers=void 0}}function ha(e){for(let t=e.producers;t!==void 0;t=t.nextProducer){let n=t.producer,r=t.lastReadVersion;if(r!==n.version||(Fv(n),r!==n.version))return!0}return!1}function pa(e){if(Hr(e)){let t=e.producers;for(;t!==void 0;)t=sd(t)}e.producers=void 0,e.producersTail=void 0,e.consumers=void 0,e.consumersTail=void 0}function jv(e,t){let n=e.consumersTail,r=Hr(e);if(n!==void 0?(t.nextConsumer=n.nextConsumer,n.nextConsumer=t):(t.nextConsumer=void 0,e.consumers=t),t.prevConsumer=n,e.consumersTail=t,!r)for(let i=e.producers;i!==void 0;i=i.nextProducer)jv(i.producer,i)}function sd(e){let t=e.producer,n=e.nextProducer,r=e.nextConsumer,i=e.prevConsumer;if(e.nextConsumer=void 0,e.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:t.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(t.consumers=r,!Hr(t)){let o=t.producers;for(;o!==void 0;)o=sd(o)}return n}function Hr(e){return e.consumerIsAlwaysLive||e.consumers!==void 0}function Uv(e){SS?.(e)}function AS(e,t){let n=t.producersTail;if(n!==void 0){let r=t.producers;do{if(r===e)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function NS(){throw new Error}var Vv=NS;function Bv(e){Vv(e)}function ad(e){Vv=e}var MS=null;function cd(e,t){let n=Object.create(ga);n.value=e,t!==void 0&&(n.equal=t);let r=()=>Hv(n);return r[Gt]=n,Uv(n),[r,s=>ao(n,s),s=>$v(n,s)]}function Hv(e){return da(e),e.value}function ao(e,t){id()||Bv(e),e.equal(e.value,t)||(e.value=t,OS(e))}function $v(e,t){id()||Bv(e),ao(e,t(e.value))}var ga=K(_({},ua),{equal:xv,value:void 0,kind:"signal"});function OS(e){e.version++,Lv(),rd(e),MS?.(e)}function N(e){return typeof e=="function"}function $r(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var ma=$r(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Hn(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var re=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(N(r))try{r()}catch(o){t=o instanceof ma?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Wv(o)}catch(s){t=t??[],s instanceof ma?t=[...t,...s.errors]:t.push(s)}}if(t)throw new ma(t)}}add(t){var n;if(t&&t!==this)if(this.closed)Wv(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&Hn(n,t)}remove(t){let{_finalizers:n}=this;n&&Hn(n,t),t instanceof e&&t._removeParent(this)}};re.EMPTY=(()=>{let e=new re;return e.closed=!0,e})();var ld=re.EMPTY;function va(e){return e instanceof re||e&&"closed"in e&&N(e.remove)&&N(e.add)&&N(e.unsubscribe)}function Wv(e){N(e)?e():e.unsubscribe()}var ft={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Wr={setTimeout(e,t,...n){let{delegate:r}=Wr;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=Wr;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function ya(e){Wr.setTimeout(()=>{let{onUnhandledError:t}=ft;if(t)t(e);else throw e})}function co(){}var zv=ud("C",void 0,void 0);function Gv(e){return ud("E",void 0,e)}function qv(e){return ud("N",e,void 0)}function ud(e,t,n){return{kind:e,value:t,error:n}}var $n=null;function zr(e){if(ft.useDeprecatedSynchronousErrorHandling){let t=!$n;if(t&&($n={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=$n;if($n=null,n)throw r}}else e()}function Kv(e){ft.useDeprecatedSynchronousErrorHandling&&$n&&($n.errorThrown=!0,$n.error=e)}var Wn=class extends re{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,va(t)&&t.add(this)):this.destination=xS}static create(t,n,r){return new Gr(t,n,r)}next(t){this.isStopped?fd(qv(t),this):this._next(t)}error(t){this.isStopped?fd(Gv(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?fd(zv,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},kS=Function.prototype.bind;function dd(e,t){return kS.call(e,t)}var hd=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){_a(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){_a(r)}else _a(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){_a(n)}}},Gr=class extends Wn{constructor(t,n,r){super();let i;if(N(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&ft.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&dd(t.next,o),error:t.error&&dd(t.error,o),complete:t.complete&&dd(t.complete,o)}):i=t}this.destination=new hd(i)}};function _a(e){ft.useDeprecatedSynchronousErrorHandling?Kv(e):ya(e)}function PS(e){throw e}function fd(e,t){let{onStoppedNotification:n}=ft;n&&Wr.setTimeout(()=>n(e,t))}var xS={closed:!0,next:co,error:PS,complete:co};var qr=typeof Symbol=="function"&&Symbol.observable||"@@observable";function $e(e){return e}function pd(...e){return gd(e)}function gd(e){return e.length===0?$e:e.length===1?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}var P=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=FS(n)?n:new Gr(n,r,i);return zr(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Yv(r),new r((i,o)=>{let s=new Gr({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[qr](){return this}pipe(...n){return gd(n)(this)}toPromise(n){return n=Yv(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return e.create=t=>new e(t),e})();function Yv(e){var t;return(t=e??ft.Promise)!==null&&t!==void 0?t:Promise}function LS(e){return e&&N(e.next)&&N(e.error)&&N(e.complete)}function FS(e){return e&&e instanceof Wn||LS(e)&&va(e)}function md(e){return N(e?.lift)}function U(e){return t=>{if(md(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function V(e,t,n,r,i){return new vd(e,t,n,r,i)}var vd=class extends Wn{constructor(t,n,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){t.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function Kr(){return U((e,t)=>{let n=null;e._refCount++;let r=V(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let i=e._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}var Yr=class extends P{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,md(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new re;let n=this.getSubject();t.add(this.source.subscribe(V(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=re.EMPTY)}return t}refCount(){return Kr()(this)}};var Zv=$r(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var we=(()=>{class e extends P{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Ea(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Zv}next(n){zr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){zr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){zr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?ld:(this.currentObservers=null,o.push(n),new re(()=>{this.currentObservers=null,Hn(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new P;return n.source=this,n}}return e.create=(t,n)=>new Ea(t,n),e})(),Ea=class extends we{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:ld}};var Ce=class extends we{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var yd={now(){return(yd.delegate||Date).now()},delegate:void 0};var Ia=class extends re{constructor(t,n){super()}schedule(t,n=0){return this}};var lo={setInterval(e,t,...n){let{delegate:r}=lo;return r?.setInterval?r.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){let{delegate:t}=lo;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};var Zr=class extends Ia{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var r;if(this.closed)return this;this.state=t;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(t,n,r=0){return lo.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&lo.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(t,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let r=!1,i;try{this.work(t)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:t,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Hn(r,this),t!=null&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}};var Qr=class e{constructor(t,n=e.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,r){return new this.schedulerActionCtor(this,t).schedule(r,n)}};Qr.now=yd.now;var Jr=class extends Qr{constructor(t,n=Qr.now){super(t,n),this.actions=[],this._active=!1}flush(t){let{actions:n}=this;if(this._active){n.push(t);return}let r;this._active=!0;do if(r=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,r){for(;t=n.shift();)t.unsubscribe();throw r}}};var _d=new Jr(Zr);var wa=class extends Zr{constructor(t,n){super(t,n),this.scheduler=t,this.work=n}schedule(t,n=0){return n>0?super.schedule(t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)}execute(t,n){return n>0||this.closed?super.execute(t,n):this._execute(t,n)}requestAsyncId(t,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(t,n,r):(t.flush(this),0)}};var Ca=class extends Jr{};var Ed=new Ca(wa);var ke=new P(e=>e.complete());function Qv(e){return e&&N(e.schedule)}function Jv(e){return e[e.length-1]}function Xv(e){return N(Jv(e))?e.pop():void 0}function mn(e){return Qv(Jv(e))?e.pop():void 0}function Id(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function ty(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(e,t||[])).next())})}function ey(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function zn(e){return this instanceof zn?(this.v=e,this):new zn(e)}function ny(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(h){return function(p){return Promise.resolve(p).then(h,d)}}function a(h,p){r[h]&&(i[h]=function(v){return new Promise(function(E,b){o.push([h,v,E,b])>1||c(h,v)})},p&&(i[h]=p(i[h])))}function c(h,p){try{l(r[h](p))}catch(v){f(o[0][3],v)}}function l(h){h.value instanceof zn?Promise.resolve(h.value.v).then(u,d):f(o[0][2],h)}function u(h){c("next",h)}function d(h){c("throw",h)}function f(h,p){h(p),o.shift(),o.length&&c(o[0][0],o[0][1])}}function ry(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof ey=="function"?ey(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(a,c){s=e[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var Ta=e=>e&&typeof e.length=="number"&&typeof e!="function";function Da(e){return N(e?.then)}function ba(e){return N(e[qr])}function Sa(e){return Symbol.asyncIterator&&N(e?.[Symbol.asyncIterator])}function Ra(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function jS(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Aa=jS();function Na(e){return N(e?.[Aa])}function Ma(e){return ny(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:i}=yield zn(n.read());if(i)return yield zn(void 0);yield yield zn(r)}}finally{n.releaseLock()}})}function Oa(e){return N(e?.getReader)}function ye(e){if(e instanceof P)return e;if(e!=null){if(ba(e))return US(e);if(Ta(e))return VS(e);if(Da(e))return BS(e);if(Sa(e))return iy(e);if(Na(e))return HS(e);if(Oa(e))return $S(e)}throw Ra(e)}function US(e){return new P(t=>{let n=e[qr]();if(N(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function VS(e){return new P(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function BS(e){return new P(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,ya)})}function HS(e){return new P(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function iy(e){return new P(t=>{WS(e,t).catch(n=>t.error(n))})}function $S(e){return iy(Ma(e))}function WS(e,t){var n,r,i,o;return ty(this,void 0,void 0,function*(){try{for(n=ry(e);r=yield n.next(),!r.done;){let s=r.value;if(t.next(s),t.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})}function Pe(e,t,n,r=0,i=!1){let o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function vn(e,t=0){return U((n,r)=>{n.subscribe(V(r,i=>Pe(r,e,()=>r.next(i),t),()=>Pe(r,e,()=>r.complete(),t),i=>Pe(r,e,()=>r.error(i),t)))})}function yn(e,t=0){return U((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function oy(e,t){return ye(e).pipe(yn(t),vn(t))}function sy(e,t){return ye(e).pipe(yn(t),vn(t))}function ay(e,t){return new P(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function cy(e,t){return new P(n=>{let r;return Pe(n,t,()=>{r=e[Aa](),Pe(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>N(r?.return)&&r.return()})}function ka(e,t){if(!e)throw new Error("Iterable cannot be null");return new P(n=>{Pe(n,t,()=>{let r=e[Symbol.asyncIterator]();Pe(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function ly(e,t){return ka(Ma(e),t)}function uy(e,t){if(e!=null){if(ba(e))return oy(e,t);if(Ta(e))return ay(e,t);if(Da(e))return sy(e,t);if(Sa(e))return ka(e,t);if(Na(e))return cy(e,t);if(Oa(e))return ly(e,t)}throw Ra(e)}function ae(e,t){return t?uy(e,t):ye(e)}function S(...e){let t=mn(e);return ae(e,t)}function Xr(e,t){let n=N(e)?e:()=>e,r=i=>i.error(n());return new P(t?i=>t.schedule(r,0,i):r)}function wd(e){return!!e&&(e instanceof P||N(e.lift)&&N(e.subscribe))}var qt=$r(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function B(e,t){return U((n,r)=>{let i=0;n.subscribe(V(r,o=>{r.next(e.call(t,o,i++))}))})}var{isArray:zS}=Array;function GS(e,t){return zS(t)?e(...t):e(t)}function dy(e){return B(t=>GS(e,t))}var{isArray:qS}=Array,{getPrototypeOf:KS,prototype:YS,keys:ZS}=Object;function fy(e){if(e.length===1){let t=e[0];if(qS(t))return{args:t,keys:null};if(QS(t)){let n=ZS(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function QS(e){return e&&typeof e=="object"&&KS(e)===YS}function hy(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}function Pa(...e){let t=mn(e),n=Xv(e),{args:r,keys:i}=fy(e);if(r.length===0)return ae([],t);let o=new P(JS(r,t,i?s=>hy(i,s):$e));return n?o.pipe(dy(n)):o}function JS(e,t,n=$e){return r=>{py(t,()=>{let{length:i}=e,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)py(t,()=>{let l=ae(e[c],t),u=!1;l.subscribe(V(r,d=>{o[c]=d,u||(u=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function py(e,t,n){e?Pe(n,e,t):t()}function gy(e,t,n,r,i,o,s,a){let c=[],l=0,u=0,d=!1,f=()=>{d&&!c.length&&!l&&t.complete()},h=v=>l<r?p(v):c.push(v),p=v=>{o&&t.next(v),l++;let E=!1;ye(n(v,u++)).subscribe(V(t,b=>{i?.(b),o?h(b):t.next(b)},()=>{E=!0},void 0,()=>{if(E)try{for(l--;c.length&&l<r;){let b=c.shift();s?Pe(t,s,()=>p(b)):p(b)}f()}catch(b){t.error(b)}}))};return e.subscribe(V(t,h,()=>{d=!0,f()})),()=>{a?.()}}function he(e,t,n=1/0){return N(t)?he((r,i)=>B((o,s)=>t(r,o,i,s))(ye(e(r,i))),n):(typeof t=="number"&&(n=t),U((r,i)=>gy(r,i,e,n)))}function my(e=1/0){return he($e,e)}function vy(){return my(1)}function ei(...e){return vy()(ae(e,mn(e)))}function uo(e){return new P(t=>{ye(e()).subscribe(t)})}function Je(e,t){return U((n,r)=>{let i=0;n.subscribe(V(r,o=>e.call(t,o,i++)&&r.next(o)))})}function _n(e){return U((t,n)=>{let r=null,i=!1,o;r=t.subscribe(V(n,void 0,void 0,s=>{o=ye(e(s,_n(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function yy(e,t,n,r,i){return(o,s)=>{let a=n,c=t,l=0;o.subscribe(V(s,u=>{let d=l++;c=a?e(c,u,d):(a=!0,u),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function ti(e,t){return N(t)?he(e,t,1):he(e,1)}function En(e){return U((t,n)=>{let r=!1;t.subscribe(V(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function Kt(e){return e<=0?()=>ke:U((t,n)=>{let r=0;t.subscribe(V(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function xa(e=XS){return U((t,n)=>{let r=!1;t.subscribe(V(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function XS(){return new qt}function fo(e){return U((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function Yt(e,t){let n=arguments.length>=2;return r=>r.pipe(e?Je((i,o)=>e(i,o,r)):$e,Kt(1),n?En(t):xa(()=>new qt))}function ni(e){return e<=0?()=>ke:U((t,n)=>{let r=[];t.subscribe(V(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Cd(e,t){let n=arguments.length>=2;return r=>r.pipe(e?Je((i,o)=>e(i,o,r)):$e,ni(1),n?En(t):xa(()=>new qt))}function Td(e,t){return U(yy(e,t,arguments.length>=2,!0))}function Dd(...e){let t=mn(e);return U((n,r)=>{(t?ei(e,n,t):ei(e,n)).subscribe(r)})}function xe(e,t){return U((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(V(r,c=>{i?.unsubscribe();let l=0,u=o++;ye(e(c,u)).subscribe(i=V(r,d=>r.next(t?t(c,d,u,l++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function La(e){return U((t,n)=>{ye(e).subscribe(V(n,()=>n.complete(),co)),!n.closed&&t.subscribe(n)})}function _e(e,t,n){let r=N(e)||t||n?{next:e,error:t,complete:n}:e;return r?U((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(V(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):$e}var Ha="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",w=class extends Error{code;constructor(t,n){super(Zn(t,n)),this.code=t}};function tR(e){return`NG0${Math.abs(e)}`}function Zn(e,t){return`${tR(e)}${t?": "+t:""}`}function z(e){for(let t in e)if(e[t]===z)return t;throw Error("")}function Qt(e){if(typeof e=="string")return e;if(Array.isArray(e))return`[${e.map(Qt).join(", ")}]`;if(e==null)return""+e;let t=e.overriddenName||e.name;if(t)return`${t}`;let n=e.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function jd(e,t){return e?t?`${e} ${t}`:e:t||""}var nR=z({__forward_ref__:z});function $a(e){return e.__forward_ref__=$a,e.toString=function(){return Qt(this())},e}function Le(e){return Ud(e)?e():e}function Ud(e){return typeof e=="function"&&e.hasOwnProperty(nR)&&e.__forward_ref__===$a}function Iy(e,t){e==null&&Vd(t,e,null,"!=")}function Vd(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(r==null?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}function C(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function vo(e){return rR(e,Wa)}function Bd(e){return vo(e)!==null}function rR(e,t){return e.hasOwnProperty(t)&&e[t]||null}function iR(e){let t=e?.[Wa]??null;return t||null}function Sd(e){return e&&e.hasOwnProperty(ja)?e[ja]:null}var Wa=z({\u0275prov:z}),ja=z({\u0275inj:z}),I=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,n){this._desc=t,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=C({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Hd(e){return e&&!!e.\u0275providers}var $d=z({\u0275cmp:z}),Wd=z({\u0275dir:z}),zd=z({\u0275pipe:z}),Gd=z({\u0275mod:z}),go=z({\u0275fac:z}),Qn=z({__NG_ELEMENT_ID__:z}),_y=z({__NG_ENV_ID__:z});function Jn(e){return typeof e=="string"?e:e==null?"":String(e)}function Ua(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():Jn(e)}var qd=z({ngErrorCode:z}),wy=z({ngErrorMessage:z}),po=z({ngTokenPath:z});function Kd(e,t){return Cy("",-200,t)}function za(e,t){throw new w(-201,!1)}function oR(e,t){e[po]??=[];let n=e[po],r;typeof t=="object"&&"multi"in t&&t?.multi===!0?(Iy(t.provide,"Token with multi: true should have a provide property"),r=Ua(t.provide)):r=Ua(t),n[0]!==r&&e[po].unshift(r)}function sR(e,t){let n=e[po],r=e[qd],i=e[wy]||e.message;return e.message=cR(i,r,n,t),e}function Cy(e,t,n){let r=new w(t,e);return r[qd]=t,r[wy]=e,n&&(r[po]=n),r}function aR(e){return e[qd]}function cR(e,t,n=[],r=null){let i="";n&&n.length>1&&(i=` Path: ${n.join(" -> ")}.`);let o=r?` Source: ${r}.`:"";return Zn(t,`${e}${o}${i}`)}var Rd;function Ty(){return Rd}function We(e){let t=Rd;return Rd=e,t}function Yd(e,t,n){let r=vo(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(t!==void 0)return t;za(e,"Injector")}var lR={},Gn=lR,Ad="__NG_DI_FLAG__",Nd=class{injector;constructor(t){this.injector=t}retrieve(t,n){let r=qn(n)||0;try{return this.injector.get(t,r&8?null:Gn,r)}catch(i){if(Br(i))return i;throw i}}};function uR(e,t=0){let n=aa();if(n===void 0)throw new w(-203,!1);if(n===null)return Yd(e,void 0,t);{let r=dR(t),i=n.retrieve(e,r);if(Br(i)){if(r.optional)return null;throw i}return i}}function R(e,t=0){return(Ty()||uR)(Le(e),t)}function g(e,t){return R(e,qn(t))}function qn(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function dR(e){return{optional:!!(e&8),host:!!(e&1),self:!!(e&2),skipSelf:!!(e&4)}}function Md(e){let t=[];for(let n=0;n<e.length;n++){let r=Le(e[n]);if(Array.isArray(r)){if(r.length===0)throw new w(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=fR(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}t.push(R(i,o))}else t.push(R(r))}return t}function Dy(e,t){return e[Ad]=t,e.prototype[Ad]=t,e}function fR(e){return e[Ad]}function Kn(e,t){let n=e.hasOwnProperty(go);return n?e[go]:null}function Ga(e,t){e.forEach(n=>Array.isArray(n)?Ga(n,t):t(n))}function Zd(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function yo(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function by(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(i===1)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;){let o=i-2;e[i]=e[o],i--}e[t]=n,e[t+1]=r}}function Sy(e,t,n){let r=ii(e,t);return r>=0?e[r|1]=n:(r=~r,by(e,r,t,n)),r}function qa(e,t){let n=ii(e,t);if(n>=0)return e[n|1]}function ii(e,t){return hR(e,t,1)}function hR(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=e[o<<n];if(t===s)return o<<n;s>t?i=o:r=o+1}return~(i<<n)}var Xn={},In=[],pt=new I(""),Qd=new I("",-1),Jd=new I(""),mo=class{get(t,n=Gn){if(n===Gn){let i=Cy("",-201);throw i.name="\u0275NotFound",i}return n}};function Xd(e){return e[Gd]||null}function Xt(e){return e[$d]||null}function Ka(e){return e[Wd]||null}function ef(e){return e[zd]||null}function Xe(e){return{\u0275providers:e}}function Ry(...e){return{\u0275providers:Ya(!0,e),\u0275fromNgModule:!0}}function Ya(e,...t){let n=[],r=new Set,i,o=s=>{n.push(s)};return Ga(t,s=>{let a=s;Va(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Ay(i,o),n}function Ay(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:i}=e[n];tf(i,o=>{t(o,r)})}}function Va(e,t,n,r){if(e=Le(e),!e)return!1;let i=null,o=Sd(e),s=!o&&Xt(e);if(!o&&!s){let c=e.ngModule;if(o=Sd(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=e}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Va(l,t,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Ga(o.imports,u=>{Va(u,t,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&Ay(l,t)}if(!a){let l=Kn(i)||(()=>new i);t({provide:i,useFactory:l,deps:In},i),t({provide:Jd,useValue:i,multi:!0},i),t({provide:pt,useValue:()=>R(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=e;tf(c,u=>{t(u,l)})}}else return!1;return i!==e&&e.providers!==void 0}function tf(e,t){for(let n of e)Hd(n)&&(n=n.\u0275providers),Array.isArray(n)?tf(n,t):t(n)}var pR=z({provide:String,useValue:z});function Ny(e){return e!==null&&typeof e=="object"&&pR in e}function gR(e){return!!(e&&e.useExisting)}function mR(e){return!!(e&&e.useFactory)}function Ba(e){return typeof e=="function"}var _o=new I(""),Fa={},Ey={},bd;function Eo(){return bd===void 0&&(bd=new mo),bd}var ce=class{},Yn=class extends ce{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,kd(t,s=>this.processProvider(s)),this.records.set(Qd,ri(void 0,this)),i.has("environment")&&this.records.set(ce,ri(void 0,this));let o=this.records.get(_o);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Jd,In,{self:!0}))}retrieve(t,n){let r=qn(n)||0;try{return this.get(t,Gn,r)}catch(i){if(Br(i))return i;throw i}}destroy(){ho(this),this._destroyed=!0;let t=k(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),k(t)}}onDestroy(t){return ho(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){ho(this);let n=Mt(this),r=We(void 0),i;try{return t()}finally{Mt(n),We(r)}}get(t,n=Gn,r){if(ho(this),t.hasOwnProperty(_y))return t[_y](this);let i=qn(r),o,s=Mt(this),a=We(void 0);try{if(!(i&4)){let l=this.records.get(t);if(l===void 0){let u=IR(t)&&vo(t);u&&this.injectableDefInScope(u)?l=ri(Od(t),Fa):l=null,this.records.set(t,l)}if(l!=null)return this.hydrate(t,l,i)}let c=i&2?Eo():this.parent;return n=i&8&&n===Gn?null:n,c.get(t,n)}catch(c){let l=aR(c);throw l===-200||l===-201?new w(l,null):c}finally{We(a),Mt(s)}}resolveInjectorInitializers(){let t=k(null),n=Mt(this),r=We(void 0),i;try{let o=this.get(pt,In,{self:!0});for(let s of o)s()}finally{Mt(n),We(r),k(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(Qt(r));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=Le(t);let n=Ba(t)?t:Le(t&&t.provide),r=yR(t);if(!Ba(t)&&t.multi===!0){let i=this.records.get(n);i||(i=ri(void 0,Fa,!0),i.factory=()=>Md(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n,r){let i=k(null);try{if(n.value===Ey)throw Kd(Qt(t));return n.value===Fa&&(n.value=Ey,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&ER(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{k(i)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=Le(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Od(e){let t=vo(e),n=t!==null?t.factory:Kn(e);if(n!==null)return n;if(e instanceof I)throw new w(204,!1);if(e instanceof Function)return vR(e);throw new w(204,!1)}function vR(e){if(e.length>0)throw new w(204,!1);let n=iR(e);return n!==null?()=>n.factory(e):()=>new e}function yR(e){if(Ny(e))return ri(void 0,e.useValue);{let t=My(e);return ri(t,Fa)}}function My(e,t,n){let r;if(Ba(e)){let i=Le(e);return Kn(i)||Od(i)}else if(Ny(e))r=()=>Le(e.useValue);else if(mR(e))r=()=>e.useFactory(...Md(e.deps||[]));else if(gR(e))r=(i,o)=>R(Le(e.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Le(e&&(e.useClass||e.provide));if(_R(e))r=()=>new i(...Md(e.deps));else return Kn(i)||Od(i)}return r}function ho(e){if(e.destroyed)throw new w(205,!1)}function ri(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function _R(e){return!!e.deps}function ER(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function IR(e){return typeof e=="function"||typeof e=="object"&&e.ngMetadataName==="InjectionToken"}function kd(e,t){for(let n of e)Array.isArray(n)?kd(n,t):n&&Hd(n)?kd(n.\u0275providers,t):t(n)}function ue(e,t){let n;e instanceof Yn?(ho(e),n=e):n=new Nd(e);let r,i=Mt(n),o=We(void 0);try{return t()}finally{Mt(i),We(o)}}function Oy(){return Ty()!==void 0||aa()!=null}var Ae=0,T=1,A=2,le=3,et=4,tt=5,Fe=6,oi=7,oe=8,gt=9,Ot=10,J=11,si=12,nf=13,er=14,Ne=15,tr=16,nr=17,rr=18,Io=19,rf=20,Zt=21,Za=22,wo=23,ze=24,ir=25,ee=26,ky=1,mt=6,kt=7,Co=8,To=9,Ee=10;function Ge(e){return Array.isArray(e)&&typeof e[ky]=="object"}function qe(e){return Array.isArray(e)&&e[ky]===!0}function of(e){return(e.flags&4)!==0}function en(e){return e.componentOffset>-1}function Qa(e){return(e.flags&1)===1}function or(e){return!!e.template}function sr(e){return(e[A]&512)!==0}function Cn(e){return(e[A]&256)===256}var Py="svg",xy="math";function Ke(e){for(;Array.isArray(e);)e=e[Ae];return e}function sf(e,t){return Ke(t[e])}function nt(e,t){return Ke(t[e.index])}function ar(e,t){return e.data[t]}function rt(e,t){let n=t[e];return Ge(n)?n:n[Ae]}function Ja(e){return(e[A]&128)===128}function Ly(e){return qe(e[le])}function Tn(e,t){return t==null?null:e[t]}function af(e){e[nr]=0}function cf(e){e[A]&1024||(e[A]|=1024,Ja(e)&&ai(e))}function Fy(e,t){for(;e>0;)t=t[er],e--;return t}function Do(e){return!!(e[A]&9216||e[ze]?.dirty)}function Xa(e){e[Ot].changeDetectionScheduler?.notify(8),e[A]&64&&(e[A]|=1024),Do(e)&&ai(e)}function ai(e){e[Ot].changeDetectionScheduler?.notify(0);let t=wn(e);for(;t!==null&&!(t[A]&8192||(t[A]|=8192,!Ja(t)));)t=wn(t)}function lf(e,t){if(Cn(e))throw new w(911,!1);e[Zt]===null&&(e[Zt]=[]),e[Zt].push(t)}function jy(e,t){if(e[Zt]===null)return;let n=e[Zt].indexOf(t);n!==-1&&e[Zt].splice(n,1)}function wn(e){let t=e[le];return qe(t)?t[le]:t}function Uy(e){return e[oi]??=[]}function Vy(e){return e.cleanup??=[]}var x={lFrame:i_(null),bindingsEnabled:!0,skipHydrationRootTNode:null},bo=function(e){return e[e.Off=0]="Off",e[e.Exhaustive=1]="Exhaustive",e[e.OnlyDirtyViews=2]="OnlyDirtyViews",e}(bo||{}),wR=0,Pd=!1;function By(){return x.lFrame.elementDepthCount}function Hy(){x.lFrame.elementDepthCount++}function $y(){x.lFrame.elementDepthCount--}function Wy(){return x.bindingsEnabled}function uf(){return x.skipHydrationRootTNode!==null}function zy(e){return x.skipHydrationRootTNode===e}function Gy(e){x.skipHydrationRootTNode=e}function qy(){x.skipHydrationRootTNode=null}function G(){return x.lFrame.lView}function vt(){return x.lFrame.tView}function ec(e){return x.lFrame.contextLView=e,e[oe]}function tc(e){return x.lFrame.contextLView=null,e}function it(){let e=df();for(;e!==null&&e.type===64;)e=e.parent;return e}function df(){return x.lFrame.currentTNode}function Ky(){let e=x.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function ci(e,t){let n=x.lFrame;n.currentTNode=e,n.isParent=t}function ff(){return x.lFrame.isParent}function Yy(){x.lFrame.isParent=!1}function hf(e){Vd("Must never be called in production mode"),wR=e}function pf(){return Pd}function gf(e){let t=Pd;return Pd=e,t}function Zy(){let e=x.lFrame,t=e.bindingRootIndex;return t===-1&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function Qy(){return x.lFrame.bindingIndex}function Jy(e){return x.lFrame.bindingIndex=e}function li(){return x.lFrame.bindingIndex++}function mf(e){let t=x.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function Xy(){return x.lFrame.inI18n}function e_(e,t){let n=x.lFrame;n.bindingIndex=n.bindingRootIndex=e,nc(t)}function t_(){return x.lFrame.currentDirectiveIndex}function nc(e){x.lFrame.currentDirectiveIndex=e}function n_(e){let t=x.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function vf(e){x.lFrame.currentQueryIndex=e}function CR(e){let t=e[T];return t.type===2?t.declTNode:t.type===1?e[tt]:null}function yf(e,t,n){if(n&4){let i=t,o=e;for(;i=i.parent,i===null&&!(n&1);)if(i=CR(o),i===null||(o=o[er],i.type&10))break;if(i===null)return!1;t=i,e=o}let r=x.lFrame=r_();return r.currentTNode=t,r.lView=e,!0}function rc(e){let t=r_(),n=e[T];x.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function r_(){let e=x.lFrame,t=e===null?null:e.child;return t===null?i_(e):t}function i_(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function o_(){let e=x.lFrame;return x.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var _f=o_;function ic(){let e=o_();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function s_(e){return(x.lFrame.contextLView=Fy(e,x.lFrame.contextLView))[oe]}function tn(){return x.lFrame.selectedIndex}function Dn(e){x.lFrame.selectedIndex=e}function Ef(){let e=x.lFrame;return ar(e.tView,e.selectedIndex)}function If(){return x.lFrame.currentNamespace}var a_=!0;function oc(){return a_}function nn(e){a_=e}function xd(e,t=null,n=null,r){let i=wf(e,t,n,r);return i.resolveInjectorInitializers(),i}function wf(e,t=null,n=null,r,i=new Set){let o=[n||In,Ry(e)];return r=r||(typeof e=="object"?void 0:Qt(e)),new Yn(o,t||Eo(),r||null,i)}var pe=class e{static THROW_IF_NOT_FOUND=Gn;static NULL=new mo;static create(t,n){if(Array.isArray(t))return xd({name:""},n,t,"");{let r=t.name??"";return xd({name:r},t.parent,t.providers,r)}}static \u0275prov=C({token:e,providedIn:"any",factory:()=>R(Qd)});static __NG_ELEMENT_ID__=-1},Ie=new I(""),rn=(()=>{class e{static __NG_ELEMENT_ID__=TR;static __NG_ENV_ID__=n=>n}return e})(),Ld=class extends rn{_lView;constructor(t){super(),this._lView=t}get destroyed(){return Cn(this._lView)}onDestroy(t){let n=this._lView;return lf(n,t),()=>jy(n,t)}};function TR(){return new Ld(G())}var ht=class{_console=console;handleError(t){this._console.error("ERROR",t)}},ot=new I("",{providedIn:"root",factory:()=>{let e=g(ce),t;return n=>{e.destroyed&&!t?setTimeout(()=>{throw n}):(t??=e.get(ht),t.handleError(n))}}}),c_={provide:pt,useValue:()=>void g(ht),multi:!0};function cr(e,t){let[n,r,i]=cd(e,t?.equal),o=n,s=o[Gt];return o.set=r,o.update=i,o.asReadonly=l_.bind(o),o}function l_(){let e=this[Gt];if(e.readonlyFn===void 0){let t=()=>this();t[Gt]=e,e.readonlyFn=t}return e.readonlyFn}var Jt=class{},So=new I("",{providedIn:"root",factory:()=>!1});var Cf=new I(""),Tf=new I("");var sc=(()=>{class e{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=DR}return e})();function DR(){return new sc(G(),it())}var yt=(()=>{class e{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Ce(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new P(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=C({token:e,providedIn:"root",factory:()=>new e})}return e})(),bn=(()=>{class e{internalPendingTasks=g(yt);scheduler=g(Jt);errorHandler=g(ot);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=C({token:e,providedIn:"root",factory:()=>new e})}return e})();function Ro(...e){}var Df=(()=>{class e{static \u0275prov=C({token:e,providedIn:"root",factory:()=>new Fd})}return e})(),Fd=class{dirtyEffectCount=0;queues=new Map;add(t){this.enqueue(t),this.schedule(t)}schedule(t){t.dirty&&this.dirtyEffectCount++}remove(t){let n=t.zone,r=this.queues.get(n);r.has(t)&&(r.delete(t),t.dirty&&this.dirtyEffectCount--)}enqueue(t){let n=t.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(t)||r.add(t)}flush(){for(;this.dirtyEffectCount>0;){let t=!1;for(let[n,r]of this.queues)n===null?t||=this.flushQueue(r):t||=n.run(()=>this.flushQueue(r));t||(this.dirtyEffectCount=0)}}flushQueue(t){let n=!1;for(let r of t)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};var ac={JSACTION:"jsaction"};function Fo(e){return{toString:e}.toString()}var cc="__parameters__";function xR(e){return function(...n){if(e){let r=e(...n);for(let i in r)this[i]=r[i]}}}function LR(e,t,n){return Fo(()=>{let r=xR(t);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,u){let d=c.hasOwnProperty(cc)?c[cc]:Object.defineProperty(c,cc,{value:[]})[cc];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),c}}return i.prototype.ngMetadataName=e,i.annotationCls=i,i})}var xt=Dy(LR("Optional"),8);function FR(e){return typeof e=="function"}var gc=class{previousValue;currentValue;firstChange;constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Z_(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}var Lc=(()=>{let e=()=>Q_;return e.ngInherit=!0,e})();function Q_(e){return e.type.prototype.ngOnChanges&&(e.setInput=UR),jR}function jR(){let e=X_(this),t=e?.current;if(t){let n=e.previous;if(n===Xn)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function UR(e,t,n,r,i){let o=this.declaredInputs[r],s=X_(e)||VR(e,{previous:Xn,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new gc(l&&l.currentValue,n,c===Xn),Z_(e,t,i,n)}var J_="__ngSimpleChanges__";function X_(e){return e[J_]||null}function VR(e,t){return e[J_]=t}var u_=[];var H=function(e,t=null,n){for(let r=0;r<u_.length;r++){let i=u_[r];i(e,t,n)}};function BR(e,t,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){let s=Q_(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}i&&(n.preOrderHooks??=[]).push(0-e,i),o&&((n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o))}function HR(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),c&&(e.viewHooks??=[]).push(-n,c),l&&((e.viewHooks??=[]).push(n,l),(e.viewCheckHooks??=[]).push(n,l)),u!=null&&(e.destroyHooks??=[]).push(n,u)}}function uc(e,t,n){eE(e,t,3,n)}function dc(e,t,n,r){(e[A]&3)===n&&eE(e,t,n,r)}function bf(e,t){let n=e[A];(n&3)===t&&(n&=16383,n+=1,e[A]=n)}function eE(e,t,n,r){let i=r!==void 0?e[nr]&65535:0,o=r??-1,s=t.length-1,a=0;for(let c=i;c<s;c++)if(typeof t[c+1]=="number"){if(a=t[c],r!=null&&a>=r)break}else t[c]<0&&(e[nr]+=65536),(a<o||o==-1)&&($R(e,n,t,c),e[nr]=(e[nr]&4294901760)+c+2),c++}function d_(e,t){H(4,e,t);let n=k(null);try{t.call(e)}finally{k(n),H(5,e,t)}}function $R(e,t,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=e[s];i?e[A]>>14<e[nr]>>16&&(e[A]&3)===t&&(e[A]+=16384,d_(a,o)):d_(a,o)}var di=-1,Mo=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,n,r,i){this.factory=t,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function WR(e){return(e.flags&8)!==0}function zR(e){return(e.flags&16)!==0}function GR(e,t,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];e.setAttribute(t,s,a,o)}else{let o=i,s=n[++r];KR(o)?e.setProperty(t,o,s):e.setAttribute(t,o,s),r++}}return r}function qR(e){return e===3||e===4||e===6}function KR(e){return e.charCodeAt(0)===64}function ah(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?f_(e,n,i,null,t[++r]):f_(e,n,i,null,null))}}return e}function f_(e,t,n,r,i){let o=0,s=e.length;if(t===-1)s=-1;else for(;o<e.length;){let a=e[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<e.length;){let a=e[o];if(typeof a=="number")break;if(a===n){i!==null&&(e[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),i!==null&&e.splice(o++,0,i)}function tE(e){return e!==di}function mc(e){return e&32767}function YR(e){return e>>16}function vc(e,t){let n=YR(e),r=t;for(;n>0;)r=r[er],n--;return r}var Ff=!0;function h_(e){let t=Ff;return Ff=e,t}var ZR=256,nE=ZR-1,rE=5,QR=0,Pt={};function JR(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Qn)&&(r=n[Qn]),r==null&&(r=n[Qn]=QR++);let i=r&nE,o=1<<i;t.data[e+(i>>rE)]|=o}function iE(e,t){let n=oE(e,t);if(n!==-1)return n;let r=t[T];r.firstCreatePass&&(e.injectorIndex=t.length,Sf(r.data,e),Sf(t,null),Sf(r.blueprint,null));let i=ch(e,t),o=e.injectorIndex;if(tE(i)){let s=mc(i),a=vc(i,t),c=a[T].data;for(let l=0;l<8;l++)t[o+l]=a[s+l]|c[s+l]}return t[o+8]=i,o}function Sf(e,t){e.push(0,0,0,0,0,0,0,0,t)}function oE(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function ch(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;i!==null;){if(r=uE(i),r===null)return di;if(n++,i=i[er],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return di}function XR(e,t,n){JR(e,t,n)}function sE(e,t,n){if(n&8||e!==void 0)return e;za(t,"NodeInjector")}function aE(e,t,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=e[gt],o=We(void 0);try{return i?i.get(t,r,n&8):Yd(t,r,n&8)}finally{We(o)}}return sE(r,t,n)}function cE(e,t,n,r=0,i){if(e!==null){if(t[A]&2048&&!(r&2)){let s=iA(e,t,n,r,Pt);if(s!==Pt)return s}let o=lE(e,t,n,r,Pt);if(o!==Pt)return o}return aE(t,n,r,i)}function lE(e,t,n,r,i){let o=nA(n);if(typeof o=="function"){if(!yf(t,e,r))return r&1?sE(i,n,r):aE(t,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))za(n);else return s}finally{_f()}}else if(typeof o=="number"){let s=null,a=oE(e,t),c=di,l=r&1?t[Ne][tt]:null;for((a===-1||r&4)&&(c=a===-1?ch(e,t):t[a+8],c===di||!g_(r,!1)?a=-1:(s=t[T],a=mc(c),t=vc(c,t)));a!==-1;){let u=t[T];if(p_(o,a,u.data)){let d=eA(a,t,n,s,r,l);if(d!==Pt)return d}c=t[a+8],c!==di&&g_(r,t[T].data[a+8]===l)&&p_(o,a,t)?(s=u,a=mc(c),t=vc(c,t)):a=-1}}return i}function eA(e,t,n,r,i,o){let s=t[T],a=s.data[e+8],c=r==null?en(a)&&Ff:r!=s&&(a.type&3)!==0,l=i&1&&o===a,u=tA(a,s,n,c,l);return u!==null?jf(t,s,u,a,i):Pt}function tA(e,t,n,r,i){let o=e.providerIndexes,s=t.data,a=o&1048575,c=e.directiveStart,l=e.directiveEnd,u=o>>20,d=r?a:a+u,f=i?a+u:l;for(let h=d;h<f;h++){let p=s[h];if(h<c&&n===p||h>=c&&p.type===n)return h}if(i){let h=s[c];if(h&&or(h)&&h.type===n)return c}return null}function jf(e,t,n,r,i){let o=e[n],s=t.data;if(o instanceof Mo){let a=o;if(a.resolving){let h=Ua(s[n]);throw Kd(h)}let c=h_(a.canSeeViewProviders);a.resolving=!0;let l=s[n].type||s[n],u,d=a.injectImpl?We(a.injectImpl):null,f=yf(e,r,0);try{o=e[n]=a.factory(void 0,i,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&BR(n,s[n],t)}finally{d!==null&&We(d),h_(c),a.resolving=!1,_f()}}return o}function nA(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(Qn)?e[Qn]:void 0;return typeof t=="number"?t>=0?t&nE:rA:t}function p_(e,t,n){let r=1<<e;return!!(n[t+(e>>rE)]&r)}function g_(e,t){return!(e&2)&&!(e&1&&t)}var ur=class{_tNode;_lView;constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return cE(this._tNode,this._lView,t,qn(r),n)}};function rA(){return new ur(it(),G())}function Fc(e){return Fo(()=>{let t=e.prototype.constructor,n=t[go]||Uf(t),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){let o=i[go]||Uf(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Uf(e){return Ud(e)?()=>{let t=Uf(Le(e));return t&&t()}:Kn(e)}function iA(e,t,n,r,i){let o=e,s=t;for(;o!==null&&s!==null&&s[A]&2048&&!sr(s);){let a=lE(o,s,n,r|2,Pt);if(a!==Pt)return a;let c=o.parent;if(!c){let l=s[rf];if(l){let u=l.get(n,Pt,r);if(u!==Pt)return u}c=uE(s),s=s[er]}o=c}return i}function uE(e){let t=e[T],n=t.type;return n===2?t.declTNode:n===1?e[tt]:null}function oA(){return lh(it(),G())}function lh(e,t){return new jc(nt(e,t))}var jc=(()=>{class e{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=oA}return e})();var dE="ngSkipHydration",sA="ngskiphydration";function fE(e){let t=e.mergedAttrs;if(t===null)return!1;for(let n=0;n<t.length;n+=2){let r=t[n];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===sA)return!0}return!1}function hE(e){return e.hasAttribute(dE)}function yc(e){return(e.flags&128)===128}function pE(e){if(yc(e))return!0;let t=e.parent;for(;t;){if(yc(e)||fE(t))return!0;t=t.parent}return!1}var uh=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(uh||{}),gE=new Map,aA=0;function cA(){return aA++}function lA(e){gE.set(e[Io],e)}function Vf(e){gE.delete(e[Io])}var m_="__ngContext__";function pi(e,t){Ge(t)?(e[m_]=t[Io],lA(t)):e[m_]=t}function mE(e){return yE(e[si])}function vE(e){return yE(e[et])}function yE(e){for(;e!==null&&!qe(e);)e=e[et];return e}var Bf;function dh(e){Bf=e}function jo(){if(Bf!==void 0)return Bf;if(typeof document<"u")return document;throw new w(210,!1)}var Lt=new I("",{providedIn:"root",factory:()=>uA}),uA="ng",Uc=new I(""),st=new I("",{providedIn:"platform",factory:()=>"unknown"});var Vc=new I("",{providedIn:"root",factory:()=>jo().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function dA(){let e=new pr;return e.store=_E(jo(),g(Lt)),e}var pr=(()=>{class e{static \u0275prov=C({token:e,providedIn:"root",factory:dA});store={};onSerializeCallbacks={};get(n,r){return this.store[n]!==void 0?this.store[n]:r}set(n,r){this.store[n]=r}remove(n){delete this.store[n]}hasKey(n){return this.store.hasOwnProperty(n)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(n,r){this.onSerializeCallbacks[n]=r}toJson(){for(let n in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(n))try{this.store[n]=this.onSerializeCallbacks[n]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return e})();function _E(e,t){let n=e.getElementById(t+"-state");if(n?.textContent)try{return JSON.parse(n.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+t,r)}return{}}var EE="h",IE="b",fA="f",hA="n",wE="e",CE="t",Bc="c",fh="x",Oo="r",TE="i",DE="n",hh="d";var bE="di",SE="s",RE="p";var Uo=new I(""),AE=!1,ph=new I("",{providedIn:"root",factory:()=>AE});var gh=new I(""),NE=!1,ME=new I(""),mh=new I("",{providedIn:"root",factory:()=>new Map});var Vo="ngb";var OE=(e,t,n)=>{let r=e,i=r.__jsaction_fns??new Map,o=i.get(t)??[];o.push(n),i.set(t,o),r.__jsaction_fns=i},kE=(e,t)=>{let n=e,r=n.getAttribute(Vo)??"",i=t.get(r)??new Set;i.has(n)||i.add(n),t.set(r,i)};var PE=e=>{e.removeAttribute(ac.JSACTION),e.removeAttribute(Vo),e.__jsaction_fns=void 0},xE=new I("",{providedIn:"root",factory:()=>({})});function vh(e,t){let n=t?.__jsaction_fns?.get(e.type);if(!(!n||!t?.isConnected))for(let r of n)r(e)}var Hf=new Map;function LE(e,t){return Hf.set(e,t),()=>Hf.delete(e)}var v_=!1,FE=(e,t,n,r)=>{};function pA(e,t,n,r){FE(e,t,n,r)}function jE(){v_||(FE=(e,t,n,r)=>{let i=e[gt].get(Lt);Hf.get(i)?.(t,n,r)},v_=!0)}var Hc=new I("");function $c(e){return(e.flags&32)===32}var gA="__nghData__",yh=gA,mA="__nghDeferData__",UE=mA;var fc="ngh",VE="nghm",BE=()=>null;function vA(e,t,n=!1){let r=e.getAttribute(fc);if(r==null)return null;let[i,o]=r.split("|");if(r=n?o:i,!r)return null;let s=o?`|${o}`:"",a=n?i:s,c={};if(r!==""){let u=t.get(pr,null,{optional:!0});u!==null&&(c=u.get(yh,[])[Number(r)])}let l={data:c,firstChild:e.firstChild??null};return n&&(l.firstChild=e,Wc(l,0,e.nextSibling)),a?e.setAttribute(fc,a):e.removeAttribute(fc),l}function HE(){BE=vA}function $E(e,t,n=!1){return BE(e,t,n)}function WE(e){let t=e._lView;return t[T].type===2?null:(sr(t)&&(t=t[ee]),t)}function yA(e){return e.textContent?.replace(/\s/gm,"")}function _A(e){let t=jo(),n=t.createNodeIterator(e,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=yA(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=n.nextNode();)i.push(r);for(let o of i)o.textContent==="ngetn"?o.replaceWith(t.createTextNode("")):o.remove()}function Wc(e,t,n){e.segmentHeads??={},e.segmentHeads[t]=n}function $f(e,t){return e.segmentHeads?.[t]??null}function zE(e){return e.get(ME,!1,{optional:!0})}function EA(e,t){let n=e.data,r=n[wE]?.[t]??null;return r===null&&n[Bc]?.[t]&&(r=_h(e,t)),r}function GE(e,t){return e.data[Bc]?.[t]??null}function _h(e,t){let n=GE(e,t)??[],r=0;for(let i of n)r+=i[Oo]*(i[fh]??1);return r}function IA(e){if(typeof e.disconnectedNodes>"u"){let t=e.data[hh];e.disconnectedNodes=t?new Set(t):null}return e.disconnectedNodes}function qE(e,t){if(typeof e.disconnectedNodes>"u"){let n=e.data[hh];e.disconnectedNodes=n?new Set(n):null}return!!IA(e)?.has(t)}function zc(e,t){let n=e[Fe];return n!==null&&!uf()&&!$c(t)&&!qE(n,t.index-ee)}function wA(e,t){let n=t.get(Hc),i=t.get(pr).get(UE,{}),o=!1,s=e,a=null,c=[];for(;!o&&s;){o=n.has(s);let l=n.hydrating.get(s);if(a===null&&l!=null){a=l.promise;break}c.unshift(s),s=i[s][RE]}return{parentBlockPromise:a,hydrationQueue:c}}function Rf(e){return!!e&&e.nodeType===Node.COMMENT_NODE&&e.textContent?.trim()===VE}function y_(e){for(;e&&e.nodeType===Node.TEXT_NODE;)e=e.previousSibling;return e}function KE(e){for(let r of e.body.childNodes)if(Rf(r))return;let t=y_(e.body.previousSibling);if(Rf(t))return;let n=y_(e.head.lastChild);if(!Rf(n))throw new w(-507,!1)}function YE(e,t){let n=e.contentQueries;if(n!==null){let r=k(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=e.data[s];vf(o),a.contentQueries(2,t[s],s)}}}finally{k(r)}}}function Wf(e,t,n){vf(0);let r=k(null);try{t(e,n)}finally{k(r)}}function ZE(e,t,n){if(of(t)){let r=k(null);try{let i=t.directiveStart,o=t.directiveEnd;for(let s=i;s<o;s++){let a=e.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{k(r)}}}var on=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(on||{});var _c=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ha})`}};function Gc(e){return e instanceof _c?e.changingThisBreaksApplicationSecurity:e}function Eh(e,t){let n=QE(e);if(n!=null&&n!==t){if(n==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${Ha})`)}return n===t}function QE(e){return e instanceof _c&&e.getTypeName()||null}var CA=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Ih(e){return e=String(e),e.match(CA)?e:"unsafe:"+e}var qc=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(qc||{});function Kc(e){let t=TA();return t?t.sanitize(qc.URL,e)||"":Eh(e,"URL")?Gc(e):Ih(Jn(e))}function TA(){let e=G();return e&&e[Ot].sanitizer}var DA=/^>|^->|<!--|-->|--!>|<!-$/g,bA=/(<|>)/g,SA="\u200B$1\u200B";function RA(e){return e.replace(DA,t=>t.replace(bA,SA))}function JE(e){return e.ownerDocument.body}function XE(e){return e instanceof Function?e():e}function AA(e,t,n){let r=e.length;for(;;){let i=e.indexOf(t,n);if(i===-1)return i;if(i===0||e.charCodeAt(i-1)<=32){let o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}var eI="ng-template";function NA(e,t,n,r){let i=0;if(r){for(;i<t.length&&typeof t[i]=="string";i+=2)if(t[i]==="class"&&AA(t[i+1].toLowerCase(),n,0)!==-1)return!0}else if(wh(e))return!1;if(i=t.indexOf(1,i),i>-1){let o;for(;++i<t.length&&typeof(o=t[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function wh(e){return e.type===4&&e.value!==eI}function MA(e,t,n){let r=e.type===4&&!n?eI:e.value;return t===r}function OA(e,t,n){let r=4,i=e.attrs,o=i!==null?xA(i):0,s=!1;for(let a=0;a<t.length;a++){let c=t[a];if(typeof c=="number"){if(!s&&!_t(r)&&!_t(c))return!1;if(s&&_t(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!MA(e,c,n)||c===""&&t.length===1){if(_t(r))return!1;s=!0}}else if(r&8){if(i===null||!NA(e,i,c,n)){if(_t(r))return!1;s=!0}}else{let l=t[++a],u=kA(c,i,wh(e),n);if(u===-1){if(_t(r))return!1;s=!0;continue}if(l!==""){let d;if(u>o?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(_t(r))return!1;s=!0}}}}return _t(r)||s}function _t(e){return(e&1)===0}function kA(e,t,n,r){if(t===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){let s=t[i];if(s===e)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++i];for(;typeof a=="string";)a=t[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return LA(t,e)}function PA(e,t,n=!1){for(let r=0;r<t.length;r++)if(OA(e,t[r],n))return!0;return!1}function xA(e){for(let t=0;t<e.length;t++){let n=e[t];if(qR(n))return t}return e.length}function LA(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function __(e,t){return e?":not("+t.trim()+")":t}function FA(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let s=e[n];if(typeof s=="string")if(r&2){let a=e[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!_t(s)&&(t+=__(o,i),i=""),r=s,o=o||!_t(r);n++}return i!==""&&(t+=__(o,i)),t}function jA(e){return e.map(FA).join(",")}function UA(e){let t=[],n=[],r=1,i=2;for(;r<e.length;){let o=e[r];if(typeof o=="string")i===2?o!==""&&t.push(o,e[++r]):i===8&&n.push(o);else{if(!_t(i))break;i=o}r++}return n.length&&t.push(1,...n),t}var at={};function tI(e,t){return e.createText(t)}function VA(e,t,n){e.setValue(t,n)}function nI(e,t){return e.createComment(RA(t))}function Ch(e,t,n){return e.createElement(t,n)}function Ec(e,t,n,r,i){e.insertBefore(t,n,r,i)}function rI(e,t,n){e.appendChild(t,n)}function E_(e,t,n,r,i){r!==null?Ec(e,t,n,r,i):rI(e,t,n)}function Th(e,t,n){e.removeChild(null,t,n)}function iI(e){e.textContent=""}function BA(e,t,n){e.setAttribute(t,"style",n)}function HA(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function oI(e,t,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&GR(e,t,r),i!==null&&HA(e,t,i),o!==null&&BA(e,t,o)}function Dh(e,t,n,r,i,o,s,a,c,l,u){let d=ee+r,f=d+i,h=$A(d,f),p=typeof l=="function"?l():l;return h[T]={type:e,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:t,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}function $A(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:at);return n}function WA(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=Dh(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function bh(e,t,n,r,i,o,s,a,c,l,u){let d=t.blueprint.slice();return d[Ae]=i,d[A]=r|4|128|8|64|1024,(l!==null||e&&e[A]&2048)&&(d[A]|=2048),af(d),d[le]=d[er]=e,d[oe]=n,d[Ot]=s||e&&e[Ot],d[J]=a||e&&e[J],d[gt]=c||e&&e[gt]||null,d[tt]=o,d[Io]=cA(),d[Fe]=u,d[rf]=l,d[Ne]=t.type==2?e[Ne]:d,d}function zA(e,t,n){let r=nt(t,e),i=WA(n),o=e[Ot].rendererFactory,s=Sh(e,bh(e,i,null,sI(n),r,t,null,o.createRenderer(r,n),null,null,null));return e[t.index]=s}function sI(e){let t=16;return e.signals?t=4096:e.onPush&&(t=64),t}function aI(e,t,n,r){if(n===0)return-1;let i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function Sh(e,t){return e[si]?e[nf][et]=t:e[si]=t,e[nf]=t,t}function be(e=1){cI(vt(),G(),tn()+e,!1)}function cI(e,t,n,r){if(!r)if((t[A]&3)===3){let o=e.preOrderCheckHooks;o!==null&&uc(t,o,n)}else{let o=e.preOrderHooks;o!==null&&dc(t,o,0,n)}Dn(n)}var Yc=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(Yc||{});function zf(e,t,n,r){let i=k(null);try{let[o,s,a]=e.inputs[n],c=null;(s&Yc.SignalBased)!==0&&(c=t[o][Gt]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(t,r)),e.setInput!==null?e.setInput(t,c,r,n,o):Z_(t,c,o,r)}finally{k(i)}}var sn=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(sn||{}),GA;function Rh(e,t){return GA(e,t)}function ui(e,t,n,r,i){if(r!=null){let o,s=!1;qe(r)?o=r:Ge(r)&&(s=!0,r=r[Ae]);let a=Ke(r);e===0&&n!==null?i==null?rI(t,n,a):Ec(t,n,a,i||null,!0):e===1&&n!==null?Ec(t,n,a,i||null,!0):e===2?Th(t,a,s):e===3&&t.destroyNode(a),o!=null&&iN(t,e,o,n,i)}}function qA(e,t){lI(e,t),t[Ae]=null,t[tt]=null}function KA(e,t,n,r,i,o){r[Ae]=i,r[tt]=t,Qc(e,r,n,1,i,o)}function lI(e,t){t[Ot].changeDetectionScheduler?.notify(9),Qc(e,t,t[J],2,null,null)}function YA(e){let t=e[si];if(!t)return Af(e[T],e);for(;t;){let n=null;if(Ge(t))n=t[si];else{let r=t[Ee];r&&(n=r)}if(!n){for(;t&&!t[et]&&t!==e;)Ge(t)&&Af(t[T],t),t=t[le];t===null&&(t=e),Ge(t)&&Af(t[T],t),n=t&&t[et]}t=n}}function Ah(e,t){let n=e[To],r=n.indexOf(t);n.splice(r,1)}function Zc(e,t){if(Cn(t))return;let n=t[J];n.destroyNode&&Qc(e,t,n,3,null,null),YA(t)}function Af(e,t){if(Cn(t))return;let n=k(null);try{t[A]&=-129,t[A]|=256,t[ze]&&pa(t[ze]),QA(e,t),ZA(e,t),t[T].type===1&&t[J].destroy();let r=t[tr];if(r!==null&&qe(t[le])){r!==t[le]&&Ah(r,t);let i=t[rr];i!==null&&i.detachView(e)}Vf(t)}finally{k(n)}}function ZA(e,t){let n=e.cleanup,r=t[oi];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(t[oi]=null);let i=t[Zt];if(i!==null){t[Zt]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=t[wo];if(o!==null){t[wo]=null;for(let s of o)s.destroy()}}function QA(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=t[n[r]];if(!(i instanceof Mo)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];H(4,a,c);try{c.call(a)}finally{H(5,a,c)}}else{H(4,i,o);try{o.call(i)}finally{H(5,i,o)}}}}}function JA(e,t,n){return XA(e,t.parent,n)}function XA(e,t,n){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return n[Ae];if(en(r)){let{encapsulation:i}=e.data[r.directiveStart+r.componentOffset];if(i===on.None||i===on.Emulated)return null}return nt(r,n)}function eN(e,t,n){return nN(e,t,n)}function tN(e,t,n){return e.type&40?nt(e,n):null}var nN=tN,I_;function Nh(e,t,n,r){let i=JA(e,r,t),o=t[J],s=r.parent||t[tt],a=eN(s,r,t);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)E_(o,i,n[c],a,!1);else E_(o,i,n,a,!1);I_!==void 0&&I_(o,r,t,n,i)}function Ao(e,t){if(t!==null){let n=t.type;if(n&3)return nt(t,e);if(n&4)return Gf(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return Ao(e,r);{let i=e[t.index];return qe(i)?Gf(-1,i):Ke(i)}}else{if(n&128)return Ao(e,t.next);if(n&32)return Rh(t,e)()||Ke(e[t.index]);{let r=uI(e,t);if(r!==null){if(Array.isArray(r))return r[0];let i=wn(e[Ne]);return Ao(i,r)}else return Ao(e,t.next)}}}return null}function uI(e,t){if(t!==null){let r=e[Ne][tt],i=t.projection;return r.projection[i]}return null}function Gf(e,t){let n=Ee+e+1;if(n<t.length){let r=t[n],i=r[T].firstChild;if(i!==null)return Ao(r,i)}return t[kt]}function Mh(e,t,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(s&&t===0&&(a&&pi(Ke(a),r),n.flags|=2),!$c(n))if(c&8)Mh(e,t,n.child,r,i,o,!1),ui(t,e,i,a,o);else if(c&32){let l=Rh(n,r),u;for(;u=l();)ui(t,e,i,u,o);ui(t,e,i,a,o)}else c&16?rN(e,t,r,n,i,o):ui(t,e,i,a,o);n=s?n.projectionNext:n.next}}function Qc(e,t,n,r,i,o){Mh(n,r,e.firstChild,t,i,o,!1)}function rN(e,t,n,r,i,o){let s=n[Ne],c=s[tt].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];ui(t,e,i,u,o)}else{let l=c,u=s[le];yc(r)&&(l.flags|=128),Mh(e,t,l,u,i,o,!0)}}function iN(e,t,n,r,i){let o=n[kt],s=Ke(n);o!==s&&ui(t,e,r,o,i);for(let a=Ee;a<n.length;a++){let c=n[a];Qc(c[T],c,e,t,r,o)}}function oN(e,t,n,r,i){if(t)i?e.addClass(n,r):e.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:sn.DashCase;i==null?e.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=sn.Important),e.setStyle(n,r,i,o))}}function dI(e,t,n,r,i){let o=tn(),s=r&2;try{Dn(-1),s&&t.length>ee&&cI(e,t,ee,!1),H(s?2:0,i,n),n(r,i)}finally{Dn(o),H(s?3:1,i,n)}}function fI(e,t,n){hN(e,t,n),(n.flags&64)===64&&pN(e,t,n)}function hI(e,t,n=nt){let r=t.localNames;if(r!==null){let i=t.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(t,e):e[s];e[i++]=a}}}function sN(e,t,n,r){let o=r.get(ph,AE)||n===on.ShadowDom,s=e.selectRootElement(t,o);return aN(s),s}function aN(e){pI(e)}var pI=()=>null;function cN(e){hE(e)?iI(e):_A(e)}function gI(){pI=cN}function lN(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function uN(e,t,n,r,i,o){let s=t[T];if(kh(e,s,t,n,r)){en(e)&&fN(t,e.index);return}e.type&3&&(n=lN(n)),dN(e,t,n,r,i,o)}function dN(e,t,n,r,i,o){if(e.type&3){let s=nt(e,t);r=o!=null?o(r,e.value||"",n):r,i.setProperty(s,n,r)}else e.type&12}function fN(e,t){let n=rt(t,e);n[A]&16||(n[A]|=64)}function hN(e,t,n){let r=n.directiveStart,i=n.directiveEnd;en(n)&&zA(t,n,e.data[r+n.componentOffset]),e.firstCreatePass||iE(n,t);let o=n.initialInputs;for(let s=r;s<i;s++){let a=e.data[s],c=jf(t,e,s,n);if(pi(c,t),o!==null&&_N(t,s-r,c,a,n,o),or(a)){let l=rt(n.index,t);l[oe]=jf(t,e,s,n)}}}function pN(e,t,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=t_();try{Dn(o);for(let a=r;a<i;a++){let c=e.data[a],l=t[a];nc(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&gN(c,l)}}finally{Dn(-1),nc(s)}}function gN(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function mN(e,t){let n=e.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];PA(t,o.selectors,!1)&&(r??=[],or(o)?r.unshift(o):r.push(o))}return r}function vN(e,t,n,r,i,o){let s=nt(e,t);yN(t[J],s,o,e.value,n,r,i)}function yN(e,t,n,r,i,o,s){if(o==null)e.removeAttribute(t,i,n);else{let a=s==null?Jn(o):s(o,r||"",i);e.setAttribute(t,i,a,n)}}function _N(e,t,n,r,i,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];zf(r,n,c,l)}}function EN(e,t,n,r,i){let o=ee+n,s=t[T],a=i(s,t,e,r,n);t[o]=a,ci(e,!0);let c=e.type===2;return c?(oI(t[J],a,e),(By()===0||Qa(e))&&pi(a,t),Hy()):pi(a,t),oc()&&(!c||!$c(e))&&Nh(s,t,a,e),e}function IN(e){let t=e;return ff()?Yy():(t=t.parent,ci(t,!1)),t}function Oh(e,t){let n=e[gt];if(!n)return;n.get(ot,null)?.(t)}function kh(e,t,n,r,i){let o=e.inputs?.[r],s=e.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],u=s[c+1],d=t.data[l];zf(d,n[l],u,i),a=!0}if(o)for(let c of o){let l=n[c],u=t.data[c];zf(u,l,r,i),a=!0}return a}function wN(e,t){let n=rt(t,e),r=n[T];CN(r,n);let i=n[Ae];i!==null&&n[Fe]===null&&(n[Fe]=$E(i,n[gt])),H(18),Ph(r,n,n[oe]),H(19,n[oe])}function CN(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function Ph(e,t,n){rc(t);try{let r=e.viewQuery;r!==null&&Wf(1,r,n);let i=e.template;i!==null&&dI(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[rr]?.finishViewCreation(e),e.staticContentQueries&&YE(e,t),e.staticViewQueries&&Wf(2,e.viewQuery,n);let o=e.components;o!==null&&TN(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[A]&=-5,ic()}}function TN(e,t){for(let n=0;n<t.length;n++)wN(e,t[n])}function Jc(e,t,n,r){let i=k(null);try{let o=t.tView,a=e[A]&4096?4096:16,c=bh(e,o,n,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=e[t.index];c[tr]=l;let u=e[rr];return u!==null&&(c[rr]=u.createEmbeddedView(o)),Ph(o,c,n),c}finally{k(i)}}function gi(e,t){return!t||t.firstChild===null||yc(e)}var w_=!1,DN=new I("");function ko(e,t,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=t[n.index];o!==null&&r.push(Ke(o)),qe(o)&&mI(o,r);let s=n.type;if(s&8)ko(e,t,n.child,r);else if(s&32){let a=Rh(n,t),c;for(;c=a();)r.push(c)}else if(s&16){let a=uI(t,n);if(Array.isArray(a))r.push(...a);else{let c=wn(t[Ne]);ko(c[T],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function mI(e,t){for(let n=Ee;n<e.length;n++){let r=e[n],i=r[T].firstChild;i!==null&&ko(r[T],r,i,t)}e[kt]!==e[Ae]&&t.push(e[kt])}function vI(e){if(e[ir]!==null){for(let t of e[ir])t.impl.addSequence(t);e[ir].length=0}}var yI=[];function bN(e){return e[ze]??SN(e)}function SN(e){let t=yI.pop()??Object.create(AN);return t.lView=e,t}function RN(e){e.lView[ze]!==e&&(e.lView=null,yI.push(e))}var AN=K(_({},ua),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{ai(e.lView)},consumerOnSignalRead(){this.lView[ze]=this}});function NN(e){let t=e[ze]??Object.create(MN);return t.lView=e,t}var MN=K(_({},ua),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{let t=wn(e.lView);for(;t&&!_I(t[T]);)t=wn(t);t&&cf(t)},consumerOnSignalRead(){this.lView[ze]=this}});function _I(e){return e.type!==2}function EI(e){if(e[wo]===null)return;let t=!0;for(;t;){let n=!1;for(let r of e[wo])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));t=n&&!!(e[A]&8192)}}var ON=100;function xh(e,t=0){let r=e[Ot].rendererFactory,i=!1;i||r.begin?.();try{kN(e,t)}finally{i||r.end?.()}}function kN(e,t){let n=pf();try{gf(!0),qf(e,t);let r=0;for(;Do(e);){if(r===ON)throw new w(103,!1);r++,qf(e,1)}}finally{gf(n)}}function II(e,t){hf(t?bo.Exhaustive:bo.OnlyDirtyViews);try{xh(e)}finally{hf(bo.Off)}}function PN(e,t,n,r){if(Cn(t))return;let i=t[A],o=!1,s=!1;rc(t);let a=!0,c=null,l=null;o||(_I(e)?(l=bN(t),c=fa(l)):la()===null?(a=!1,l=NN(t),c=fa(l)):t[ze]&&(pa(t[ze]),t[ze]=null));try{af(t),Jy(e.bindingStartIndex),n!==null&&dI(e,t,n,2,r);let u=(i&3)===3;if(!o)if(u){let h=e.preOrderCheckHooks;h!==null&&uc(t,h,null)}else{let h=e.preOrderHooks;h!==null&&dc(t,h,0,null),bf(t,0)}if(s||xN(t),EI(t),wI(t,0),e.contentQueries!==null&&YE(e,t),!o)if(u){let h=e.contentCheckHooks;h!==null&&uc(t,h)}else{let h=e.contentHooks;h!==null&&dc(t,h,1),bf(t,1)}FN(e,t);let d=e.components;d!==null&&TI(t,d,0);let f=e.viewQuery;if(f!==null&&Wf(2,f,r),!o)if(u){let h=e.viewCheckHooks;h!==null&&uc(t,h)}else{let h=e.viewHooks;h!==null&&dc(t,h,2),bf(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[Za]){for(let h of t[Za])h();t[Za]=null}o||(vI(t),t[A]&=-73)}catch(u){throw o||ai(t),u}finally{l!==null&&(od(l,c),a&&RN(l)),ic()}}function wI(e,t){for(let n=mE(e);n!==null;n=vE(n))for(let r=Ee;r<n.length;r++){let i=n[r];CI(i,t)}}function xN(e){for(let t=mE(e);t!==null;t=vE(t)){if(!(t[A]&2))continue;let n=t[To];for(let r=0;r<n.length;r++){let i=n[r];cf(i)}}}function LN(e,t,n){H(18);let r=rt(t,e);CI(r,n),H(19,r[oe])}function CI(e,t){Ja(e)&&qf(e,t)}function qf(e,t){let r=e[T],i=e[A],o=e[ze],s=!!(t===0&&i&16);if(s||=!!(i&64&&t===0),s||=!!(i&1024),s||=!!(o?.dirty&&ha(o)),s||=!1,o&&(o.dirty=!1),e[A]&=-9217,s)PN(r,e,r.template,e[oe]);else if(i&8192){let a=k(null);try{EI(e),wI(e,1);let c=r.components;c!==null&&TI(e,c,1),vI(e)}finally{k(a)}}}function TI(e,t,n){for(let r=0;r<t.length;r++)LN(e,t[r],n)}function FN(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Dn(~i);else{let o=i,s=n[++r],a=n[++r];e_(s,o);let c=t[o];H(24,c),a(2,c),H(25,c)}}}finally{Dn(-1)}}function Xc(e,t){let n=pf()?64:1088;for(e[Ot].changeDetectionScheduler?.notify(t);e;){e[A]|=n;let r=wn(e);if(sr(e)&&!r)return e;e=r}return null}function DI(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function bI(e,t){let n=Ee+t;if(n<e.length)return e[n]}function Bo(e,t,n,r=!0){let i=t[T];if(jN(i,t,e,n),r){let s=Gf(n,e),a=t[J],c=a.parentNode(e[kt]);c!==null&&KA(i,e[tt],a,t,c,s)}let o=t[Fe];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Lh(e,t){let n=Po(e,t);return n!==void 0&&Zc(n[T],n),n}function Po(e,t){if(e.length<=Ee)return;let n=Ee+t,r=e[n];if(r){let i=r[tr];i!==null&&i!==e&&Ah(i,r),t>0&&(e[n-1][et]=r[et]);let o=yo(e,Ee+t);qA(r[T],r);let s=o[rr];s!==null&&s.detachView(o[T]),r[le]=null,r[et]=null,r[A]&=-129}return r}function jN(e,t,n,r){let i=Ee+r,o=n.length;r>0&&(n[i-1][et]=t),r<o-Ee?(t[et]=n[i],Zd(n,Ee+r,t)):(n.push(t),t[et]=null),t[le]=n;let s=t[tr];s!==null&&n!==s&&SI(s,t);let a=t[rr];a!==null&&a.insertView(e),Xa(t),t[A]|=128}function SI(e,t){let n=e[To],r=t[le];if(Ge(r))e[A]|=2;else{let i=r[le][Ne];t[Ne]!==i&&(e[A]|=2)}n===null?e[To]=[t]:n.push(t)}var dr=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let t=this._lView,n=t[T];return ko(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n}get context(){return this._lView[oe]}set context(t){this._lView[oe]=t}get destroyed(){return Cn(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[le];if(qe(t)){let n=t[Co],r=n?n.indexOf(this):-1;r>-1&&(Po(t,r),yo(n,r))}this._attachedToViewContainer=!1}Zc(this._lView[T],this._lView)}onDestroy(t){lf(this._lView,t)}markForCheck(){Xc(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[A]&=-129}reattach(){Xa(this._lView),this._lView[A]|=128}detectChanges(){this._lView[A]|=1024,xh(this._lView)}checkNoChanges(){return;try{this.exhaustive??=this._lView[gt].get(DN,w_)}catch{this.exhaustive=w_}}attachToViewContainerRef(){if(this._appRef)throw new w(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=sr(this._lView),n=this._lView[tr];n!==null&&!t&&Ah(n,this._lView),lI(this._lView[T],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new w(902,!1);this._appRef=t;let n=sr(this._lView),r=this._lView[tr];r!==null&&!n&&SI(r,this._lView),Xa(this._lView)}};function Fh(e,t,n,r,i){let o=e.data[t];if(o===null)o=UN(e,t,n,r,i),Xy()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=Ky();o.injectorIndex=s===null?-1:s.injectorIndex}return ci(o,!0),o}function UN(e,t,n,r,i){let o=df(),s=ff(),a=s?o:o&&o.parent,c=e.data[t]=BN(e,a,n,t,r,i);return VN(e,c,o,s),c}function VN(e,t,n,r){e.firstChild===null&&(e.firstChild=t),n!==null&&(r?n.child==null&&t.parent!==null&&(n.child=t):n.next===null&&(n.next=t,t.prev=n))}function BN(e,t,n,r,i,o){let s=t?t.injectorIndex:-1,a=0;return uf()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var HN=new RegExp(`^(\\d+)*(${IE}|${EE})*(.*)`);function $N(e){let t=e.match(HN),[n,r,i,o]=t,s=r?parseInt(r,10):i,a=[];for(let[c,l,u]of o.matchAll(/(f|n)(\d*)/g)){let d=parseInt(u,10)||1;a.push(l,d)}return[s,...a]}function WN(e){return!e.prev&&e.parent?.type===8}function Nf(e){return e.index-ee}function zN(e,t){let n=e.i18nNodes;if(n)return n.get(t)}function el(e,t,n,r){let i=Nf(r),o=zN(e,i);if(o===void 0){let s=e.data[DE];if(s?.[i])o=qN(s[i],n);else if(t.firstChild===r)o=e.firstChild;else{let a=r.prev===null,c=r.prev??r.parent;if(WN(r)){let l=Nf(r.parent);o=$f(e,l)}else{let l=nt(c,n);if(a)o=l.firstChild;else{let u=Nf(c),d=$f(e,u);if(c.type===2&&d){let h=_h(e,u)+1;o=tl(h,d)}else o=l.nextSibling}}}}return o}function tl(e,t){let n=t;for(let r=0;r<e;r++)n=n.nextSibling;return n}function GN(e,t){let n=e;for(let r=0;r<t.length;r+=2){let i=t[r],o=t[r+1];for(let s=0;s<o;s++)switch(i){case fA:n=n.firstChild;break;case hA:n=n.nextSibling;break}}return n}function qN(e,t){let[n,...r]=$N(e),i;if(n===EE)i=t[Ne][Ae];else if(n===IE)i=JE(t[Ne][Ae]);else{let o=Number(n);i=Ke(t[o+ee])}return GN(i,r)}var KN=!1;function RI(e){KN=e}function YN(e){let t=e[Fe];if(t){let{i18nNodes:n,dehydratedIcuData:r}=t;if(n&&r){let i=e[J];for(let o of r.values())ZN(i,n,o)}t.i18nNodes=void 0,t.dehydratedIcuData=void 0}}function ZN(e,t,n){for(let r of n.node.cases[n.case]){let i=t.get(r.index-ee);i&&Th(e,i,!1)}}function nl(e){let t=e[mt]??[],r=e[le][J],i=[];for(let o of t)o.data[bE]!==void 0?i.push(o):AI(o,r);e[mt]=i}function QN(e){let{lContainer:t}=e,n=t[mt];if(n===null)return;let i=t[le][J];for(let o of n)AI(o,i)}function AI(e,t){let n=0,r=e.firstChild;if(r){let i=e.data[Oo];for(;n<i;){let o=r.nextSibling;Th(t,r,!1),r=o,n++}}}function rl(e){nl(e);let t=e[Ae];Ge(t)&&Ic(t);for(let n=Ee;n<e.length;n++)Ic(e[n])}function Ic(e){YN(e);let t=e[T];for(let n=ee;n<t.bindingStartIndex;n++)if(qe(e[n])){let r=e[n];rl(r)}else Ge(e[n])&&Ic(e[n])}function jh(e){let t=e._views;for(let n of t){let r=WE(n);r!==null&&r[Ae]!==null&&(Ge(r)?Ic(r):rl(r))}}function JN(e,t,n,r){e!==null&&(n.cleanup(t),rl(e.lContainer),jh(r))}function XN(e,t){let n=[];for(let r of t)for(let i=0;i<(r[fh]??1);i++){let o={data:r,firstChild:null};r[Oo]>0&&(o.firstChild=e,e=tl(r[Oo],e)),n.push(o)}return[e,n]}var NI=()=>null,MI=()=>null;function OI(){NI=e0,MI=t0}function e0(e,t){return PI(e,t)?e[mt].shift():(nl(e),null)}function wc(e,t){return NI(e,t)}function t0(e,t,n){if(t.tView.ssrId===null)return null;let r=wc(e,t.tView.ssrId);return n[T].firstUpdatePass&&r===null&&n0(n,t),r}function kI(e,t,n){return MI(e,t,n)}function n0(e,t){let n=t;for(;n;){if(C_(e,n))return;if((n.flags&256)===256)break;n=n.prev}for(n=t.next;n&&(n.flags&512)===512;){if(C_(e,n))return;n=n.next}}function PI(e,t){let n=e[mt];return!t||n===null||n.length===0?!1:n[0].data[TE]===t}function C_(e,t){let n=t.tView?.ssrId;if(n==null)return!1;let r=e[t.index];return qe(r)&&PI(r,n)?(nl(r),!0):!1}var xI=class{},il=class{},Kf=class{resolveComponentFactory(t){throw new w(917,!1)}},Ho=class{static NULL=new Kf},fr=class{},Uh=(()=>{class e{destroyNode=null;static __NG_ELEMENT_ID__=()=>r0()}return e})();function r0(){let e=G(),t=it(),n=rt(t.index,e);return(Ge(n)?n:e)[J]}var LI=(()=>{class e{static \u0275prov=C({token:e,providedIn:"root",factory:()=>null})}return e})();var hc={},fi=class{injector;parentInjector;constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){let i=this.injector.get(t,hc,r);return i!==hc||n===hc?i:this.parentInjector.get(t,n,r)}};function T_(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)i=jd(i,a);else if(o==2){let c=a,l=t[++s];r=jd(r,c+": "+l+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}function Rn(e,t=0){let n=G();if(n===null)return R(e,t);let r=it();return cE(r,n,Le(e),t)}function i0(e,t,n,r,i){let o=r===null?null:{"":-1},s=i(e,n);if(s!==null){let a=s,c=null,l=null;for(let u of s)if(u.resolveHostDirectives!==null){[a,c,l]=u.resolveHostDirectives(s);break}a0(e,t,n,a,o,c,l)}o!==null&&r!==null&&o0(n,r,o)}function o0(e,t,n){let r=e.localNames=[];for(let i=0;i<t.length;i+=2){let o=n[t[i+1]];if(o==null)throw new w(-301,!1);r.push(t[i],o)}}function s0(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function a0(e,t,n,r,i,o,s){let a=r.length,c=!1;for(let f=0;f<a;f++){let h=r[f];!c&&or(h)&&(c=!0,s0(e,n,f)),XR(iE(n,t),e,h.type)}h0(n,e.data.length,a);for(let f=0;f<a;f++){let h=r[f];h.providersResolver&&h.providersResolver(h)}let l=!1,u=!1,d=aI(e,t,a,null);a>0&&(n.directiveToIndex=new Map);for(let f=0;f<a;f++){let h=r[f];if(n.mergedAttrs=ah(n.mergedAttrs,h.hostAttrs),l0(e,n,t,d,h),f0(d,h,i),s!==null&&s.has(h)){let[v,E]=s.get(h);n.directiveToIndex.set(h.type,[d,v+n.directiveStart,E+n.directiveStart])}else(o===null||!o.has(h))&&n.directiveToIndex.set(h.type,d);h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let p=h.type.prototype;!l&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),l=!0),!u&&(p.ngOnChanges||p.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),u=!0),d++}c0(e,n,o)}function c0(e,t,n){for(let r=t.directiveStart;r<t.directiveEnd;r++){let i=e.data[r];if(n===null||!n.has(i))D_(0,t,i,r),D_(1,t,i,r),S_(t,r,!1);else{let o=n.get(i);b_(0,t,o,r),b_(1,t,o,r),S_(t,r,!0)}}}function D_(e,t,n,r){let i=e===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;e===0?s=t.inputs??={}:s=t.outputs??={},s[o]??=[],s[o].push(r),FI(t,o)}}function b_(e,t,n,r){let i=e===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;e===0?a=t.hostDirectiveInputs??={}:a=t.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),FI(t,s)}}function FI(e,t){t==="class"?e.flags|=8:t==="style"&&(e.flags|=16)}function S_(e,t,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=e;if(r===null||!n&&i===null||n&&o===null||wh(e)){e.initialInputs??=[],e.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!n&&i.hasOwnProperty(c)){let l=i[c];for(let u of l)if(u===t){s??=[],s.push(c,r[a+1]);break}}else if(n&&o.hasOwnProperty(c)){let l=o[c];for(let u=0;u<l.length;u+=2)if(l[u]===t){s??=[],s.push(l[u+1],r[a+1]);break}}a+=2}e.initialInputs??=[],e.initialInputs.push(s)}function l0(e,t,n,r,i){e.data[r]=i;let o=i.factory||(i.factory=Kn(i.type,!0)),s=new Mo(o,or(i),Rn,null);e.blueprint[r]=s,n[r]=s,u0(e,t,r,aI(e,n,i.hostVars,at),i)}function u0(e,t,n,r,i){let o=i.hostBindings;if(o){let s=e.hostBindingOpCodes;s===null&&(s=e.hostBindingOpCodes=[]);let a=~t.index;d0(s)!=a&&s.push(a),s.push(n,r,o)}}function d0(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function f0(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;or(t)&&(n[""]=e)}}function h0(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function jI(e,t,n,r,i,o,s,a){let c=t[T],l=c.consts,u=Tn(l,s),d=Fh(c,e,n,r,u);return o&&i0(c,t,d,Tn(l,a),i),d.mergedAttrs=ah(d.mergedAttrs,d.attrs),d.attrs!==null&&T_(d,d.attrs,!1),d.mergedAttrs!==null&&T_(d,d.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,d),d}function UI(e,t){HR(e,t),of(t)&&e.queries.elementEnd(t)}function p0(e,t,n){return e[t]=n}function Sn(e,t,n){if(n===at)return!1;let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function VI(e,t,n,r){let i=Sn(e,t,n);return Sn(e,t+1,r)||i}function Mf(e,t,n){return function r(i){let o=en(e)?rt(e.index,t):t;Xc(o,5);let s=t[oe],a=R_(t,s,n,i),c=r.__ngNextListenerFn__;for(;c;)a=R_(t,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function R_(e,t,n,r){let i=k(null);try{return H(6,t,n),n(r)!==!1}catch(o){return Oh(e,o),!1}finally{H(7,t,n),k(i)}}function g0(e,t,n,r,i,o,s,a){let c=Qa(e),l=!1,u=null;if(!r&&c&&(u=m0(t,n,o,e.index)),u!==null){let d=u.__ngLastListenerFn__||u;d.__ngNextListenerFn__=s,u.__ngLastListenerFn__=s,l=!0}else{let d=nt(e,n),f=r?r(d):d;pA(n,f,o,a);let h=i.listen(f,o,a),p=r?v=>r(Ke(v[e.index])):e.index;BI(p,t,n,o,a,h,!1)}return l}function m0(e,t,n,r){let i=e.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=t[oi],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function BI(e,t,n,r,i,o,s){let a=t.firstCreatePass?Vy(t):null,c=Uy(n),l=c.length;c.push(i,o),a&&a.push(r,e,l,(l+1)*(s?-1:1))}function A_(e,t,n,r,i,o){let s=t[n],a=t[T],l=a.data[n].outputs[r],d=s[l].subscribe(o);BI(e.index,a,t,i,o,d,!0)}var Yf=Symbol("BINDING");var Cc=class extends Ho{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=Xt(t);return new mi(n,this.ngModule)}};function v0(e){return Object.keys(e).map(t=>{let[n,r,i]=e[t],o={propName:n,templateName:t,isSignal:(r&Yc.SignalBased)!==0};return i&&(o.transform=i),o})}function y0(e){return Object.keys(e).map(t=>({propName:e[t],templateName:t}))}function _0(e,t,n){let r=t instanceof ce?t:t?.injector;return r&&e.getStandaloneInjector!==null&&(r=e.getStandaloneInjector(r)||r),r?new fi(n,r):n}function E0(e){let t=e.get(fr,null);if(t===null)throw new w(407,!1);let n=e.get(LI,null),r=e.get(Jt,null);return{rendererFactory:t,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function I0(e,t){let n=(e.selectors[0][0]||"div").toLowerCase();return Ch(t,n,n==="svg"?Py:n==="math"?xy:null)}var mi=class extends il{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=v0(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=y0(this.componentDef.outputs),this.cachedOutputs}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=jA(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!n}create(t,n,r,i,o,s){H(22);let a=k(null);try{let c=this.componentDef,l=w0(r,c,s,o),u=_0(c,i||this.ngModule,t),d=E0(u),f=d.rendererFactory.createRenderer(null,c),h=r?sN(f,r,c.encapsulation,u):I0(c,f),p=s?.some(N_)||o?.some(b=>typeof b!="function"&&b.bindings.some(N_)),v=bh(null,l,null,512|sI(c),null,null,d,f,u,null,$E(h,u,!0));v[ee]=h,rc(v);let E=null;try{let b=jI(ee,v,2,"#host",()=>l.directiveRegistry,!0,0);h&&(oI(f,h,b),pi(h,v)),fI(l,v,b),ZE(l,b,v),UI(l,b),n!==void 0&&T0(b,this.ngContentSelectors,n),E=rt(b.index,v),v[oe]=E[oe],Ph(l,v,null)}catch(b){throw E!==null&&Vf(E),Vf(v),b}finally{H(23),ic()}return new Tc(this.componentType,v,!!p)}finally{k(a)}}};function w0(e,t,n,r){let i=e?["ng-version","20.1.7"]:UA(t.selectors[0]),o=null,s=null,a=0;if(n)for(let u of n)a+=u[Yf].requiredVars,u.create&&(u.targetIdx=0,(o??=[]).push(u)),u.update&&(u.targetIdx=0,(s??=[]).push(u));if(r)for(let u=0;u<r.length;u++){let d=r[u];if(typeof d!="function")for(let f of d.bindings){a+=f[Yf].requiredVars;let h=u+1;f.create&&(f.targetIdx=h,(o??=[]).push(f)),f.update&&(f.targetIdx=h,(s??=[]).push(f))}}let c=[t];if(r)for(let u of r){let d=typeof u=="function"?u:u.type,f=Ka(d);c.push(f)}return Dh(0,null,C0(o,s),1,a,c,null,null,null,[i],null)}function C0(e,t){return!e&&!t?null:n=>{if(n&1&&e)for(let r of e)r.create();if(n&2&&t)for(let r of t)r.update()}}function N_(e){let t=e[Yf].kind;return t==="input"||t==="twoWay"}var Tc=class extends xI{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=ar(n[T],ee),this.location=lh(this._tNode,n),this.instance=rt(this._tNode.index,n)[oe],this.hostView=this.changeDetectorRef=new dr(n,void 0),this.componentType=t}setInput(t,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let i=this._rootLView,o=kh(r,i[T],i,t,n);this.previousInputValues.set(t,n);let s=rt(r.index,i);Xc(s,1)}get injector(){return new ur(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function T0(e,t,n){let r=e.projection=[];for(let i=0;i<t.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var $o=(()=>{class e{static __NG_ELEMENT_ID__=D0}return e})();function D0(){let e=it();return S0(e,G())}var b0=$o,HI=class extends b0{_lContainer;_hostTNode;_hostLView;constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return lh(this._hostTNode,this._hostLView)}get injector(){return new ur(this._hostTNode,this._hostLView)}get parentInjector(){let t=ch(this._hostTNode,this._hostLView);if(tE(t)){let n=vc(t,this._hostLView),r=mc(t),i=n[T].data[r+8];return new ur(i,n)}else return new ur(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=M_(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-Ee}createEmbeddedView(t,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=wc(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,gi(this._hostTNode,s)),a}createComponent(t,n,r,i,o,s,a){let c=t&&!FR(t),l;if(c)l=n;else{let E=n||{};l=E.index,r=E.injector,i=E.projectableNodes,o=E.environmentInjector||E.ngModuleRef,s=E.directives,a=E.bindings}let u=c?t:new mi(Xt(t)),d=r||this.parentInjector;if(!o&&u.ngModule==null){let b=(c?d:this.parentInjector).get(ce,null);b&&(o=b)}let f=Xt(u.componentType??{}),h=wc(this._lContainer,f?.id??null),p=h?.firstChild??null,v=u.create(d,i,p,o,s,a);return this.insertImpl(v.hostView,l,gi(this._hostTNode,h)),v}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let i=t._lView;if(Ly(i)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let c=i[le],l=new HI(c,c[tt],c[le]);l.detach(l.indexOf(t))}}let o=this._adjustIndex(n),s=this._lContainer;return Bo(s,i,o,r),t.attachToViewContainerRef(),Zd(Of(s),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=M_(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=Po(this._lContainer,n);r&&(yo(Of(this._lContainer),n),Zc(r[T],r))}detach(t){let n=this._adjustIndex(t,-1),r=Po(this._lContainer,n);return r&&yo(Of(this._lContainer),n)!=null?new dr(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function M_(e){return e[Co]}function Of(e){return e[Co]||(e[Co]=[])}function S0(e,t){let n,r=t[e.index];return qe(r)?n=r:(n=DI(r,t,null,e),t[e.index]=n,Sh(t,n)),$I(n,t,e,r),new HI(n,e,t)}function R0(e,t){let n=e[J],r=n.createComment(""),i=nt(t,e),o=n.parentNode(i);return Ec(n,o,r,n.nextSibling(i),!1),r}var $I=WI,Vh=()=>!1;function A0(e,t,n){return Vh(e,t,n)}function WI(e,t,n,r){if(e[kt])return;let i;n.type&8?i=Ke(r):i=R0(t,n),e[kt]=i}function N0(e,t,n){if(e[kt]&&e[mt])return!0;let r=n[Fe],i=t.index-ee;if(!r||pE(t)||qE(r,i))return!1;let s=$f(r,i),a=r.data[Bc]?.[i],[c,l]=XN(s,a);return e[kt]=c,e[mt]=l,!0}function M0(e,t,n,r){Vh(e,n,t)||WI(e,t,n,r)}function zI(){$I=M0,Vh=N0}var O_=new Set;function ct(e){O_.has(e)||(O_.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}var vi=class{},ol=class{};var Dc=class extends vi{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Cc(this);constructor(t,n,r,i=!0){super(),this.ngModuleType=t,this._parent=n;let o=Xd(t);this._bootstrapComponents=XE(o.bootstrap),this._r3Injector=wf(t,n,[{provide:vi,useValue:this},{provide:Ho,useValue:this.componentFactoryResolver},...r],Qt(t),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},bc=class extends ol{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new Dc(this.moduleType,t,[])}};var xo=class extends vi{injector;componentFactoryResolver=new Cc(this);instance=null;constructor(t){super();let n=new Yn([...t.providers,{provide:vi,useValue:this},{provide:Ho,useValue:this.componentFactoryResolver}],t.parent||Eo(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function _i(e,t,n=null){return new xo({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var O0=(()=>{class e{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Ya(!1,n.type),i=r.length>0?_i([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=C({token:e,providedIn:"environment",factory:()=>new e(R(ce))})}return e})();function gr(e){return Fo(()=>{let t=GI(e),n=K(_({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===uh.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:t.standalone?i=>i.get(O0).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||on.Emulated,styles:e.styles||In,_:null,schemas:e.schemas||null,tView:null,id:""});t.standalone&&ct("NgStandalone"),qI(n);let r=e.dependencies;return n.directiveDefs=k_(r,k0),n.pipeDefs=k_(r,ef),n.id=L0(n),n})}function k0(e){return Xt(e)||Ka(e)}function P0(e,t){if(e==null)return Xn;let n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=Yc.None,c=null),n[o]=[r,a,c],t[o]=s}return n}function x0(e){if(e==null)return Xn;let t={};for(let n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function Wo(e){return Fo(()=>{let t=GI(e);return qI(t),t})}function GI(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputConfig:e.inputs||Xn,exportAs:e.exportAs||null,standalone:e.standalone??!0,signals:e.signals===!0,selectors:e.selectors||In,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:P0(e.inputs,t),outputs:x0(e.outputs),debugInfo:null}}function qI(e){e.features?.forEach(t=>t(e))}function k_(e,t){return e?()=>{let n=typeof e=="function"?e():e,r=[];for(let i of n){let o=t(i);o!==null&&r.push(o)}return r}:null}function L0(e){let t=0,n=typeof e.consts=="function"?"":e.consts,r=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,n,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery];for(let o of r.join("|"))t=Math.imul(31,t)+o.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function F0(e,t,n,r,i,o,s,a){if(n.firstCreatePass){e.mergedAttrs=ah(e.mergedAttrs,e.attrs);let u=e.tView=Dh(2,e,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,e),u.queries=n.queries.embeddedTView(e))}a&&(e.flags|=a),ci(e,!1);let c=KI(n,t,e,r);oc()&&Nh(n,t,c,e),pi(c,t);let l=DI(c,t,c,e);t[r+ee]=l,Sh(t,l),A0(l,e,t)}function Sc(e,t,n,r,i,o,s,a,c,l,u){let d=n+ee,f;if(t.firstCreatePass){if(f=Fh(t,d,4,s||null,a||null),l!=null){let h=Tn(t.consts,l);f.localNames=[];for(let p=0;p<h.length;p+=2)f.localNames.push(h[p],-1)}}else f=t.data[d];return F0(f,e,t,n,r,i,o,c),l!=null&&hI(e,f,u),f}var KI=YI;function YI(e,t,n,r){return nn(!0),t[J].createComment("")}function j0(e,t,n,r){let i=!zc(t,n);nn(i);let o=t[Fe]?.data[CE]?.[r]??null;if(o!==null&&n.tView!==null&&n.tView.ssrId===null&&(n.tView.ssrId=o),i)return YI(e,t);let s=t[Fe],a=el(s,e,t,n);Wc(s,r,a);let c=_h(s,r);return tl(c,a)}function ZI(){KI=j0}var Ye=function(e){return e[e.NOT_STARTED=0]="NOT_STARTED",e[e.IN_PROGRESS=1]="IN_PROGRESS",e[e.COMPLETE=2]="COMPLETE",e[e.FAILED=3]="FAILED",e}(Ye||{}),P_=0,U0=1,de=function(e){return e[e.Placeholder=0]="Placeholder",e[e.Loading=1]="Loading",e[e.Complete=2]="Complete",e[e.Error=3]="Error",e}(de||{});var V0=0,zo=1;var B0=4,H0=5;var $0=7,hi=8,W0=9,Bh=function(e){return e[e.Manual=0]="Manual",e[e.Playthrough=1]="Playthrough",e}(Bh||{});function pc(e,t){let n=G0(e),r=t[n];if(r!==null){for(let i of r)i();t[n]=null}}function z0(e){pc(1,e),pc(0,e),pc(2,e)}function G0(e){let t=B0;return e===1?t=H0:e===2&&(t=W0),t}var sl=function(e){return e[e.CHANGE_DETECTION=0]="CHANGE_DETECTION",e[e.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",e}(sl||{}),mr=new I(""),QI=!1,Zf=class extends we{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,Oy()&&(this.destroyRef=g(rn,{optional:!0})??void 0,this.pendingTasks=g(yt,{optional:!0})??void 0)}emit(t){let n=k(null);try{super.next(t)}finally{k(n)}}subscribe(t,n,r){let i=t,o=n||(()=>null),s=r;if(t&&typeof t=="object"){let c=t;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return t instanceof re&&t.add(a),a}wrapInTimeout(t){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{t(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Me=Zf;function JI(e){let t,n;function r(){e=Ro;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),r()})),()=>r()}function x_(e){return queueMicrotask(()=>e()),()=>{e=Ro}}var Hh="isAngularZone",Rc=Hh+"_ID",q0=0,Y=class e{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Me(!1);onMicrotaskEmpty=new Me(!1);onStable=new Me(!1);onError=new Me(!1);constructor(t){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=QI}=t;if(typeof Zone>"u")throw new w(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,Z0(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Hh)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new w(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new w(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,K0,Ro,Ro);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},K0={};function $h(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Y0(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){JI(()=>{e.callbackScheduled=!1,Qf(e),e.isCheckStableRunning=!0,$h(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),Qf(e)}function Z0(e){let t=()=>{Y0(e)},n=q0++;e._inner=e._inner.fork({name:"angular",properties:{[Hh]:!0,[Rc]:n,[Rc+n]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(Q0(c))return r.invokeTask(o,s,a,c);try{return L_(e),r.invokeTask(o,s,a,c)}finally{(e.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),F_(e)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return L_(e),r.invoke(o,s,a,c,l)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!J0(c)&&t(),F_(e)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(e._hasPendingMicrotasks=s.microTask,Qf(e),$h(e)):s.change=="macroTask"&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}function Qf(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function L_(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function F_(e){e._nesting--,$h(e)}var Ac=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Me;onMicrotaskEmpty=new Me;onStable=new Me;onError=new Me;run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}};function Q0(e){return XI(e,"__ignore_ng_zone__")}function J0(e){return XI(e,"__scheduler_tick__")}function XI(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var Wh=(()=>{class e{impl=null;execute(){this.impl?.execute()}static \u0275prov=C({token:e,providedIn:"root",factory:()=>new e})}return e})(),ew=[0,1,2,3],tw=(()=>{class e{ngZone=g(Y);scheduler=g(Jt);errorHandler=g(ht,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){g(mr,{optional:!0})}execute(){let n=this.sequences.size>0;n&&H(16),this.executing=!0;for(let r of ew)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&H(17)}register(n){let{view:r}=n;r!==void 0?((r[ir]??=[]).push(n),ai(r),r[A]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(sl.AFTER_NEXT_RENDER,n):n()}static \u0275prov=C({token:e,providedIn:"root",factory:()=>new e})}return e})(),Nc=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(t,n,r,i,o,s=null){this.impl=t,this.hooks=n,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let t=this.view?.[ir];t&&(this.view[ir]=t.filter(n=>n!==this))}};function zh(e,t){let n=t?.injector??g(pe);return ct("NgAfterNextRender"),eM(e,n,t,!0)}function X0(e){return e instanceof Function?[void 0,void 0,e,void 0]:[e.earlyRead,e.write,e.mixedReadWrite,e.read]}function eM(e,t,n,r){let i=t.get(Wh);i.impl??=t.get(tw);let o=t.get(mr,null,{optional:!0}),s=n?.manualCleanup!==!0?t.get(rn):null,a=t.get(sc,null,{optional:!0}),c=new Nc(i.impl,X0(e),a?.view,r,s,o?.snapshot(null));return i.impl.register(c),c}function nw(e){return e+1}function Ei(e,t){let n=e[T],r=nw(t.index);return e[r]}function Go(e,t){let n=nw(t.index);return e.data[n]}function tM(e,t,n){let r=t[T],i=Go(r,n);switch(e){case de.Complete:return i.primaryTmplIndex;case de.Loading:return i.loadingTmplIndex;case de.Error:return i.errorTmplIndex;case de.Placeholder:return i.placeholderTmplIndex;default:return null}}function j_(e,t){return t===de.Placeholder?e.placeholderBlockConfig?.[P_]??null:t===de.Loading?e.loadingBlockConfig?.[P_]??null:null}function nM(e){return e.loadingBlockConfig?.[U0]??null}function U_(e,t){if(!e||e.length===0)return t;let n=new Set(e);for(let r of t)n.add(r);return e.length===n.size?e:Array.from(n)}function rM(e,t){let n=t.primaryTmplIndex+ee;return ar(e,n)}var iM=(()=>{class e{cachedInjectors=new Map;getOrCreateInjector(n,r,i,o){if(!this.cachedInjectors.has(n)){let s=i.length>0?_i(i,r,o):null;this.cachedInjectors.set(n,s)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=C({token:e,providedIn:"environment",factory:()=>new e})}return e})();var rw=new I("");function kf(e,t,n){return e.get(iM).getOrCreateInjector(t,e,n,"")}function oM(e,t,n){if(e instanceof fi){let i=e.injector,o=e.parentInjector,s=kf(o,t,n);return new fi(i,s)}let r=e.get(ce);if(r!==e){let i=kf(r,t,n);return new fi(e,i)}return kf(e,t,n)}function lr(e,t,n,r=!1){let i=n[le],o=i[T];if(Cn(i))return;let s=Ei(i,t),a=s[zo],c=s[$0];if(!(c!==null&&e<c)&&V_(a,e)&&V_(s[V0]??-1,e)){let l=Go(o,t),d=!r&&!0&&(nM(l)!==null||j_(l,de.Loading)!==null||j_(l,de.Placeholder))?cM:aM;try{d(e,s,n,t,i)}catch(f){Oh(i,f)}}}function sM(e,t){let n=e[mt]?.findIndex(i=>i.data[SE]===t[zo])??-1;return{dehydratedView:n>-1?e[mt][n]:null,dehydratedViewIx:n}}function aM(e,t,n,r,i){H(20);let o=tM(e,i,r);if(o!==null){t[zo]=e;let s=i[T],a=o+ee,c=ar(s,a),l=0;Lh(n,l);let u;if(e===de.Complete){let p=Go(s,r),v=p.providers;v&&v.length>0&&(u=oM(i[gt],p,v))}let{dehydratedView:d,dehydratedViewIx:f}=sM(n,t),h=Jc(i,c,null,{injector:u,dehydratedView:d});if(Bo(n,h,l,gi(c,d)),Xc(h,2),f>-1&&n[mt]?.splice(f,1),(e===de.Complete||e===de.Error)&&Array.isArray(t[hi])){for(let p of t[hi])p();t[hi]=null}}H(21)}function V_(e,t){return e<t}function B_(e,t,n){e.loadingPromise.then(()=>{e.loadingState===Ye.COMPLETE?lr(de.Complete,t,n):e.loadingState===Ye.FAILED&&lr(de.Error,t,n)})}var cM=null;var al=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();var Gh=new I("");function qo(e){return!!e&&typeof e.then=="function"}function iw(e){return!!e&&typeof e.subscribe=="function"}var ow=new I("");var qh=(()=>{class e{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=g(ow,{optional:!0})??[];injector=g(pe);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=ue(this.injector,i);if(qo(o))n.push(o);else if(iw(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),An=new I("");function sw(){ad(()=>{let e="";throw new w(600,e)})}function aw(e){return e.isBoundToModule}var lM=10;var je=(()=>{class e{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=g(ot);afterRenderManager=g(Wh);zonelessEnabled=g(So);rootEffectScheduler=g(Df);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new we;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=g(yt);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(B(n=>!n))}constructor(){g(mr,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=g(ce);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=pe.NULL){return this._injector.get(Y).run(()=>{H(10);let s=n instanceof il;if(!this._injector.get(qh).done){let p="";throw new w(405,p)}let c;s?c=n:c=this._injector.get(Ho).resolveComponentFactory(n),this.componentTypes.push(c.componentType);let l=aw(c)?void 0:this._injector.get(vi),u=r||c.selector,d=c.create(i,[],u,l),f=d.location.nativeElement,h=d.injector.get(Gh,null);return h?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),No(this.components,d),h?.unregisterApplication(f)}),this._loadComponent(d),H(11,d),d})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){H(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(sl.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new w(101,!1);let n=k(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,k(n),this.afterTick.next(),H(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(fr,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<lM;)H(14),this.synchronizeOnce(),H(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Do(i))continue;let o=r&&!this.zonelessEnabled?0:1;xh(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Do(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;No(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(An,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>No(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new w(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function No(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function cw(e,t,n){let r=t[gt],i=t[T];if(e.loadingState!==Ye.NOT_STARTED)return e.loadingPromise??Promise.resolve();let o=Ei(t,n),s=rM(i,e);e.loadingState=Ye.IN_PROGRESS,pc(1,o);let a=e.dependencyResolverFn,c=r.get(bn).add();return a?(e.loadingPromise=Promise.allSettled(a()).then(l=>{let u=!1,d=[],f=[];for(let h of l)if(h.status==="fulfilled"){let p=h.value,v=Xt(p)||Ka(p);if(v)d.push(v);else{let E=ef(p);E&&f.push(E)}}else{u=!0;break}if(u){if(e.loadingState=Ye.FAILED,e.errorTmplIndex===null){let h="",p=new w(-750,!1);Oh(t,p)}}else{e.loadingState=Ye.COMPLETE;let h=s.tView;if(d.length>0){h.directiveRegistry=U_(h.directiveRegistry,d);let p=d.map(E=>E.type),v=Ya(!1,...p);e.providers=v}f.length>0&&(h.pipeRegistry=U_(h.pipeRegistry,f))}}),e.loadingPromise.finally(()=>{e.loadingPromise=null,c()})):(e.loadingPromise=Promise.resolve().then(()=>{e.loadingPromise=null,e.loadingState=Ye.COMPLETE,c()}),e.loadingPromise)}function uM(e,t){return t[gt].get(rw,null,{optional:!0})?.behavior!==Bh.Manual}function dM(e,t,n){let r=t[T],i=t[n.index];if(!uM(e,t))return;let o=Ei(t,n),s=Go(r,n);switch(z0(o),s.loadingState){case Ye.NOT_STARTED:lr(de.Loading,n,i),cw(s,t,n),s.loadingState===Ye.IN_PROGRESS&&B_(s,n,i);break;case Ye.IN_PROGRESS:lr(de.Loading,n,i),B_(s,n,i);break;case Ye.COMPLETE:lr(de.Complete,n,i);break;case Ye.FAILED:lr(de.Error,n,i);break;default:}}function lw(e,t,n){return m(this,null,function*(){let r=e.get(Hc);if(r.hydrating.has(t))return;let{parentBlockPromise:o,hydrationQueue:s}=wA(t,e);if(s.length===0)return;o!==null&&s.shift(),pM(r,s),o!==null&&(yield o);let a=s[0];r.has(a)?yield H_(e,s,n):r.awaitParentBlock(a,()=>m(null,null,function*(){return yield H_(e,s,n)}))})}function H_(e,t,n){return m(this,null,function*(){let r=e.get(Hc),i=r.hydrating,o=e.get(yt),s=o.add();for(let c=0;c<t.length;c++){let l=t[c],u=r.get(l);if(u!=null){if(yield mM(u),yield gM(e),fM(u)){QN(u),$_(t.slice(c),r);break}i.get(l).resolve()}else{hM(c,t,r),$_(t.slice(c),r);break}}let a=t[t.length-1];yield i.get(a)?.promise,o.remove(s),n&&n(t),JN(r.get(a),t,r,e.get(je))})}function fM(e){return Ei(e.lView,e.tNode)[zo]===de.Error}function hM(e,t,n){let r=e-1,i=r>-1?n.get(t[r]):null;i&&rl(i.lContainer)}function $_(e,t){let n=t.hydrating;for(let r in e)n.get(r)?.reject();t.cleanup(e)}function pM(e,t){for(let n of t)e.hydrating.set(n,Promise.withResolvers())}function gM(e){return new Promise(t=>zh(t,{injector:e}))}function mM(e){return m(this,null,function*(){let{tNode:t,lView:n}=e,r=Ei(n,t);return new Promise(i=>{vM(r,i),dM(2,n,t)})})}function vM(e,t){Array.isArray(e[hi])||(e[hi]=[]),e[hi].push(t)}function cl(e,t,n,r){let i=G(),o=li();if(Sn(i,o,t)){let s=vt(),a=Ef();vN(a,i,e,t,n,r)}return cl}var Jf=class{destroy(t){}updateValue(t,n){}swap(t,n){let r=Math.min(t,n),i=Math.max(t,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(t,n){this.attach(n,this.detach(t))}};function Pf(e,t,n,r,i){return e===n&&Object.is(t,r)?1:Object.is(i(e,t),i(n,r))?-1:0}function yM(e,t,n){let r,i,o=0,s=e.length-1,a=void 0;if(Array.isArray(t)){let c=t.length-1;for(;o<=s&&o<=c;){let l=e.at(o),u=t[o],d=Pf(o,l,o,u,n);if(d!==0){d<0&&e.updateValue(o,u),o++;continue}let f=e.at(s),h=t[c],p=Pf(s,f,c,h,n);if(p!==0){p<0&&e.updateValue(s,h),s--,c--;continue}let v=n(o,l),E=n(s,f),b=n(o,u);if(Object.is(b,E)){let ne=n(c,h);Object.is(ne,v)?(e.swap(o,s),e.updateValue(s,h),c--,s--):e.move(s,o),e.updateValue(o,u),o++;continue}if(r??=new Mc,i??=z_(e,o,s,n),Xf(e,r,o,b))e.updateValue(o,u),o++,s++;else if(i.has(b))r.set(v,e.detach(o)),s--;else{let ne=e.create(o,t[o]);e.attach(o,ne),o++,s++}}for(;o<=c;)W_(e,r,n,o,t[o]),o++}else if(t!=null){let c=t[Symbol.iterator](),l=c.next();for(;!l.done&&o<=s;){let u=e.at(o),d=l.value,f=Pf(o,u,o,d,n);if(f!==0)f<0&&e.updateValue(o,d),o++,l=c.next();else{r??=new Mc,i??=z_(e,o,s,n);let h=n(o,d);if(Xf(e,r,o,h))e.updateValue(o,d),o++,s++,l=c.next();else if(!i.has(h))e.attach(o,e.create(o,d)),o++,s++,l=c.next();else{let p=n(o,u);r.set(p,e.detach(o)),s--}}}for(;!l.done;)W_(e,r,n,e.length,l.value),l=c.next()}for(;o<=s;)e.destroy(e.detach(s--));r?.forEach(c=>{e.destroy(c)})}function Xf(e,t,n,r){return t!==void 0&&t.has(r)?(e.attach(n,t.get(r)),t.delete(r),!0):!1}function W_(e,t,n,r,i){if(Xf(e,t,r,n(r,i)))e.updateValue(r,i);else{let o=e.create(r,i);e.attach(r,o)}}function z_(e,t,n,r){let i=new Set;for(let o=t;o<=n;o++)i.add(r(o,e.at(o)));return i}var Mc=class{kvMap=new Map;_vMap=void 0;has(t){return this.kvMap.has(t)}delete(t){if(!this.has(t))return!1;let n=this.kvMap.get(t);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(t,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(t),!0}get(t){return this.kvMap.get(t)}set(t,n){if(this.kvMap.has(t)){let r=this.kvMap.get(t);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(t,n)}forEach(t){for(let[n,r]of this.kvMap)if(t(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),t(r,n)}}};function ll(e,t,n,r,i,o,s,a){ct("NgControlFlow");let c=G(),l=vt(),u=Tn(l.consts,o);return Sc(c,l,e,t,n,r,i,u,256,s,a),Kh}function Kh(e,t,n,r,i,o,s,a){ct("NgControlFlow");let c=G(),l=vt(),u=Tn(l.consts,o);return Sc(c,l,e,t,n,r,i,u,512,s,a),Kh}function ul(e,t){ct("NgControlFlow");let n=G(),r=li(),i=n[r]!==at?n[r]:-1,o=i!==-1?Oc(n,ee+i):void 0,s=0;if(Sn(n,r,e)){let a=k(null);try{if(o!==void 0&&Lh(o,s),e!==-1){let c=ee+e,l=Oc(n,c),u=rh(n[T],c),d=kI(l,u,n),f=Jc(n,u,t,{dehydratedView:d});Bo(l,f,s,gi(u,d))}}finally{k(a)}}else if(o!==void 0){let a=bI(o,s);a!==void 0&&(a[oe]=t)}}var eh=class{lContainer;$implicit;$index;constructor(t,n,r){this.lContainer=t,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Ee}};function dl(e,t){return t}var th=class{hasEmptyBlock;trackByFn;liveCollection;constructor(t,n,r){this.hasEmptyBlock=t,this.trackByFn=n,this.liveCollection=r}};function fl(e,t,n,r,i,o,s,a,c,l,u,d,f){ct("NgControlFlow");let h=G(),p=vt(),v=c!==void 0,E=G(),b=a?s.bind(E[Ne][oe]):s,ne=new th(v,b);E[ee+e]=ne,Sc(h,p,e+1,t,n,r,i,Tn(p.consts,o),256),v&&Sc(h,p,e+2,c,l,u,d,Tn(p.consts,f),512)}var nh=class extends Jf{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(t,n,r){super(),this.lContainer=t,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-Ee}at(t){return this.getLView(t)[oe].$implicit}attach(t,n){let r=n[Fe];this.needsIndexUpdate||=t!==this.length,Bo(this.lContainer,n,t,gi(this.templateTNode,r))}detach(t){return this.needsIndexUpdate||=t!==this.length-1,_M(this.lContainer,t)}create(t,n){let r=wc(this.lContainer,this.templateTNode.tView.ssrId),i=Jc(this.hostLView,this.templateTNode,new eh(this.lContainer,n,t),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(t){Zc(t[T],t),this.operationsCounter?.recordDestroy()}updateValue(t,n){this.getLView(t)[oe].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let t=0;t<this.length;t++)this.getLView(t)[oe].$index=t}getLView(t){return EM(this.lContainer,t)}};function hl(e){let t=k(null),n=tn();try{let r=G(),i=r[T],o=r[n],s=n+1,a=Oc(r,s);if(o.liveCollection===void 0){let l=rh(i,s);o.liveCollection=new nh(a,r,l)}else o.liveCollection.reset();let c=o.liveCollection;if(yM(c,e,o.trackByFn),c.updateIndexes(),o.hasEmptyBlock){let l=li(),u=c.length===0;if(Sn(r,l,u)){let d=n+2,f=Oc(r,d);if(u){let h=rh(i,d),p=kI(f,h,r),v=Jc(r,h,void 0,{dehydratedView:p});Bo(f,v,0,gi(h,p))}else i.firstUpdatePass&&nl(f),Lh(f,0)}}}finally{k(t)}}function Oc(e,t){return e[t]}function _M(e,t){return Po(e,t)}function EM(e,t){return bI(e,t)}function rh(e,t){return ar(e,t)}function Nn(e,t,n){let r=G(),i=li();if(Sn(r,i,t)){let o=vt(),s=Ef();uN(s,r,e,t,r[J],n)}return Nn}function G_(e,t,n,r,i){kh(t,e,n,i?"class":"style",r)}function te(e,t,n,r){let i=G(),o=i[T],s=e+ee,a=o.firstCreatePass?jI(s,i,2,t,mN,Wy(),n,r):o.data[s];if(EN(a,i,e,t,uw),Qa(a)){let c=i[T];fI(c,i,a),ZE(c,a,i)}return r!=null&&hI(i,a),te}function fe(){let e=vt(),t=it(),n=IN(t);return e.firstCreatePass&&UI(e,n),zy(n)&&qy(),$y(),n.classesWithoutHost!=null&&WR(n)&&G_(e,n,G(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&zR(n)&&G_(e,n,G(),n.stylesWithoutHost,!1),fe}function Et(e,t,n,r){return te(e,t,n,r),fe(),Et}var uw=(e,t,n,r,i)=>(nn(!0),Ch(t[J],r,If()));function IM(e,t,n,r,i){let o=!zc(t,n);if(nn(o),o)return Ch(t[J],r,If());let s=t[Fe],a=el(s,e,t,n);return GE(s,i)&&Wc(s,i,a.nextSibling),s&&(fE(n)||hE(a))&&en(n)&&(Gy(n),iI(a)),a}function dw(){uw=IM}var wM=(e,t,n,r,i)=>(nn(!0),nI(t[J],""));function CM(e,t,n,r,i){let o,s=!zc(t,n);if(nn(s),s)return nI(t[J],"");let a=t[Fe],c=el(a,e,t,n),l=EA(a,i);return Wc(a,i,c),o=tl(l,c),o}function fw(){wM=CM}function Yh(){return G()}var Ko="en-US";var TM=Ko;function hw(e){typeof e=="string"&&(TM=e.toLowerCase().replace(/_/g,"-"))}function Ii(e,t,n){let r=G(),i=vt(),o=it();return DM(i,r,r[J],o,e,t,n),Ii}function DM(e,t,n,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=Mf(r,t,o),g0(r,e,t,s,n,i,o,c)&&(a=!1)),a){let l=r.outputs?.[i],u=r.hostDirectiveOutputs?.[i];if(u&&u.length)for(let d=0;d<u.length;d+=2){let f=u[d],h=u[d+1];c??=Mf(r,t,o),A_(r,t,f,h,i,c)}if(l&&l.length)for(let d of l)c??=Mf(r,t,o),A_(r,t,d,i,i,c)}}function wi(e=1){return s_(e)}function lc(e,t){return e<<17|t<<2}function hr(e){return e>>17&32767}function bM(e){return(e&2)==2}function SM(e,t){return e&131071|t<<17}function ih(e){return e|2}function yi(e){return(e&131068)>>2}function xf(e,t){return e&-131069|t<<2}function RM(e){return(e&1)===1}function oh(e){return e|1}function AM(e,t,n,r,i,o){let s=o?t.classBindings:t.styleBindings,a=hr(s),c=yi(s);e[r]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||ii(d,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let f=hr(e[a+1]);e[r+1]=lc(f,a),f!==0&&(e[f+1]=xf(e[f+1],r)),e[a+1]=SM(e[a+1],r)}else e[r+1]=lc(a,0),a!==0&&(e[a+1]=xf(e[a+1],r)),a=r;else e[r+1]=lc(c,0),a===0?a=r:e[c+1]=xf(e[c+1],r),c=r;l&&(e[r+1]=ih(e[r+1])),q_(e,u,r,!0),q_(e,u,r,!1),NM(t,u,e,r,o),s=lc(a,c),o?t.classBindings=s:t.styleBindings=s}function NM(e,t,n,r,i){let o=i?e.residualClasses:e.residualStyles;o!=null&&typeof t=="string"&&ii(o,t)>=0&&(n[r+1]=oh(n[r+1]))}function q_(e,t,n,r){let i=e[n+1],o=t===null,s=r?hr(i):yi(i),a=!1;for(;s!==0&&(a===!1||o);){let c=e[s],l=e[s+1];MM(c,t)&&(a=!0,e[s+1]=r?oh(l):ih(l)),s=r?hr(l):yi(l)}a&&(e[n+1]=r?ih(i):oh(i))}function MM(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?ii(e,t)>=0:!1}function pl(e,t,n){return OM(e,t,n,!1),pl}function OM(e,t,n,r){let i=G(),o=vt(),s=mf(2);if(o.firstUpdatePass&&PM(o,e,s,r),t!==at&&Sn(i,s,t)){let a=o.data[tn()];UM(o,a,i,i[J],e,i[s+1]=VM(t,n),r,s)}}function kM(e,t){return t>=e.expandoStartIndex}function PM(e,t,n,r){let i=e.data;if(i[n+1]===null){let o=i[tn()],s=kM(e,n);BM(o,r)&&t===null&&!s&&(t=!1),t=xM(i,o,t,r),AM(i,o,t,n,s,r)}}function xM(e,t,n,r){let i=n_(e),o=r?t.residualClasses:t.residualStyles;if(i===null)(r?t.classBindings:t.styleBindings)===0&&(n=Lf(null,e,t,n,r),n=Lo(n,t.attrs,r),o=null);else{let s=t.directiveStylingLast;if(s===-1||e[s]!==i)if(n=Lf(i,e,t,n,r),o===null){let c=LM(e,t,r);c!==void 0&&Array.isArray(c)&&(c=Lf(null,e,t,c[1],r),c=Lo(c,t.attrs,r),FM(e,t,r,c))}else o=jM(e,t,r)}return o!==void 0&&(r?t.residualClasses=o:t.residualStyles=o),n}function LM(e,t,n){let r=n?t.classBindings:t.styleBindings;if(yi(r)!==0)return e[hr(r)]}function FM(e,t,n,r){let i=n?t.classBindings:t.styleBindings;e[hr(i)]=r}function jM(e,t,n){let r,i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++){let s=e[o].hostAttrs;r=Lo(r,s,n)}return Lo(r,t.attrs,n)}function Lf(e,t,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=t[a],r=Lo(r,o.hostAttrs,i),o!==e);)a++;return e!==null&&(n.directiveStylingLast=a),r}function Lo(e,t,n){let r=n?1:2,i=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?i=s:i===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),Sy(e,s,n?!0:t[++o]))}return e===void 0?null:e}function UM(e,t,n,r,i,o,s,a){if(!(t.type&3))return;let c=e.data,l=c[a+1],u=RM(l)?K_(c,t,n,i,yi(l),s):void 0;if(!kc(u)){kc(o)||bM(l)&&(o=K_(c,null,n,i,a,s));let d=sf(tn(),n);oN(r,s,d,i,o)}}function K_(e,t,n,r,i,o){let s=t===null,a;for(;i>0;){let c=e[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,f=n[i+1];f===at&&(f=d?In:void 0);let h=d?qa(f,r):u===r?f:void 0;if(l&&!kc(h)&&(h=qa(c,r)),kc(h)&&(a=h,s))return a;let p=e[i+1];i=s?hr(p):yi(p)}if(t!==null){let c=o?t.residualClasses:t.residualStyles;c!=null&&(a=qa(c,r))}return a}function kc(e){return e!==void 0}function VM(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=Qt(Gc(e)))),e}function BM(e,t){return(e.flags&(t?8:16))!==0}function lt(e,t=""){let n=G(),r=vt(),i=e+ee,o=r.firstCreatePass?Fh(r,i,1,t,null):r.data[i],s=pw(r,n,o,t,e);n[i]=s,oc()&&Nh(r,n,s,o),ci(o,!1)}var pw=(e,t,n,r,i)=>(nn(!0),tI(t[J],r));function HM(e,t,n,r,i){let o=!zc(t,n);if(nn(o),o)return tI(t[J],r);let s=t[Fe];return el(s,e,t,n)}function gw(){pw=HM}function $M(e,t,n,r=""){return Sn(e,li(),n)?t+Jn(n)+r:at}function WM(e,t,n,r,i,o=""){let s=Qy(),a=VI(e,s,n,i);return mf(2),a?t+Jn(n)+r+Jn(i)+o:at}function Yo(e){return Ci("",e),Yo}function Ci(e,t,n){let r=G(),i=$M(r,e,t,n);return i!==at&&mw(r,tn(),i),Ci}function gl(e,t,n,r,i){let o=G(),s=WM(o,e,t,n,r,i);return s!==at&&mw(o,tn(),s),gl}function mw(e,t,n){let r=sf(t,e);VA(e[J],r,n)}function Zh(e,t,n,r,i){return GM(G(),Zy(),e,t,n,r,i)}function zM(e,t){let n=e[t];return n===at?void 0:n}function GM(e,t,n,r,i,o,s){let a=t+n;return VI(e,a,i,o)?p0(e,a+2,s?r.call(s,i,o):r(i,o)):zM(e,a+2)}var Pc=class{ngModuleFactory;componentFactories;constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},Qh=(()=>{class e{compileModuleSync(n){return new bc(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=Xd(n),o=XE(i.declarations).reduce((s,a)=>{let c=Xt(a);return c&&s.push(new mi(c)),s},[]);return new Pc(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var qM=(()=>{class e{zone=g(Y);changeDetectionScheduler=g(Jt);applicationRef=g(je);applicationErrorHandler=g(ot);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function vw({ngZoneFactory:e,ignoreChangesOutsideZone:t,scheduleInRootZone:n}){return e??=()=>new Y(K(_({},yw()),{scheduleInRootZone:n})),[{provide:Y,useFactory:e},{provide:pt,multi:!0,useFactory:()=>{let r=g(qM,{optional:!0});return()=>r.initialize()}},{provide:pt,multi:!0,useFactory:()=>{let r=g(KM);return()=>{r.initialize()}}},t===!0?{provide:Cf,useValue:!0}:[],{provide:Tf,useValue:n??QI},{provide:ot,useFactory:()=>{let r=g(Y),i=g(ce),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(ht),o.handleError(s))})}}}]}function yw(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var KM=(()=>{class e{subscription=new re;initialized=!1;zone=g(Y);pendingTasks=g(yt);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Y.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Y.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var _w=(()=>{class e{applicationErrorHandler=g(ot);appRef=g(je);taskService=g(yt);ngZone=g(Y);zonelessEnabled=g(So);tracing=g(mr,{optional:!0});disableScheduling=g(Cf,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new re;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Rc):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(g(Tf,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Ac||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?x_:JI;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Rc+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,x_(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function YM(){return typeof $localize<"u"&&$localize.locale||Ko}var Jh=new I("",{providedIn:"root",factory:()=>g(Jh,{optional:!0,skipSelf:!0})||YM()});var rp={JSACTION:"__jsaction",OWNER:"__owner"},Cw={};function ZM(e){return e[rp.JSACTION]}function Ew(e,t){e[rp.JSACTION]=t}function QM(e){return Cw[e]}function JM(e,t){Cw[e]=t}var D={AUXCLICK:"auxclick",CHANGE:"change",CLICK:"click",CLICKMOD:"clickmod",CLICKONLY:"clickonly",DBLCLICK:"dblclick",FOCUS:"focus",FOCUSIN:"focusin",BLUR:"blur",FOCUSOUT:"focusout",SUBMIT:"submit",KEYDOWN:"keydown",KEYPRESS:"keypress",KEYUP:"keyup",MOUSEUP:"mouseup",MOUSEDOWN:"mousedown",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",MOUSEMOVE:"mousemove",POINTERUP:"pointerup",POINTERDOWN:"pointerdown",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERMOVE:"pointermove",POINTERCANCEL:"pointercancel",GOTPOINTERCAPTURE:"gotpointercapture",LOSTPOINTERCAPTURE:"lostpointercapture",ERROR:"error",LOAD:"load",UNLOAD:"unload",TOUCHSTART:"touchstart",TOUCHEND:"touchend",TOUCHMOVE:"touchmove",INPUT:"input",SCROLL:"scroll",TOGGLE:"toggle",CUSTOM:"_custom"},XM=[D.MOUSEENTER,D.MOUSELEAVE,"pointerenter","pointerleave"],H8=[D.CLICK,D.DBLCLICK,D.FOCUSIN,D.FOCUSOUT,D.KEYDOWN,D.KEYUP,D.KEYPRESS,D.MOUSEOVER,D.MOUSEOUT,D.SUBMIT,D.TOUCHSTART,D.TOUCHEND,D.TOUCHMOVE,"touchcancel","auxclick","change","compositionstart","compositionupdate","compositionend","beforeinput","input","select","copy","cut","paste","mousedown","mouseup","wheel","contextmenu","dragover","dragenter","dragleave","drop","dragstart","dragend","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","gotpointercapture","lostpointercapture","ended","loadedmetadata","pagehide","pageshow","visibilitychange","beforematch"],eO=[D.FOCUS,D.BLUR,D.ERROR,D.LOAD,D.TOGGLE],ip=e=>eO.indexOf(e)>=0;function tO(e){return e===D.MOUSEENTER?D.MOUSEOVER:e===D.MOUSELEAVE?D.MOUSEOUT:e===D.POINTERENTER?D.POINTEROVER:e===D.POINTERLEAVE?D.POINTEROUT:e}function nO(e,t,n,r){let i=!1;ip(t)&&(i=!0);let o=typeof r=="boolean"?{capture:i,passive:r}:i;return e.addEventListener(t,n,o),{eventType:t,handler:n,capture:i,passive:r}}function rO(e,t){if(e.removeEventListener){let n=typeof t.passive=="boolean"?{capture:t.capture}:t.capture;e.removeEventListener(t.eventType,t.handler,n)}else e.detachEvent&&e.detachEvent(`on${t.eventType}`,t.handler)}function iO(e){e.preventDefault?e.preventDefault():e.returnValue=!1}var Iw=typeof navigator<"u"&&/Macintosh/.test(navigator.userAgent);function oO(e){return e.which===2||e.which==null&&e.button===4}function sO(e){return Iw&&e.metaKey||!Iw&&e.ctrlKey||oO(e)||e.shiftKey}function aO(e,t,n){let r=e.relatedTarget;return(e.type===D.MOUSEOVER&&t===D.MOUSEENTER||e.type===D.MOUSEOUT&&t===D.MOUSELEAVE||e.type===D.POINTEROVER&&t===D.POINTERENTER||e.type===D.POINTEROUT&&t===D.POINTERLEAVE)&&(!r||r!==n&&!n.contains(r))}function cO(e,t){let n={};for(let r in e){if(r==="srcElement"||r==="target")continue;let i=r,o=e[i];typeof o!="function"&&(n[i]=o)}return e.type===D.MOUSEOVER?n.type=D.MOUSEENTER:e.type===D.MOUSEOUT?n.type=D.MOUSELEAVE:e.type===D.POINTEROVER?n.type=D.POINTERENTER:n.type=D.POINTERLEAVE,n.target=n.srcElement=t,n.bubbles=!1,n._originalEvent=e,n}var lO=typeof navigator<"u"&&/iPhone|iPad|iPod/.test(navigator.userAgent),_l=class{element;handlerInfos=[];constructor(t){this.element=t}addEventListener(t,n,r){lO&&(this.element.style.cursor="pointer"),this.handlerInfos.push(nO(this.element,t,n(this.element),r))}cleanUp(){for(let t=0;t<this.handlerInfos.length;t++)rO(this.element,this.handlerInfos[t]);this.handlerInfos=[]}},uO={NAMESPACE_ACTION_SEPARATOR:".",EVENT_ACTION_SEPARATOR:":"};function Mn(e){return e.eventType}function op(e,t){e.eventType=t}function vl(e){return e.event}function Tw(e,t){e.event=t}function Dw(e){return e.targetElement}function bw(e,t){e.targetElement=t}function Sw(e){return e.eic}function dO(e,t){e.eic=t}function fO(e){return e.timeStamp}function hO(e,t){e.timeStamp=t}function yl(e){return e.eia}function Rw(e,t,n){e.eia=[t,n]}function Xh(e){e.eia=void 0}function ml(e){return e[1]}function pO(e){return e.eirp}function Aw(e,t){e.eirp=t}function Nw(e){return e.eir}function Mw(e,t){e.eir=t}function Ow(e){return{eventType:e.eventType,event:e.event,targetElement:e.targetElement,eic:e.eic,eia:e.eia,timeStamp:e.timeStamp,eirp:e.eirp,eiack:e.eiack,eir:e.eir}}function gO(e,t,n,r,i,o,s,a){return{eventType:e,event:t,targetElement:n,eic:r,timeStamp:i,eia:o,eirp:s,eiack:a}}var ep=class e{eventInfo;constructor(t){this.eventInfo=t}getEventType(){return Mn(this.eventInfo)}setEventType(t){op(this.eventInfo,t)}getEvent(){return vl(this.eventInfo)}setEvent(t){Tw(this.eventInfo,t)}getTargetElement(){return Dw(this.eventInfo)}setTargetElement(t){bw(this.eventInfo,t)}getContainer(){return Sw(this.eventInfo)}setContainer(t){dO(this.eventInfo,t)}getTimestamp(){return fO(this.eventInfo)}setTimestamp(t){hO(this.eventInfo,t)}getAction(){let t=yl(this.eventInfo);if(t)return{name:t[0],element:t[1]}}setAction(t){if(!t){Xh(this.eventInfo);return}Rw(this.eventInfo,t.name,t.element)}getIsReplay(){return pO(this.eventInfo)}setIsReplay(t){Aw(this.eventInfo,t)}getResolved(){return Nw(this.eventInfo)}setResolved(t){Mw(this.eventInfo,t)}clone(){return new e(Ow(this.eventInfo))}},mO={},vO=/\s*;\s*/,yO=D.CLICK,tp=class{a11yClickSupport=!1;clickModSupport=!0;syntheticMouseEventSupport;updateEventInfoForA11yClick=void 0;preventDefaultForA11yClick=void 0;populateClickOnlyAction=void 0;constructor({syntheticMouseEventSupport:t=!1,clickModSupport:n=!0}={}){this.syntheticMouseEventSupport=t,this.clickModSupport=n}resolveEventType(t){this.clickModSupport&&Mn(t)===D.CLICK&&sO(vl(t))?op(t,D.CLICKMOD):this.a11yClickSupport&&this.updateEventInfoForA11yClick(t)}resolveAction(t){Nw(t)||(this.populateAction(t,Dw(t)),Mw(t,!0))}resolveParentAction(t){let n=yl(t),r=n&&ml(n);Xh(t);let i=r&&this.getParentNode(r);i&&this.populateAction(t,i)}populateAction(t,n){let r=n;for(;r&&r!==Sw(t)&&(r.nodeType===Node.ELEMENT_NODE&&this.populateActionOnElement(r,t),!yl(t));)r=this.getParentNode(r);let i=yl(t);if(i&&(this.a11yClickSupport&&this.preventDefaultForA11yClick(t),this.syntheticMouseEventSupport&&(Mn(t)===D.MOUSEENTER||Mn(t)===D.MOUSELEAVE||Mn(t)===D.POINTERENTER||Mn(t)===D.POINTERLEAVE)))if(aO(vl(t),Mn(t),ml(i))){let o=cO(vl(t),ml(i));Tw(t,o),bw(t,ml(i))}else Xh(t)}getParentNode(t){let n=t[rp.OWNER];if(n)return n;let r=t.parentNode;return r?.nodeName==="#document-fragment"?r?.host??null:r}populateActionOnElement(t,n){let r=this.parseActions(t),i=r[Mn(n)];i!==void 0&&Rw(n,i,t),this.a11yClickSupport&&this.populateClickOnlyAction(t,n,r)}parseActions(t){let n=ZM(t);if(!n){let r=t.getAttribute(ac.JSACTION);if(!r)n=mO,Ew(t,n);else{if(n=QM(r),!n){n={};let i=r.split(vO);for(let o=0;o<i.length;o++){let s=i[o];if(!s)continue;let a=s.indexOf(uO.EVENT_ACTION_SEPARATOR),c=a!==-1,l=c?s.substr(0,a).trim():yO,u=c?s.substr(a+1).trim():s;n[l]=u}JM(r,n)}Ew(t,n)}}return n}addA11yClickSupport(t,n,r){this.a11yClickSupport=!0,this.updateEventInfoForA11yClick=t,this.preventDefaultForA11yClick=n,this.populateClickOnlyAction=r}},kw=function(e){return e[e.I_AM_THE_JSACTION_FRAMEWORK=0]="I_AM_THE_JSACTION_FRAMEWORK",e}(kw||{}),np=class{dispatchDelegate;actionResolver;eventReplayer;eventReplayScheduled=!1;replayEventInfoWrappers=[];constructor(t,{actionResolver:n,eventReplayer:r}={}){this.dispatchDelegate=t,this.actionResolver=n,this.eventReplayer=r}dispatch(t){let n=new ep(t);this.actionResolver?.resolveEventType(t),this.actionResolver?.resolveAction(t);let r=n.getAction();if(r&&_O(r.element,n)&&iO(n.getEvent()),this.eventReplayer&&n.getIsReplay()){this.scheduleEventInfoWrapperReplay(n);return}this.dispatchDelegate(n)}scheduleEventInfoWrapperReplay(t){this.replayEventInfoWrappers.push(t),!this.eventReplayScheduled&&(this.eventReplayScheduled=!0,Promise.resolve().then(()=>{this.eventReplayScheduled=!1,this.eventReplayer(this.replayEventInfoWrappers)}))}};function _O(e,t){return e.tagName==="A"&&(t.getEventType()===D.CLICK||t.getEventType()===D.CLICKMOD)}var Pw=Symbol.for("propagationStopped"),sp={REPLAY:101};var EO="`preventDefault` called during event replay.";var IO="`composedPath` called during event replay.",El=class{dispatchDelegate;clickModSupport;actionResolver;dispatcher;constructor(t,n=!0){this.dispatchDelegate=t,this.clickModSupport=n,this.actionResolver=new tp({clickModSupport:n}),this.dispatcher=new np(r=>{this.dispatchToDelegate(r)},{actionResolver:this.actionResolver})}dispatch(t){this.dispatcher.dispatch(t)}dispatchToDelegate(t){for(t.getIsReplay()&&TO(t),wO(t);t.getAction();){if(DO(t),ip(t.getEventType())&&t.getAction().element!==t.getTargetElement()||(this.dispatchDelegate(t.getEvent(),t.getAction().name),CO(t)))return;this.actionResolver.resolveParentAction(t.eventInfo)}}};function wO(e){let t=e.getEvent(),n=e.getEvent().stopPropagation.bind(t),r=()=>{t[Pw]=!0,n()};vr(t,"stopPropagation",r),vr(t,"stopImmediatePropagation",r)}function CO(e){return!!e.getEvent()[Pw]}function TO(e){let t=e.getEvent(),n=e.getTargetElement(),r=t.preventDefault.bind(t);vr(t,"target",n),vr(t,"eventPhase",sp.REPLAY),vr(t,"preventDefault",()=>{throw r(),new Error(EO+"")}),vr(t,"composedPath",()=>{throw new Error(IO+"")})}function DO(e){let t=e.getEvent(),n=e.getAction()?.element;n&&vr(t,"currentTarget",n,{configurable:!0})}function vr(e,t,n,{configurable:r=!1}={}){Object.defineProperty(e,t,{value:n,configurable:r})}function xw(e,t){e.ecrd(n=>{t.dispatch(n)},kw.I_AM_THE_JSACTION_FRAMEWORK)}function bO(e){return e?.q??[]}function SO(e){e&&(ww(e.c,e.et,e.h),ww(e.c,e.etc,e.h,!0))}function ww(e,t,n,r){for(let i=0;i<t.length;i++)e.removeEventListener(t[i],n,r)}var RO=!1,Lw=(()=>{class e{static MOUSE_SPECIAL_SUPPORT=RO;containerManager;eventHandlers={};browserEventTypeToExtraEventTypes={};dispatcher=null;queuedEventInfos=[];constructor(n){this.containerManager=n}handleEvent(n,r,i){let o=gO(n,r,r.target,i,Date.now());this.handleEventInfo(o)}handleEventInfo(n){if(!this.dispatcher){Aw(n,!0),this.queuedEventInfos?.push(n);return}this.dispatcher(n)}addEvent(n,r,i){if(n in this.eventHandlers||!this.containerManager||!e.MOUSE_SPECIAL_SUPPORT&&XM.indexOf(n)>=0)return;let o=(a,c,l)=>{this.handleEvent(a,c,l)};this.eventHandlers[n]=o;let s=tO(r||n);if(s!==n){let a=this.browserEventTypeToExtraEventTypes[s]||[];a.push(n),this.browserEventTypeToExtraEventTypes[s]=a}this.containerManager.addEventListener(s,a=>c=>{o(n,c,a)},i)}replayEarlyEvents(n=window._ejsa){n&&(this.replayEarlyEventInfos(n.q),SO(n),delete window._ejsa)}replayEarlyEventInfos(n){for(let r=0;r<n.length;r++){let i=n[r],o=this.getEventTypesForBrowserEventType(i.eventType);for(let s=0;s<o.length;s++){let a=Ow(i);op(a,o[s]),this.handleEventInfo(a)}}}getEventTypesForBrowserEventType(n){let r=[];return this.eventHandlers[n]&&r.push(n),this.browserEventTypeToExtraEventTypes[n]&&r.push(...this.browserEventTypeToExtraEventTypes[n]),r}handler(n){return this.eventHandlers[n]}cleanUp(){this.containerManager?.cleanUp(),this.containerManager=null,this.eventHandlers={},this.browserEventTypeToExtraEventTypes={},this.dispatcher=null,this.queuedEventInfos=[]}registerDispatcher(n,r){this.ecrd(n,r)}ecrd(n,r){if(this.dispatcher=n,this.queuedEventInfos?.length){for(let i=0;i<this.queuedEventInfos.length;i++)this.handleEventInfo(this.queuedEventInfos[i]);this.queuedEventInfos=null}}}return e})();function Fw(e,t=window){return bO(t._ejsas?.[e])}function ap(e,t=window){t._ejsas&&(t._ejsas[e]=void 0)}var $w=Symbol("InputSignalNode#UNSET"),qO=K(_({},ga),{transformFn:void 0,applyValueToInputSignal(e,t){ao(e,t)}});function Ww(e,t){let n=Object.create(qO);n.value=e,n.transformFn=t?.transform;function r(){if(da(n),n.value===$w){let i=null;throw new w(-950,i)}return n.value}return r[Gt]=n,r}var KO=new I("");KO.__NG_ELEMENT_ID__=e=>{let t=it();if(t===null)throw new w(204,!1);if(t.type&2)return t.value;if(e&8)return null;throw new w(204,!1)};function jw(e,t){return Ww(e,t)}function YO(e){return Ww($w,e)}var zw=(jw.required=YO,jw);var Ti=class{full;major;minor;patch;constructor(t){this.full=t;let n=t.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Gw=new Ti("20.1.7");var cp=new I(""),ZO=new I("");function Zo(e){return!e.moduleRef}function QO(e){let t=Zo(e)?e.r3Injector:e.moduleRef.injector,n=t.get(Y);return n.run(()=>{Zo(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let r=t.get(ot),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),Zo(e)){let o=()=>t.destroy(),s=e.platformInjector.get(cp);s.add(o),t.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>e.moduleRef.destroy(),s=e.platformInjector.get(cp);s.add(o),e.moduleRef.onDestroy(()=>{No(e.allPlatformModules,e.moduleRef),i.unsubscribe(),s.delete(o)})}return XO(r,n,()=>{let o=t.get(yt),s=o.add(),a=t.get(qh);return a.runInitializers(),a.donePromise.then(()=>{let c=t.get(Jh,Ko);if(hw(c||Ko),!t.get(ZO,!0))return Zo(e)?t.get(je):(e.allPlatformModules.push(e.moduleRef),e.moduleRef);if(Zo(e)){let u=t.get(je);return e.rootComponent!==void 0&&u.bootstrap(e.rootComponent),u}else return JO?.(e.moduleRef,e.allPlatformModules),e.moduleRef}).finally(()=>void o.remove(s))})})}var JO;function XO(e,t,n){try{let r=n();return qo(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e(r)),r}}var wl=null;function ek(e=[],t){return pe.create({name:t,providers:[{provide:_o,useValue:"platform"},{provide:cp,useValue:new Set([()=>wl=null])},...e]})}function tk(e=[]){if(wl)return wl;let t=ek(e);return wl=t,sw(),nk(t),t}function nk(e){let t=e.get(Uc,null);ue(e,()=>{t?.forEach(n=>n())})}function up(){return!1}var dp=(()=>{class e{static __NG_ELEMENT_ID__=rk}return e})();function rk(e){return ik(it(),G(),(e&16)===16)}function ik(e,t,n){if(en(e)&&!n){let r=rt(e.index,t);return new dr(r,r)}else if(e.type&175){let r=t[Ne];return new dr(r,t)}return null}function qw(e){H(8);try{let{rootComponent:t,appProviders:n,platformProviders:r}=e,i=tk(r),o=[vw({}),{provide:Jt,useExisting:_w},c_,...n||[]],s=new xo({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return QO({r3Injector:s.injector,platformInjector:i,rootComponent:t})}catch(t){return Promise.reject(t)}finally{H(9)}}var Il=new WeakSet,Uw="",Cl=[];function Vw(e){return e.get(gh,NE)}function Kw(){let e=[{provide:gh,useFactory:()=>{let t=!0;{let n=g(Lt);t=!!window._ejsas?.[n]}return t&&ct("NgEventReplay"),t}}];return e.push({provide:pt,useValue:()=>{let t=g(je),{injector:n}=t;if(!Il.has(t)){let r=g(mh);if(Vw(n)){jE();let i=n.get(Lt),o=LE(i,(s,a,c)=>{s.nodeType===Node.ELEMENT_NODE&&(OE(s,a,c),kE(s,r))});t.onDestroy(o)}}},multi:!0},{provide:An,useFactory:()=>{let t=g(je),{injector:n}=t;return()=>{if(!Vw(n)||Il.has(t))return;Il.add(t);let r=n.get(Lt);t.onDestroy(()=>{Il.delete(t),ap(r)}),t.whenStable().then(()=>{if(t.destroyed)return;let i=n.get(xE);ok(i,n);let o=n.get(mh);o.get(Uw)?.forEach(PE),o.delete(Uw);let s=i.instance;zE(n)?t.onDestroy(()=>s.cleanUp()):s.cleanUp()})}},multi:!0}),e}var ok=(e,t)=>{let n=t.get(Lt),r=window._ejsas[n],i=e.instance=new Lw(new _l(r.c));for(let a of r.et)i.addEvent(a);for(let a of r.etc)i.addEvent(a);let o=Fw(n);i.replayEarlyEventInfos(o),ap(n);let s=new El(a=>{sk(t,a,a.currentTarget)});xw(i,s)};function sk(e,t,n){let r=(n&&n.getAttribute(Vo))??"";/d\d+/.test(r)?ak(r,e,t,n):t.eventPhase===sp.REPLAY&&vh(t,n)}function ak(e,t,n,r){Cl.push({event:n,currentTarget:r}),lw(t,e,ck)}function ck(e){let t=[...Cl],n=new Set(e);Cl=[];for(let{event:r,currentTarget:i}of t){let o=i.getAttribute(Vo);n.has(o)?vh(r,i):Cl.push({event:r,currentTarget:i})}}var Bw=!1;function lk(){Bw||(Bw=!0,HE(),dw(),gw(),fw(),ZI(),zI(),OI(),gI())}function uk(e){return e.whenStable()}function Yw(){let e=[{provide:Uo,useFactory:()=>{let t=!0;return t=!!g(pr,{optional:!0})?.get(yh,null),t&&ct("NgHydration"),t}},{provide:pt,useValue:()=>{RI(!1),g(Uo)&&(KE(jo()),lk())},multi:!0}];return e.push({provide:ph,useFactory:()=>g(Uo)},{provide:An,useFactory:()=>{if(g(Uo)){let t=g(je);return()=>{uk(t).then(()=>{t.destroyed||jh(t)})}}return()=>{}},multi:!0}),Xe(e)}var Jw=null;function an(){return Jw}function fp(e){Jw??=e}var Qo=class{},hp=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:()=>g(Xw),providedIn:"platform"})}return e})();var Xw=(()=>{class e extends hp{_location;_history;_doc=g(Ie);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return an().getBaseHref(this._doc)}onPopState(n){let r=an().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=an().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:()=>new e,providedIn:"platform"})}return e})();function eC(e,t){return e?t?e.endsWith("/")?t.startsWith("/")?e+t.slice(1):e+t:t.startsWith("/")?e+t:`${e}/${t}`:e:t}function Zw(e){let t=e.search(/#|\?|$/);return e[t-1]==="/"?e.slice(0,t-1)+e.slice(t):e}function On(e){return e&&e[0]!=="?"?`?${e}`:e}var Tl=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:()=>g(nC),providedIn:"root"})}return e})(),tC=new I(""),nC=(()=>{class e extends Tl{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??g(Ie).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return eC(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+On(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+On(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+On(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||e)(R(hp),R(tC,8))};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Di=(()=>{class e{_subject=new we;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=hk(Zw(Qw(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+On(r))}normalize(n){return e.stripTrailingSlash(fk(this._basePath,Qw(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+On(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+On(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=On;static joinWithSlash=eC;static stripTrailingSlash=Zw;static \u0275fac=function(r){return new(r||e)(R(Tl))};static \u0275prov=C({token:e,factory:()=>dk(),providedIn:"root"})}return e})();function dk(){return new Di(R(Tl))}function fk(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function Qw(e){return e.replace(/\/index.html$/,"")}function hk(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}var pp=/\s+/,rC=[],gp=(()=>{class e{_ngEl;_renderer;initialClasses=rC;rawClass;stateMap=new Map;constructor(n,r){this._ngEl=n,this._renderer=r}set klass(n){this.initialClasses=n!=null?n.trim().split(pp):rC}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(pp):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(pp).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||e)(Rn(jc),Rn(Uh))};static \u0275dir=Wo({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return e})();function mp(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}var Jo=class{};var vp="browser";function Dl(e){return e===vp}var Sl=new I(""),wp=(()=>{class e{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new w(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||e)(R(Sl),R(Y))};static \u0275prov=C({token:e,factory:e.\u0275fac})}return e})(),Xo=class{_doc;constructor(t){this._doc=t}manager},yp="ng-app-id";function iC(e){for(let t of e)t.remove()}function oC(e,t){let n=t.createElement("style");return n.textContent=e,n}function mk(e,t,n,r){let i=e.head?.querySelectorAll(`style[${yp}="${t}"],link[${yp}="${t}"]`);if(i)for(let o of i)o.removeAttribute(yp),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function Ep(e,t){let n=t.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",e),n}var Cp=(()=>{class e{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,mk(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,oC);r?.forEach(i=>this.addUsage(i,this.external,Ep))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(iC(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])iC(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,oC(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,Ep(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||e)(R(Ie),R(Lt),R(Vc,8),R(st))};static \u0275prov=C({token:e,factory:e.\u0275fac})}return e})(),_p={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Tp=/%COMP%/g;var aC="%COMP%",vk=`_nghost-${aC}`,yk=`_ngcontent-${aC}`,_k=!0,Ek=new I("",{providedIn:"root",factory:()=>_k});function Ik(e){return yk.replace(Tp,e)}function wk(e){return vk.replace(Tp,e)}function cC(e,t){return t.map(n=>n.replace(Tp,e))}var Dp=(()=>{class e{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,c,l=null,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new es(n,s,c,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof bl?i.applyToHost(n):i instanceof ts&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,f=this.tracingService;switch(r.encapsulation){case on.Emulated:o=new bl(c,l,r,this.appId,u,s,a,d,f);break;case on.ShadowDom:return new Ip(c,l,n,r,s,a,this.nonce,d,f);default:o=new ts(c,l,r,u,s,a,d,f);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||e)(R(wp),R(Cp),R(Lt),R(Ek),R(Ie),R(st),R(Y),R(Vc),R(mr,8))};static \u0275prov=C({token:e,factory:e.\u0275fac})}return e})(),es=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,n,r,i,o){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(t,n){return n?this.doc.createElementNS(_p[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(sC(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(sC(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){n.remove()}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new w(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;let o=_p[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let i=_p[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(sn.DashCase|sn.Important)?t.style.setProperty(n,r,i&sn.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&sn.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r,i){if(typeof t=="string"&&(t=an().getGlobalEventTarget(this.doc,t),!t))throw new w(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(t,n,o)),this.eventManager.addEventListener(t,n,o,i)}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;t(n)===!1&&n.preventDefault()}}};function sC(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var Ip=class extends es{sharedStylesHost;hostEl;shadowRoot;constructor(t,n,r,i,o,s,a,c,l){super(t,o,s,c,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=i.styles;u=cC(i.id,u);for(let f of u){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=f,this.shadowRoot.appendChild(h)}let d=i.getExternalStyles?.();if(d)for(let f of d){let h=Ep(f,o);a&&h.setAttribute("nonce",a),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ts=class extends es{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,n,r,i,o,s,a,c,l){super(t,o,s,a,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let u=r.styles;this.styles=l?cC(l,u):u,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},bl=class extends ts{contentAttr;hostAttr;constructor(t,n,r,i,o,s,a,c,l){let u=i+"-"+r.id;super(t,n,r,o,s,a,c,l,u),this.contentAttr=Ik(u),this.hostAttr=wk(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}};var Rl=class e extends Qo{supportsDOMEvents=!0;static makeCurrent(){fp(new e)}onAndCancel(t,n,r,i){return t.addEventListener(n,r,i),()=>{t.removeEventListener(n,r,i)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=Ck();return n==null?null:Tk(n)}resetBaseElement(){ns=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return mp(document.cookie,t)}},ns=null;function Ck(){return ns=ns||document.head.querySelector("base"),ns?ns.getAttribute("href"):null}function Tk(e){return new URL(e,document.baseURI).pathname}var Dk=(()=>{class e{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:e.\u0275fac})}return e})(),uC=(()=>{class e extends Xo{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||e)(R(Ie))};static \u0275prov=C({token:e,factory:e.\u0275fac})}return e})(),lC=["alt","control","meta","shift"],bk={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Sk={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},dC=(()=>{class e extends Xo{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=e.parseEventName(r),a=e.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>an().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=e._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),lC.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=bk[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),lC.forEach(s=>{if(s!==i){let a=Sk[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{e.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||e)(R(Ie))};static \u0275prov=C({token:e,factory:e.\u0275fac})}return e})();function bp(e,t){let n=_({rootComponent:e},Rk(t));return qw(n)}function Rk(e){return{appProviders:[...kk,...e?.providers??[]],platformProviders:Ok}}function Ak(){Rl.makeCurrent()}function Nk(){return new ht}function Mk(){return dh(document),document}var Ok=[{provide:st,useValue:vp},{provide:Uc,useValue:Ak,multi:!0},{provide:Ie,useFactory:Mk}];var kk=[{provide:_o,useValue:"root"},{provide:ht,useFactory:Nk},{provide:Sl,useClass:uC,multi:!0,deps:[Ie]},{provide:Sl,useClass:dC,multi:!0,deps:[Ie]},Dp,Cp,wp,{provide:fr,useExisting:Dp},{provide:Jo,useClass:Dk},[]];var rs=class e{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=n.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,r)=>{this.addHeaderEntry(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){let n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){let n=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,n);let i=(t.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=t.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}addHeaderEntry(t,n){let r=t.toLowerCase();this.maybeSetNormalizedName(t,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}setHeaderEntries(t,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=t.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(t,i)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}};var Pk="X-Request-URL",xk="text/plain",Lk="application/json",X9=`${Lk}, ${xk}, */*`;var Rp=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(Rp||{}),Sp=class{headers;status;statusText;url;ok;type;constructor(t,n=200,r="OK"){this.headers=t.headers||new rs,this.status=t.status!==void 0?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}};var Al=class e extends Sp{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=Rp.Response;clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}};var fC=new I("");var eY=RegExp(`^${Pk}:`,"m");var Fk=new I(""),jk="b",Uk="h",Vk="s",Bk="st",Hk="u",$k="rt",Ap=new I(""),Wk=["GET","HEAD"];function zk(e,t){let h=g(Ap),{isCacheActive:n}=h,r=kv(h,["isCacheActive"]),{transferCache:i,method:o}=e;if(!n||i===!1||o==="POST"&&!r.includePostRequests&&!i||o!=="POST"&&!Wk.includes(o)||!r.includeRequestsWithAuthHeaders&&Gk(e)||r.filter?.(e)===!1)return t(e);let s=g(pr);if(g(Fk,{optional:!0}))throw new w(2803,!1);let c=e.url,l=qk(e,c),u=s.get(l,null),d=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(d=i.includeHeaders),u){let{[jk]:p,[$k]:v,[Uk]:E,[Vk]:b,[Bk]:ne,[Hk]:ve}=u,Nt=p;switch(v){case"arraybuffer":Nt=new TextEncoder().encode(p).buffer;break;case"blob":Nt=new Blob([p]);break}let oa=new rs(E);return S(new Al({body:Nt,headers:oa,status:b,statusText:ne,url:ve}))}return t(e)}function Gk(e){return e.headers.has("authorization")||e.headers.has("proxy-authorization")}function hC(e){return[...e.keys()].sort().map(t=>`${t}=${e.getAll(t)}`).join("&")}function qk(e,t){let{params:n,method:r,responseType:i}=e,o=hC(n),s=e.serializeBody();s instanceof URLSearchParams?s=hC(s):typeof s!="string"&&(s="");let a=[r,i,t,s,o].join("|"),c=Kk(a);return c}function Kk(e){let t=0;for(let n of e)t=Math.imul(31,t)+n.charCodeAt(0)<<0;return t+=2147483648,t.toString()}function pC(e){return[{provide:Ap,useFactory:()=>(ct("NgHttpTransferCache"),_({isCacheActive:!0},e))},{provide:fC,useValue:zk,multi:!0},{provide:An,multi:!0,useFactory:()=>{let t=g(je),n=g(Ap);return()=>{t.whenStable().then(()=>{n.isCacheActive=!1})}}}]}var gC=(()=>{class e{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||e)(R(Ie))};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var is=function(e){return e[e.NoHttpTransferCache=0]="NoHttpTransferCache",e[e.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",e[e.I18nSupport=2]="I18nSupport",e[e.EventReplay=3]="EventReplay",e[e.IncrementalHydration=4]="IncrementalHydration",e}(is||{});function mC(e,t=[],n={}){return{\u0275kind:e,\u0275providers:t}}function vC(){return mC(is.NoHttpTransferCache)}function yC(){return mC(is.EventReplay,Kw())}function _C(...e){let t=[],n=new Set;for(let{\u0275providers:i,\u0275kind:o}of e)n.add(o),i.length&&t.push(i);let r=n.has(is.HttpTransferCacheOptions);return Xe([[],Yw(),n.has(is.NoHttpTransferCache)||r?[]:pC({}),t])}var os=class{mockTiles1=[{id:1,title:"Draconic Visage",src:"https://oldschool.runescape.wiki/images/thumb/Draconic_visage_detail.png/130px-Draconic_visage_detail.png?6edab",bossSrc:"https://oldschool.runescape.wiki/images/thumb/King_Black_Dragon.png/290px-King_Black_Dragon.png?d25f0",alt:"Draconic Visage",description:"Obtain a Draconic Visage from a King Black Dragon",itemsRequired:1,itemsObtained:0,points:5},{id:2,title:"Any Scroll",src:"https://oldschool.runescape.wiki/images/thumb/Dexterous_prayer_scroll_detail.png/150px-Dexterous_prayer_scroll_detail.png?d6a6b",bossSrc:"https://oldschool.runescape.wiki/images/thumb/Great_Olm.png/300px-Great_Olm.png?f1081",alt:"Dex Scroll",description:"Obtain any scroll from the Chamber of Xeric",itemsRequired:1,itemsObtained:1,points:5},{id:3,title:"Any torva piece",src:"https://oldschool.runescape.wiki/images/thumb/Torva_full_helm_detail.png/120px-Torva_full_helm_detail.png?975a0",bossSrc:"https://oldschool.runescape.wiki/images/thumb/Nex.png/270px-Nex.png?2a1b3",alt:"Torva Helm",description:"Obtain any piece of Torva from Nex",itemsRequired:1,itemsObtained:0,points:5},{id:4,title:"Any megarare",src:"https://oldschool.runescape.wiki/images/thumb/Twisted_bow_detail.png/150px-Twisted_bow_detail.png?7aa10",bossSrc:"./assets/raids.png",alt:"Twisted Bow",description:"Obtain any megarare drop from any raid",itemsRequired:1,itemsObtained:1,points:5},{id:5,title:"5 Venator Shards",src:"https://oldschool.runescape.wiki/images/thumb/Venator_shard_detail.png/130px-Venator_shard_detail.png?3ad3e",bossSrc:"https://oldschool.runescape.wiki/images/thumb/Phantom_Muspah_%28ranged%29.png/250px-Phantom_Muspah_%28ranged%29.png?9cf6a",alt:"Venator Shard",description:"Obtain 5 Venator Shards from the Phantom Muspah",itemsRequired:5,itemsObtained:1,points:5},{id:6,title:"Ultor Vestige",src:"https://oldschool.runescape.wiki/images/thumb/Ultor_vestige_detail.png/130px-Ultor_vestige_detail.png?99817",bossSrc:"https://oldschool.runescape.wiki/images/thumb/Vardorvis.png/200px-Vardorvis.png?48af8",alt:"Ultor Vestige",description:"Obtain an Ultor Vestige from Vardorvis",itemsRequired:1,itemsObtained:0,points:5}];mockTiles2=[{id:1,title:"Draconic Visage",src:"https://oldschool.runescape.wiki/images/thumb/Draconic_visage_detail.png/130px-Draconic_visage_detail.png?6edab",bossSrc:"https://oldschool.runescape.wiki/images/thumb/King_Black_Dragon.png/290px-King_Black_Dragon.png?d25f0",alt:"Draconic Visage",description:"Obtain a Draconic Visage from a King Black Dragon",itemsRequired:1,itemsObtained:0,points:5},{id:2,title:"Any Scroll",src:"https://oldschool.runescape.wiki/images/thumb/Dexterous_prayer_scroll_detail.png/150px-Dexterous_prayer_scroll_detail.png?d6a6b",bossSrc:"https://oldschool.runescape.wiki/images/thumb/Great_Olm.png/300px-Great_Olm.png?f1081",alt:"Dex Scroll",description:"Obtain any scroll from the Chamber of Xeric",itemsRequired:1,itemsObtained:1,points:5},{id:3,title:"Any torva piece",src:"https://oldschool.runescape.wiki/images/thumb/Torva_full_helm_detail.png/120px-Torva_full_helm_detail.png?975a0",bossSrc:"https://oldschool.runescape.wiki/images/thumb/Nex.png/270px-Nex.png?2a1b3",alt:"Torva Helm",description:"Obtain any piece of Torva from Nex",itemsRequired:1,itemsObtained:0,points:5},{id:4,title:"Any megarare",src:"https://oldschool.runescape.wiki/images/thumb/Twisted_bow_detail.png/150px-Twisted_bow_detail.png?7aa10",bossSrc:"./assets/raids.png",alt:"Twisted Bow",description:"Obtain any megarare drop from any raid",itemsRequired:1,itemsObtained:1,points:5},{id:5,title:"5 Venator Shards",src:"https://oldschool.runescape.wiki/images/thumb/Venator_shard_detail.png/130px-Venator_shard_detail.png?3ad3e",bossSrc:"https://oldschool.runescape.wiki/images/thumb/Phantom_Muspah_%28ranged%29.png/250px-Phantom_Muspah_%28ranged%29.png?9cf6a",alt:"Venator Shard",description:"Obtain 5 Venator Shards from the Phantom Muspah",itemsRequired:5,itemsObtained:5,points:5},{id:6,title:"Ultor Vestige",src:"https://oldschool.runescape.wiki/images/thumb/Ultor_vestige_detail.png/130px-Ultor_vestige_detail.png?99817",bossSrc:"https://oldschool.runescape.wiki/images/thumb/Vardorvis.png/200px-Vardorvis.png?48af8",alt:"Ultor Vestige",description:"Obtain an Ultor Vestige from Vardorvis",itemsRequired:1,itemsObtained:1,points:5}];board=[this.mockTiles1,this.mockTiles2]};var Np={production:!0,firebaseConfig:{apiKey:"AIzaSyB2e36wu47-6DOc2_rAuHfiFTq9vm6GBD0",authDomain:"cabbingo-db.firebaseapp.com",databaseURL:"https://cabbingo-db-default-rtdb.europe-west1.firebasedatabase.app",projectId:"cabbingo-db",storageBucket:"cabbingo-db.firebasestorage.app",messagingSenderId:"684304316440",appId:"1:684304316440:web:0660b0d72a68752cadeb6d"}};var EC=()=>{};var Op={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var y=function(e,t){if(!e)throw yr(t)},yr=function(e){return new Error("Firebase Database ("+Op.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};var CC=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},Zk=function(e){let t=[],n=0,r=0;for(;n<e.length;){let i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=e[n++];t[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=e[n++],s=e[n++],a=e[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{let o=e[n++],s=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return t.join("")},Ri={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){let o=e[i],s=i+1<e.length,a=s?e[i+1]:0,c=i+2<e.length,l=c?e[i+2]:0,u=o>>2,d=(o&3)<<4|a>>4,f=(a&15)<<2|l>>6,h=l&63;c||(h=64,s||(f=64)),r.push(n[u],n[d],n[f],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(CC(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Zk(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){let o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;let l=i<e.length?n[e.charAt(i)]:64;++i;let d=i<e.length?n[e.charAt(i)]:64;if(++i,o==null||a==null||l==null||d==null)throw new kp;let f=o<<2|a>>4;if(r.push(f),l!==64){let h=a<<4&240|l>>2;if(r.push(h),d!==64){let p=l<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},kp=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},xp=function(e){let t=CC(e);return Ri.encodeByteArray(t,!0)},as=function(e){return xp(e).replace(/\./g,"")},bi=function(e){try{return Ri.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function TC(e){return DC(void 0,e)}function DC(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:let n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(let n in t)!t.hasOwnProperty(n)||!Qk(n)||(e[n]=DC(e[n],t[n]));return e}function Qk(e){return e!=="__proto__"}function bC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Jk=()=>bC().__FIREBASE_DEFAULTS__,Xk=()=>{if(typeof process>"u"||typeof process.env>"u")return;let e=process.env.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},eP=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=e&&bi(e[1]);return t&&JSON.parse(t)},Lp=()=>{try{return EC()||Jk()||Xk()||eP()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},SC=e=>{var t,n;return(n=(t=Lp())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},RC=e=>{let t=SC(e);if(!t)return;let n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);let r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Fp=()=>{var e;return(e=Lp())===null||e===void 0?void 0:e.config},AC=e=>{var t;return(t=Lp())===null||t===void 0?void 0:t[`_${e}`]};var jt=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}};function _r(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}function jp(e){return m(this,null,function*(){return(yield fetch(e,{credentials:"include"})).ok})}function NC(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[as(JSON.stringify(n)),as(JSON.stringify(s)),""].join(".")}var ss={};function tP(){let e={prod:[],emulator:[]};for(let t of Object.keys(ss))ss[t]?e.emulator.push(t):e.prod.push(t);return e}function nP(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}var IC=!1;function Up(e,t){if(typeof window>"u"||typeof document>"u"||!_r(window.location.host)||ss[e]===t||ss[e]||IC)return;ss[e]=t;function n(f){return`__firebase__banner__${f}`}let r="__firebase__banner",o=tP().prod.length>0;function s(){let f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function c(f,h){f.setAttribute("width","24"),f.setAttribute("id",h),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function l(){let f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{IC=!0,s()},f}function u(f,h){f.setAttribute("id",h),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){let f=nP(r),h=n("text"),p=document.getElementById(h)||document.createElement("span"),v=n("learnmore"),E=document.getElementById(v)||document.createElement("a"),b=n("preprendIcon"),ne=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){let ve=f.element;a(ve),u(E,v);let Nt=l();c(ne,b),ve.append(ne,p,E,Nt),document.body.appendChild(ve)}o?(p.innerText="Preview backend disconnected.",ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,p.innerText="Preview backend running in this workspace."),p.setAttribute("id",h)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}function wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cs(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wt())}function MC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function OC(){let e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Ml(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Vt(){return Op.NODE_CLIENT===!0||Op.NODE_ADMIN===!0}function Ol(){try{return typeof indexedDB=="object"}catch{return!1}}function kC(){return new Promise((e,t)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;t(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){t(n)}})}var rP="FirebaseError",Ut=class e extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=rP,Object.setPrototypeOf(this,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,It.prototype.create)}},It=class{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){let r=n[0]||{},i=`${this.service}/${t}`,o=this.errors[t],s=o?iP(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Ut(i,a,r)}};function iP(e,t){return e.replace(oP,(n,r)=>{let i=t[r];return i!=null?String(i):`<${r}?>`})}var oP=/\{\$([^}]+)}/g;function Si(e){return JSON.parse(e)}function ge(e){return JSON.stringify(e)}var PC=function(e){let t={},n={},r={},i="";try{let o=e.split(".");t=Si(bi(o[0])||""),n=Si(bi(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:r,signature:i}};var xC=function(e){let t=PC(e),n=t.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},LC=function(e){let t=PC(e).claims;return typeof t=="object"&&t.admin===!0};function Bt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Er(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function kl(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ls(e,t,n){let r={};for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Ir(e,t){if(e===t)return!0;let n=Object.keys(e),r=Object.keys(t);for(let i of n){if(!r.includes(i))return!1;let o=e[i],s=t[i];if(wC(o)&&wC(s)){if(!Ir(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function wC(e){return e!==null&&typeof e=="object"}function us(e){let t=[];for(let[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}var Nl=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,n){n||(n=0);let r=this.W_;if(typeof t=="string")for(let d=0;d<16;d++)r[d]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(let d=16;d<80;d++){let f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^o&(s^a),u=1518500249):(l=o^s^a,u=1859775393):d<60?(l=o&s|a&(o|s),u=2400959708):(l=o^s^a,u=3395469782);let f=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=s,s=(o<<30|o>>>2)&4294967295,o=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(t,n){if(t==null)return;n===void 0&&(n=t.length);let r=n-this.blockSize,i=0,o=this.buf_,s=this.inbuf_;for(;i<n;){if(s===0)for(;i<=r;)this.compress_(t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<n;)if(o[s]=t.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<n;)if(o[s]=t[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=n}digest(){let t=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)t[r]=this.chain_[i]>>o&255,++r;return t}};function FC(e,t){let n=new Pp(e,t);return n.subscribe.bind(n)}var Pp=class{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");sP(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=Mp),i.error===void 0&&(i.error=Mp),i.complete===void 0&&(i.complete=Mp);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function sP(e,t){if(typeof e!="object"||e===null)return!1;for(let n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Mp(){}function Vp(e,t){return`${e} failed: ${t} argument `}var jC=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){let o=i-55296;r++,y(r<e.length,"Surrogate pair missing trail surrogate.");let s=e.charCodeAt(r)-56320;i=65536+(o<<10)+s}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},ds=function(e){let t=0;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};var FY=4*60*60*1e3;function Ct(e){return e&&e._delegate?e._delegate:e}var Oe=class{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};var wr="[DEFAULT]";var Pl=class{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){let n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){let r=new jt;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;let r=this.normalizeInstanceIdentifier(t?.identifier),i=(n=t?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(cP(t))try{this.getOrInitializeService({instanceIdentifier:wr})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(t=wr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}delete(){return m(this,null,function*(){let t=Array.from(this.instances.values());yield Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(t=wr){return this.instances.has(t)}getOptions(t=wr){return this.instancesOptions.get(t)||{}}initialize(t={}){let{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(t,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(t),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&t(s,i),()=>{o.delete(t)}}invokeOnInitCallbacks(t,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:aP(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=wr){return this.component?this.component.multipleInstances?t:wr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function aP(e){return e===wr?void 0:e}function cP(e){return e.instantiationMode==="EAGER"}var fs=class{constructor(t){this.name=t,this.providers=new Map}addComponent(t){let n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);let n=new Pl(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}};var lP=[],Z=function(e){return e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT",e}(Z||{}),uP={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},dP=Z.INFO,fP={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},hP=(e,t,...n)=>{if(t<e.logLevel)return;let r=new Date().toISOString(),i=fP[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)},Ht=class{constructor(t){this.name=t,this._logLevel=dP,this._logHandler=hP,this._userLogHandler=null,lP.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Z))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?uP[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...t),this._logHandler(this,Z.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...t),this._logHandler(this,Z.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...t),this._logHandler(this,Z.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...t),this._logHandler(this,Z.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...t),this._logHandler(this,Z.ERROR,...t)}};var pP=(e,t)=>t.some(n=>e instanceof n),UC,VC;function gP(){return UC||(UC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mP(){return VC||(VC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var BC=new WeakMap,Hp=new WeakMap,HC=new WeakMap,Bp=new WeakMap,Wp=new WeakMap;function vP(e){let t=new Promise((n,r)=>{let i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",s)},o=()=>{n($t(e.result)),i()},s=()=>{r(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",s)});return t.then(n=>{n instanceof IDBCursor&&BC.set(n,e)}).catch(()=>{}),Wp.set(t,e),t}function yP(e){if(Hp.has(e))return;let t=new Promise((n,r)=>{let i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",s),e.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",s),e.addEventListener("abort",s)});Hp.set(e,t)}var $p={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Hp.get(e);if(t==="objectStoreNames")return e.objectStoreNames||HC.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $t(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function $C(e){$p=e($p)}function _P(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){let r=e.call(xl(this),t,...n);return HC.set(r,t.sort?t.sort():[t]),$t(r)}:mP().includes(e)?function(...t){return e.apply(xl(this),t),$t(BC.get(this))}:function(...t){return $t(e.apply(xl(this),t))}}function EP(e){return typeof e=="function"?_P(e):(e instanceof IDBTransaction&&yP(e),pP(e,gP())?new Proxy(e,$p):e)}function $t(e){if(e instanceof IDBRequest)return vP(e);if(Bp.has(e))return Bp.get(e);let t=EP(e);return t!==e&&(Bp.set(e,t),Wp.set(t,e)),t}var xl=e=>Wp.get(e);function zC(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(e,t),a=$t(s);return r&&s.addEventListener("upgradeneeded",c=>{r($t(s.result),c.oldVersion,c.newVersion,$t(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var IP=["get","getKey","getAll","getAllKeys","count"],wP=["put","add","delete","clear"],zp=new Map;function WC(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(zp.get(t))return zp.get(t);let n=t.replace(/FromIndex$/,""),r=t!==n,i=wP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||IP.includes(n)))return;let o=function(s,...a){return m(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&c.done]))[0]})};return zp.set(t,o),o}$C(e=>K(_({},e),{get:(t,n,r)=>WC(t,n)||e.get(t,n,r),has:(t,n)=>!!WC(t,n)||e.has(t,n)}));var qp=class{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(CP(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function CP(e){let t=e.getComponent();return t?.type==="VERSION"}var Kp="@firebase/app",GC="0.13.2";var cn=new Ht("@firebase/app"),TP="@firebase/app-compat",DP="@firebase/analytics-compat",bP="@firebase/analytics",SP="@firebase/app-check-compat",RP="@firebase/app-check",AP="@firebase/auth",NP="@firebase/auth-compat",MP="@firebase/database",OP="@firebase/data-connect",kP="@firebase/database-compat",PP="@firebase/functions",xP="@firebase/functions-compat",LP="@firebase/installations",FP="@firebase/installations-compat",jP="@firebase/messaging",UP="@firebase/messaging-compat",VP="@firebase/performance",BP="@firebase/performance-compat",HP="@firebase/remote-config",$P="@firebase/remote-config-compat",WP="@firebase/storage",zP="@firebase/storage-compat",GP="@firebase/firestore",qP="@firebase/ai",KP="@firebase/firestore-compat",YP="firebase",ZP="11.10.0";var Yp="[DEFAULT]",QP={[Kp]:"fire-core",[TP]:"fire-core-compat",[bP]:"fire-analytics",[DP]:"fire-analytics-compat",[RP]:"fire-app-check",[SP]:"fire-app-check-compat",[AP]:"fire-auth",[NP]:"fire-auth-compat",[MP]:"fire-rtdb",[OP]:"fire-data-connect",[kP]:"fire-rtdb-compat",[PP]:"fire-fn",[xP]:"fire-fn-compat",[LP]:"fire-iid",[FP]:"fire-iid-compat",[jP]:"fire-fcm",[UP]:"fire-fcm-compat",[VP]:"fire-perf",[BP]:"fire-perf-compat",[HP]:"fire-rc",[$P]:"fire-rc-compat",[WP]:"fire-gcs",[zP]:"fire-gcs-compat",[GP]:"fire-fst",[KP]:"fire-fst-compat",[qP]:"fire-vertex","fire-js":"fire-js",[YP]:"fire-js-all"};var hs=new Map,JP=new Map,Zp=new Map;function qC(e,t){try{e.container.addComponent(t)}catch(n){cn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Tt(e){let t=e.name;if(Zp.has(t))return cn.debug(`There were multiple attempts to register component ${t}.`),!1;Zp.set(t,e);for(let n of hs.values())qC(n,e);for(let n of JP.values())qC(n,e);return!0}function Ll(e,t){let n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ln(e){return e==null?!1:e.settings!==void 0}var XP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},kn=new It("app","Firebase",XP);var Qp=class{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Oe("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw kn.create("app-deleted",{appName:this._name})}};var Ai=ZP;function eg(e,t={}){let n=e;typeof t!="object"&&(t={name:t});let r=Object.assign({name:Yp,automaticDataCollectionEnabled:!0},t),i=r.name;if(typeof i!="string"||!i)throw kn.create("bad-app-name",{appName:String(i)});if(n||(n=Fp()),!n)throw kn.create("no-options");let o=hs.get(i);if(o){if(Ir(n,o.options)&&Ir(r,o.config))return o;throw kn.create("duplicate-app",{appName:i})}let s=new fs(i);for(let c of Zp.values())s.addComponent(c);let a=new Qp(n,r,s);return hs.set(i,a),a}function Ni(e=Yp){let t=hs.get(e);if(!t&&e===Yp&&Fp())return eg();if(!t)throw kn.create("no-app",{appName:e});return t}function Fl(){return Array.from(hs.values())}function se(e,t,n){var r;let i=(r=QP[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${t}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),cn.warn(a.join(" "));return}Tt(new Oe(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}var ex="firebase-heartbeat-database",tx=1,ps="firebase-heartbeat-store",Gp=null;function QC(){return Gp||(Gp=zC(ex,tx,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(ps)}catch(n){console.warn(n)}}}}).catch(e=>{throw kn.create("idb-open",{originalErrorMessage:e.message})})),Gp}function nx(e){return m(this,null,function*(){try{let n=(yield QC()).transaction(ps),r=yield n.objectStore(ps).get(JC(e));return yield n.done,r}catch(t){if(t instanceof Ut)cn.warn(t.message);else{let n=kn.create("idb-get",{originalErrorMessage:t?.message});cn.warn(n.message)}}})}function KC(e,t){return m(this,null,function*(){try{let r=(yield QC()).transaction(ps,"readwrite");yield r.objectStore(ps).put(t,JC(e)),yield r.done}catch(n){if(n instanceof Ut)cn.warn(n.message);else{let r=kn.create("idb-set",{originalErrorMessage:n?.message});cn.warn(r.message)}}})}function JC(e){return`${e.name}!${e.options.appId}`}var rx=1024,ix=30,Jp=class{constructor(t){this.container=t,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Xp(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return m(this,null,function*(){var t,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=YC();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>ix){let s=sx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){cn.warn(r)}})}getHeartbeatsHeader(){return m(this,null,function*(){var t;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=YC(),{heartbeatsToSend:r,unsentEntries:i}=ox(this._heartbeatsCache.heartbeats),o=as(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return cn.warn(n),""}})}};function YC(){return new Date().toISOString().substring(0,10)}function ox(e,t=rx){let n=[],r=e.slice();for(let i of e){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),ZC(n)>t){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ZC(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Xp=class{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return m(this,null,function*(){return Ol()?kC().then(()=>!0).catch(()=>!1):!1})}read(){return m(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield nx(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(t){return m(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return KC(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return})}add(t){return m(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return KC(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return})}};function ZC(e){return as(JSON.stringify({version:2,heartbeats:e})).length}function sx(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}function ax(e){Tt(new Oe("platform-logger",t=>new qp(t),"PRIVATE")),Tt(new Oe("heartbeat",t=>new Jp(t),"PRIVATE")),se(Kp,GC,e),se(Kp,GC,"esm2017"),se("fire-js","")}ax("");var cx="firebase",lx="11.10.0";se(cx,lx,"app");function XC(e){e===void 0&&(e=g(pe));let t=e.get(bn);return n=>new P(r=>{let i=t.add(),o=!1;function s(){o||(i(),o=!0)}let a=n.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Tr=new Ti("ANGULARFIRE2_VERSION");function Ul(e,t,n){if(t){if(t.length===1)return t[0];let o=t.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(e).getImmediate({optional:!0})}var Oi=(e,t)=>{let n=t?[t]:Fl(),r=[];return n.forEach(i=>{i.container.getProvider(e).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Mi=function(e){return e[e.SILENT=0]="SILENT",e[e.WARN=1]="WARN",e[e.VERBOSE=2]="VERBOSE",e}(Mi||{}),eT=up()&&typeof Zone<"u"?Mi.WARN:Mi.SILENT;var jl=class{zone;delegate;constructor(t,n=Ed){this.zone=t,this.delegate=n}now(){return this.delegate.now()}schedule(t,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{t.apply(this,[s])}):t.apply(this,[s])};return this.delegate.schedule(o,n,r)}},Dr=(()=>{class e{outsideAngular;insideAngular;constructor(){let n=g(Y);this.outsideAngular=n.runOutsideAngular(()=>new jl(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new jl(typeof Zone>"u"?void 0:Zone.current,_d))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),tT=!1;function ux(e,t){!tT&&(eT>Mi.SILENT||up())&&(tT=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),eT>=t&&console.warn(`Firebase API called outside injection context: ${e.name}`)}function dx(e){let t=g(Y,{optional:!0});return t?t.runOutsideAngular(()=>e()):e()}function Cr(e){let t=g(Y,{optional:!0});return t?t.run(()=>e()):e()}var fx=(e,t,n)=>(...r)=>(t&&setTimeout(t,0),ue(n,()=>Cr(()=>e.apply(void 0,r)))),Pn=(e,t,n)=>(n||=t?Mi.WARN:Mi.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=g(Dr),s=g(bn),a=g(ce)}catch{return ux(e,n),e.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(t&&(r||=Cr(()=>s.add())),i[l]=fx(i[l],r,a));let c=dx(()=>e.apply(this,i));return t?c instanceof P?c.pipe(yn(o.outsideAngular),vn(o.insideAngular),XC(a)):c instanceof Promise?Cr(()=>{let l=s.add();return new Promise((u,d)=>{c.then(f=>ue(a,()=>Cr(()=>u(f))),f=>ue(a,()=>Cr(()=>d(f)))).finally(l)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:Cr(()=>c):c instanceof P?c.pipe(yn(o.outsideAngular),vn(o.insideAngular)):Cr(()=>c)});var br=class{constructor(t){return t}},gs=class{constructor(){return Fl()}};function hx(e){return e&&e.length===1?e[0]:new br(Ni())}var tg=new I("angularfire2._apps"),px={provide:br,useFactory:hx,deps:[[new xt,tg]]},gx={provide:gs,deps:[[new xt,tg]]};function mx(e){return(t,n)=>{let r=n.get(st);se("angularfire",Tr.full,"core"),se("angularfire",Tr.full,"app"),se("angular",Gw.full,r.toString());let i=t.runOutsideAngular(()=>e(n));return new br(i)}}function nT(e,...t){return Xe([px,gx,{provide:tg,useFactory:mx(e),multi:!0,deps:[Y,pe,Dr,...t]}])}var rT=Pn(eg,!0);var vx=new Map,yx={activated:!1,tokenObservers:[]},_x={initialized:!1,enabled:!1};function Dt(e){return vx.get(e)||Object.assign({},yx)}function aT(){return _x}var Ex="https://content-firebaseappcheck.googleapis.com/v1";var Ix="exchangeDebugToken",iT={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},V7=24*60*60*1e3;var ig=class{constructor(t,n,r,i,o){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){return m(this,null,function*(){this.stop();try{this.pending=new jt,this.pending.promise.catch(n=>{}),yield wx(this.getNextRun(t)),this.pending.resolve(),yield this.pending.promise,this.pending=new jt,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function wx(e){return new Promise(t=>{setTimeout(t,e)})}var Cx={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},xn=new It("appCheck","AppCheck",Cx);function cT(e){if(!Dt(e).activated)throw xn.create("use-before-activation",{appName:e.name})}function lT(r,i){return m(this,arguments,function*({url:e,body:t},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let h=yield s.getHeartbeatsHeader();h&&(o["X-Firebase-Client"]=h)}let a={method:"POST",body:JSON.stringify(t),headers:o},c;try{c=yield fetch(e,a)}catch(h){throw xn.create("fetch-network-error",{originalErrorMessage:h?.message})}if(c.status!==200)throw xn.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(h){throw xn.create("fetch-parse-error",{originalErrorMessage:h?.message})}let u=l.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw xn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let d=Number(u[1])*1e3,f=Date.now();return{token:l.token,expireTimeMillis:f+d,issuedAtTimeMillis:f}})}function uT(e,t){let{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${Ex}/projects/${n}/apps/${r}:${Ix}?key=${i}`,body:{debug_token:t}}}var Tx="firebase-app-check-database",Dx=1,og="firebase-app-check-store";var Vl=null;function bx(){return Vl||(Vl=new Promise((e,t)=>{try{let n=indexedDB.open(Tx,Dx);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(xn.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(og,{keyPath:"compositeKey"})}}}catch(n){t(xn.create("storage-open",{originalErrorMessage:n?.message}))}}),Vl)}function Sx(e,t){return Rx(Ax(e),t)}function Rx(e,t){return m(this,null,function*(){let r=(yield bx()).transaction(og,"readwrite"),o=r.objectStore(og).put({compositeKey:e,value:t});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(xn.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function Ax(e){return`${e.options.appId}-${e.name}`}var ms=new Ht("@firebase/app-check");function ng(e,t){return Ol()?Sx(e,t).catch(n=>{ms.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function dT(){return aT().enabled}function fT(){return m(this,null,function*(){let e=aT();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var Nx={error:"UNKNOWN_ERROR"};function Mx(e){return Ri.encodeString(JSON.stringify(e),!1)}function sg(e,t=!1,n=!1){return m(this,null,function*(){let r=e.app;cT(r);let i=Dt(r),o=i.token,s;if(o&&!vs(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(vs(l)?o=l:yield ng(r,void 0))}if(!t&&o&&vs(o))return{token:o.token};let a=!1;if(dT())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=lT(uT(r,yield fT()),e.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield ng(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?ms.warn(l.message):n&&ms.error(l),rg(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield Dt(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?ms.warn(l.message):n&&ms.error(l),s=l}let c;return o?s?vs(o)?c={token:o.token,internalError:s}:c=rg(s):(c={token:o.token},i.token=o,yield ng(r,o)):c=rg(s),a&&xx(r,c),c})}function Ox(e){return m(this,null,function*(){let t=e.app;cT(t);let{provider:n}=Dt(t);if(dT()){let r=yield fT(),{token:i}=yield lT(uT(t,r),e.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function kx(e,t,n,r){let{app:i}=e,o=Dt(i),s={next:n,error:r,type:t};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&vs(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),oT(e)}).catch(()=>{})}o.cachedTokenPromise.then(()=>oT(e))}function hT(e,t){let n=Dt(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function oT(e){let{app:t}=e,n=Dt(t),r=n.tokenRefresher;r||(r=Px(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Px(e){let{app:t}=e;return new ig(()=>m(null,null,function*(){let n=Dt(t),r;if(n.token?r=yield sg(e,!0):r=yield sg(e),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=Dt(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},iT.RETRIAL_MIN_WAIT,iT.RETRIAL_MAX_WAIT)}function xx(e,t){let n=Dt(e).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function vs(e){return e.expireTimeMillis-Date.now()>0}function rg(e){return{token:Mx(Nx),error:e}}var ag=class{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:t}=Dt(this.app);for(let n of t)hT(this.app,n.next);return Promise.resolve()}};function Lx(e,t){return new ag(e,t)}function Fx(e){return{getToken:t=>sg(e,t),getLimitedUseToken:()=>Ox(e),addTokenListener:t=>kx(e,"INTERNAL",t),removeTokenListener:t=>hT(e.app,t)}}var jx="@firebase/app-check",Ux="0.10.1";var Vx="app-check",sT="app-check-internal";function Bx(){Tt(new Oe(Vx,e=>{let t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return Lx(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(sT).initialize()})),Tt(new Oe(sT,e=>{let t=e.getProvider("app-check").getImmediate();return Fx(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),se(jx,Ux)}Bx();var Hx="app-check";var Bl=class{constructor(){return Oi(Hx)}};var $x=["localhost","0.0.0.0","127.0.0.1"],X7=typeof window<"u"&&$x.includes(window.location.hostname);function IT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var wT=IT,CT=new It("auth","Firebase",IT());var zl=new Ht("@firebase/auth");function Wx(e,...t){zl.logLevel<=Z.WARN&&zl.warn(`Auth (${Ai}): ${e}`,...t)}function $l(e,...t){zl.logLevel<=Z.ERROR&&zl.error(`Auth (${Ai}): ${e}`,...t)}function pT(e,...t){throw _g(e,...t)}function yg(e,...t){return _g(e,...t)}function TT(e,t,n){let r=Object.assign(Object.assign({},wT()),{[t]:n});return new It("auth","Firebase",r).create(t,{appName:e.name})}function Wl(e){return TT(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _g(e,...t){if(typeof e!="string"){let n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return CT.create(e,...t)}function $(e,t,...n){if(!e)throw _g(t,...n)}function ys(e){let t="INTERNAL ASSERTION FAILED: "+e;throw $l(t),new Error(t)}function Gl(e,t){e||ys(t)}function zx(){return gT()==="http:"||gT()==="https:"}function gT(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}function Gx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zx()||OC()||"connection"in navigator)?navigator.onLine:!0}function qx(){if(typeof navigator>"u")return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}var Ar=class{constructor(t,n){this.shortDelay=t,this.longDelay=n,Gl(n>t,"Short delay should be less than long delay!"),this.isMobile=cs()||Ml()}get(){return Gx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Kx(e,t){Gl(e.emulator,"Emulator should always be set here");let{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}var ql=class{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ys("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ys("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ys("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Yx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Zx=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Qx=new Ar(3e4,6e4);function DT(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Jl(o,s,a,c){return m(this,arguments,function*(e,t,n,r,i={}){return bT(e,i,()=>m(null,null,function*(){let l={},u={};r&&(t==="GET"?u=r:l={body:JSON.stringify(r)});let d=us(Object.assign({key:e.config.apiKey},u)).slice(1),f=yield e._getAdditionalHeaders();f["Content-Type"]="application/json",e.languageCode&&(f["X-Firebase-Locale"]=e.languageCode);let h=Object.assign({method:t,headers:f},l);return MC()||(h.referrerPolicy="no-referrer"),e.emulatorConfig&&_r(e.emulatorConfig.host)&&(h.credentials="include"),ql.fetch()(yield ST(e,e.config.apiHost,n,d),h)}))})}function bT(e,t,n){return m(this,null,function*(){e._canInitEmulator=!1;let r=Object.assign(Object.assign({},Yx),t);try{let i=new ug(e),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Hl(e,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hl(e,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Hl(e,"email-already-in-use",s);if(c==="USER_DISABLED")throw Hl(e,"user-disabled",s);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw TT(e,u,l);pT(e,u)}}catch(i){if(i instanceof Ut)throw i;pT(e,"network-request-failed",{message:String(i)})}})}function ST(e,t,n,r){return m(this,null,function*(){let i=`${t}${n}?${r}`,o=e,s=o.config.emulator?Kx(e.config,i):`${e.config.apiScheme}://${i}`;return Zx.includes(n)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var ug=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(yg(this.auth,"network-request-failed")),Qx.get())})}};function Hl(e,t,n){let r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=yg(e,t,r);return i.customData._tokenResponse=n,i}function Jx(e,t){return m(this,null,function*(){return Jl(e,"POST","/v1/accounts:delete",t)})}function Kl(e,t){return m(this,null,function*(){return Jl(e,"POST","/v1/accounts:lookup",t)})}function _s(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}function Eg(e,t=!1){return m(this,null,function*(){let n=Ct(e),r=yield n.getIdToken(t),i=RT(r);$(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:_s(cg(i.auth_time)),issuedAtTime:_s(cg(i.iat)),expirationTime:_s(cg(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function cg(e){return Number(e)*1e3}function RT(e){let[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return $l("JWT malformed, contained fewer than 3 sections"),null;try{let i=bi(n);return i?JSON.parse(i):($l("Failed to decode base64 JWT payload"),null)}catch(i){return $l("Caught error parsing JWT payload as JSON",i?.toString()),null}}function mT(e){let t=RT(e);return $(t,"internal-error"),$(typeof t.exp<"u","internal-error"),$(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}function dg(e,t,n=!1){return m(this,null,function*(){if(n)return t;try{return yield t}catch(r){throw r instanceof Ut&&Xx(r)&&e.auth.currentUser===e&&(yield e.auth.signOut()),r}})}function Xx({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}var fg=class{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;let n=this.getInterval(t);this.timerId=setTimeout(()=>m(this,null,function*(){yield this.iteration()}),n)}iteration(){return m(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Is=class{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=_s(this.lastLoginAt),this.creationTime=_s(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Yl(e){return m(this,null,function*(){var t;let n=e.auth,r=yield e.getIdToken(),i=yield dg(e,Kl(n,{idToken:r}));$(i?.users.length,n,"internal-error");let o=i.users[0];e._notifyReloadListener(o);let s=!((t=o.providerUserInfo)===null||t===void 0)&&t.length?AT(o.providerUserInfo):[],a=eL(e.providerData,s),c=e.isAnonymous,l=!(e.email&&o.passwordHash)&&!a?.length,u=c?l:!1,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Is(o.createdAt,o.lastLoginAt),isAnonymous:u};Object.assign(e,d)})}function Ig(e){return m(this,null,function*(){let t=Ct(e);yield Yl(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})}function eL(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function AT(e){return e.map(t=>{var{providerId:n}=t,r=Id(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function tL(e,t){return m(this,null,function*(){let n=yield bT(e,{},()=>m(null,null,function*(){let r=us({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:o}=e.config,s=yield ST(e,i,"/v1/token",`key=${o}`),a=yield e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return e.emulatorConfig&&_r(e.emulatorConfig.host)&&(c.credentials="include"),ql.fetch()(s,c)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function nL(e,t){return m(this,null,function*(){return Jl(e,"POST","/v2/accounts:revokeToken",DT(e,t))})}var Es=class e{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){$(t.idToken,"internal-error"),$(typeof t.idToken<"u","internal-error"),$(typeof t.refreshToken<"u","internal-error");let n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):mT(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){$(t.length!==0,"internal-error");let n=mT(t);this.updateTokensAndExpiration(t,null,n)}getToken(t,n=!1){return m(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:($(this.refreshToken,t,"user-token-expired"),this.refreshToken?(yield this.refresh(t,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(t,n){return m(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield tL(t,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new e;return r&&($(typeof r=="string","internal-error",{appName:t}),s.refreshToken=r),i&&($(typeof i=="string","internal-error",{appName:t}),s.accessToken=i),o&&($(typeof o=="number","internal-error",{appName:t}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new e,this.toJSON())}_performRefresh(){return ys("not implemented")}};function Ln(e,t){$(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}var Sr=class e{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,o=Id(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fg(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Is(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(t){return m(this,null,function*(){let n=yield dg(this,this.stsTokenManager.getToken(this.auth,t));return $(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(t){return Eg(this,t)}reload(){return Ig(this)}_assign(t){this!==t&&($(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){let n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){$(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(t,n=!1){return m(this,null,function*(){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&(yield Yl(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return m(this,null,function*(){if(ln(this.auth.app))return Promise.reject(Wl(this.auth));let t=yield this.getIdToken();return yield dg(this,Jx(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,o,s,a,c,l,u;let d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,h=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,p=(s=n.photoURL)!==null&&s!==void 0?s:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,E=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,b=(l=n.createdAt)!==null&&l!==void 0?l:void 0,ne=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:ve,emailVerified:Nt,isAnonymous:oa,providerData:Ju,stsTokenManager:Av}=n;$(ve&&Av,t,"internal-error");let wS=Es.fromJSON(this.name,Av);$(typeof ve=="string",t,"internal-error"),Ln(d,t.name),Ln(f,t.name),$(typeof Nt=="boolean",t,"internal-error"),$(typeof oa=="boolean",t,"internal-error"),Ln(h,t.name),Ln(p,t.name),Ln(v,t.name),Ln(E,t.name),Ln(b,t.name),Ln(ne,t.name);let Xu=new e({uid:ve,auth:t,email:f,emailVerified:Nt,displayName:d,isAnonymous:oa,photoURL:p,phoneNumber:h,tenantId:v,stsTokenManager:wS,createdAt:b,lastLoginAt:ne});return Ju&&Array.isArray(Ju)&&(Xu.providerData=Ju.map(CS=>Object.assign({},CS))),E&&(Xu._redirectEventId=E),Xu}static _fromIdTokenResponse(t,n,r=!1){return m(this,null,function*(){let i=new Es;i.updateFromServerResponse(n);let o=new e({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return yield Yl(o),o})}static _fromGetAccountInfoResponse(t,n,r){return m(this,null,function*(){let i=n.users[0];$(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?AT(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Es;a.updateFromIdToken(r);let c=new e({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Is(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,l),c})}};var vT=new Map;function Rr(e){Gl(e instanceof Function,"Expected a class definition");let t=vT.get(e);return t?(Gl(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,vT.set(e,t),t)}var rL=(()=>{class e{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return m(this,null,function*(){return!0})}_set(n,r){return m(this,null,function*(){this.storage[n]=r})}_get(n){return m(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return m(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return e.type="NONE",e})(),hg=rL;function lg(e,t,n){return`firebase:${e}:${t}:${n}`}var Zl=class e{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=lg(this.userKey,i.apiKey,o),this.fullPersistenceKey=lg("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}getCurrentUser(){return m(this,null,function*(){let t=yield this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){let n=yield Kl(this.auth,{idToken:t}).catch(()=>{});return n?Sr._fromGetAccountInfoResponse(this.auth,n,t):null}return Sr._fromJSON(this.auth,t)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(t){return m(this,null,function*(){if(this.persistence===t)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(t,n,r="authUser"){return m(this,null,function*(){if(!n.length)return new e(Rr(hg),t,r);let i=(yield Promise.all(n.map(l=>m(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||Rr(hg),s=lg(r,t.config.apiKey,t.name),a=null;for(let l of n)try{let u=yield l._get(s);if(u){let d;if(typeof u=="string"){let f=yield Kl(t,{idToken:u}).catch(()=>{});if(!f)break;d=yield Sr._fromGetAccountInfoResponse(t,f,u)}else d=Sr._fromJSON(t,u);l!==o&&(a=d),o=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new e(o,t,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>m(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new e(o,t,r))})}};function yT(e){let t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(aL(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(iL(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(lL(t))return"Blackberry";if(uL(t))return"Webos";if(oL(t))return"Safari";if((t.includes("chrome/")||sL(t))&&!t.includes("edge/"))return"Chrome";if(cL(t))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if(r?.length===2)return r[1]}return"Other"}function iL(e=wt()){return/firefox\//i.test(e)}function oL(e=wt()){let t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function sL(e=wt()){return/crios\//i.test(e)}function aL(e=wt()){return/iemobile/i.test(e)}function cL(e=wt()){return/android/i.test(e)}function lL(e=wt()){return/blackberry/i.test(e)}function uL(e=wt()){return/webos/i.test(e)}function NT(e,t=[]){let n;switch(e){case"Browser":n=yT(wt());break;case"Worker":n=`${yT(wt())}-${e}`;break;default:n=e}let r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ai}/${r}`}var pg=class{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){let r=o=>new Promise((s,a)=>{try{let c=t(o);s(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(t){return m(this,null,function*(){if(this.auth.currentUser===t)return;let n=[];try{for(let r of this.queue)yield r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function dL(n){return m(this,arguments,function*(e,t={}){return Jl(e,"GET","/v2/passwordPolicy",DT(e,t))})}var fL=6,gg=class{constructor(t){var n,r,i,o;let s=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:fL,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=t.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,c),this.validatePasswordCharacterOptions(t,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(t,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}};var mg=class{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ql(this),this.idTokenSubscription=new Ql(this),this.beforeStateQueue=new pg(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=CT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Rr(n)),this._initializationPromise=this.queue(()=>m(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield Zl.create(this,t),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return m(this,null,function*(){if(this._deleted)return;let t=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(t,!0)}})}initializeCurrentUserFromIdToken(t){return m(this,null,function*(){try{let n=yield Kl(this,{idToken:t}),r=yield Sr._fromGetAccountInfoResponse(this,n,t);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(t){return m(this,null,function*(){var n;if(ln(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(t&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(t);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return $(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(t){return m(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(t){return m(this,null,function*(){try{yield Yl(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)})}useDeviceLanguage(){this.languageCode=qx()}_delete(){return m(this,null,function*(){this._deleted=!0})}updateCurrentUser(t){return m(this,null,function*(){if(ln(this.app))return Promise.reject(Wl(this));let n=t?Ct(t):null;return n&&$(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(t,n=!1){return m(this,null,function*(){if(!this._deleted)return t&&$(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(t)),this.queue(()=>m(this,null,function*(){yield this.directlySetCurrentUser(t),this.notifyAuthListeners()}))})}signOut(){return m(this,null,function*(){return ln(this.app)?Promise.reject(Wl(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(t){return ln(this.app)?Promise.reject(Wl(this)):this.queue(()=>m(this,null,function*(){yield this.assertedPersistence.setPersistence(Rr(t))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(t){return m(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return m(this,null,function*(){let t=yield dL(this),n=new gg(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new It("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{let r=this.onAuthStateChanged(()=>{r(),t()},n)}})}revokeAccessToken(t){return m(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield nL(this,r)}})}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}_setRedirectUser(t,n){return m(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)})}getOrInitRedirectPersistenceManager(t){return m(this,null,function*(){if(!this.redirectPersistenceManager){let n=t&&Rr(t)||this._popupRedirectResolver;$(n,this,"argument-error"),this.redirectPersistenceManager=yield Zl.create(this,[Rr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(t){return m(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>m(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null})}_persistUserIfCurrent(t){return m(this,null,function*(){if(t===this.currentUser)return this.queue(()=>m(this,null,function*(){return this.directlySetCurrentUser(t)}))})}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if($(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let c=t.addObserver(n,r,i);return()=>{s=!0,c()}}else{let c=t.addObserver(n);return()=>{s=!0,c()}}}directlySetCurrentUser(t){return m(this,null,function*(){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?yield this.assertedPersistence.setCurrentUser(t):yield this.assertedPersistence.removeCurrentUser()})}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return $(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=NT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return m(this,null,function*(){var t;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return m(this,null,function*(){var t;if(ln(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=yield(t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken();return n?.error&&Wx(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function hL(e){return Ct(e)}var Ql=class{constructor(t){this.auth=t,this.observer=null,this.addObserver=FC(n=>this.observer=n)}get next(){return $(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var pL={loadJS(){return m(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function gL(e){pL=e}function mL(e){return`__${e}${Math.floor(Math.random()*1e6)}`}function vL(e,t){let n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Rr);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}var dZ=mL("rcb"),fZ=new Ar(3e4,6e4);var hZ=new Ar(2e3,1e4);var pZ=10*60*1e3;var gZ=new Ar(3e4,6e4);var mZ=new Ar(5e3,15e3);var vZ=encodeURIComponent("fac");var _T="@firebase/auth",ET="1.10.8";var vg=class{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}getToken(t){return m(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(t)}:null})}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;let n=this.auth.onIdTokenChanged(r=>{t(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();let n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){$(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function yL(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _L(e){Tt(new Oe("auth",(t,{options:n})=>{let r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;$(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:NT(e)},l=new mg(r,i,o,c);return vL(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),Tt(new Oe("auth-internal",t=>{let n=hL(t.getProvider("auth").getImmediate());return(r=>new vg(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),se(_T,ET,yL(e)),se(_T,ET,"esm2017")}var EL=5*60,yZ=AC("authIdTokenMaxAge")||EL;function IL(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}gL({loadJS(e){return new Promise((t,n)=>{let r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{let o=yg("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",IL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_L("Browser");var _1="auth";var Xl=class{constructor(){return Oi(_1)}};var MT="@firebase/database",OT="1.0.20";var bm="";function E1(e){bm=e}var Ag=class{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),ge(n))}get(t){let n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:Si(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}};var Ng=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return Bt(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}};var dD=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){let t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Ag(t)}}catch{}return new Ng},Mr=dD("localStorage"),Mg=dD("sessionStorage");var Li=new Ht("@firebase/database"),I1=function(){let e=1;return function(){return e++}}(),fD=function(e){let t=jC(e),n=new Nl;n.update(t);let r=n.digest();return Ri.encodeByteArray(r)},js=function(...e){let t="";for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?t+=js.apply(null,r):typeof r=="object"?t+=ge(r):t+=r,t+=" "}return t},Or=null,kT=!0,w1=function(e,t){y(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(Li.logLevel=Z.VERBOSE,Or=Li.log.bind(Li),t&&Mg.set("logging_enabled",!0)):typeof e=="function"?Or=e:(Or=null,Mg.remove("logging_enabled"))},Se=function(...e){if(kT===!0&&(kT=!1,Or===null&&Mg.get("logging_enabled")===!0&&w1(!0)),Or){let t=js.apply(null,e);Or(t)}},Us=function(e){return function(...t){Se(e,...t)}},Og=function(...e){let t="FIREBASE INTERNAL ERROR: "+js(...e);Li.error(t)},un=function(...e){let t=`FIREBASE FATAL ERROR: ${js(...e)}`;throw Li.error(t),new Error(t)},Ze=function(...e){let t="FIREBASE WARNING: "+js(...e);Li.warn(t)},C1=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ze("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},hD=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},T1=function(e){if(Vt()||document.readyState==="complete")e();else{let t=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ui="[MIN_NAME]",kr="[MAX_NAME]",Gi=function(e,t){if(e===t)return 0;if(e===Ui||t===kr)return-1;if(t===Ui||e===kr)return 1;{let n=PT(e),r=PT(t);return n!==null?r!==null?n-r===0?e.length-t.length:n-r:-1:r!==null?1:e<t?-1:1}},D1=function(e,t){return e===t?0:e<t?-1:1},ws=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+ge(t))},Sm=function(e){if(typeof e!="object"||e===null)return ge(e);let t=[];for(let r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)r!==0&&(n+=","),n+=ge(t[r]),n+=":",n+=Sm(e[t[r]]);return n+="}",n},pD=function(e,t){let n=e.length;if(n<=t)return[e];let r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Ve(e,t){for(let n in e)e.hasOwnProperty(n)&&t(n,e[n])}var gD=function(e){y(!hD(e),"Invalid JSON number");let t=11,n=52,r=(1<<t-1)-1,i,o,s,a,c;e===0?(o=0,s=0,i=1/e===-1/0?1:0):(i=e<0,e=Math.abs(e),e>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(e)/Math.LN2),r),o=a+r,s=Math.round(e*Math.pow(2,n-a)-Math.pow(2,n))):(o=0,s=Math.round(e/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);for(c=t;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);l.push(i?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let f=parseInt(u.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},b1=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},S1=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function R1(e,t){let n="Unknown Error";e==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?n="Client doesn't have permission to access the desired data.":e==="unavailable"&&(n="The service is unavailable");let r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}var A1=new RegExp("^-?(0*)\\d{1,10}$"),N1=-2147483648,M1=2147483647,PT=function(e){if(A1.test(e)){let t=Number(e);if(t>=N1&&t<=M1)return t}return null},Vs=function(e){try{e()}catch(t){setTimeout(()=>{let n=t.stack||"";throw Ze("Exception was thrown by user callback.",n),t},Math.floor(0))}},O1=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ss=function(e,t){let n=setTimeout(e,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var kg=class{constructor(t,n){this.appCheckProvider=n,this.appName=t.name,ln(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(t))}notifyForInvalidToken(){Ze(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}};var Pg=class{constructor(t,n,r){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?(Se("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ze(t)}},Rs=(()=>{class e{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}e.OWNER="owner";return e})(),tu="5",mD="v",vD="s",yD="r",_D="f",ED=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ID="ls",wD="p",xg="ac",CD="websocket",TD="long_polling";var nu=class{constructor(t,n,r,i,o=!1,s="",a=!1,c=!1,l=null){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this.emulatorOptions=l,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Mr.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Mr.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){let t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}};function k1(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function DD(e,t,n){y(typeof t=="string","typeof type must == string"),y(typeof n=="object","typeof params must == object");let r;if(t===CD)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===TD)r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);k1(e)&&(n.ns=e.namespace);let i=[];return Ve(n,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}var Lg=class{constructor(){this.counters_={}}incrementCounter(t,n=1){Bt(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return TC(this.counters_)}};var wg={},Cg={};function Rm(e){let t=e.toString();return wg[t]||(wg[t]=new Lg),wg[t]}function P1(e,t){let n=e.toString();return Cg[n]||(Cg[n]=t()),Cg[n]}var Fg=class{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Vs(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var xT="start",x1="close",L1="pLPCommand",F1="pRTLPCB",bD="id",SD="pw",RD="ser",j1="cb",U1="seg",V1="ts",B1="d",H1="dframe",AD=1870,ND=30,$1=AD-ND,W1=25e3,z1=3e4,jg=class e{constructor(t,n,r,i,o,s,a){this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Us(t),this.stats_=Rm(n),this.urlFn=c=>(this.appCheckToken&&(c[xg]=this.appCheckToken),DD(n,TD,c))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Fg(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(z1)),T1(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ug((...o)=>{let[s,a,c,l,u]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===xT)this.id=a,this.password=c;else if(s===x1)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[xT]="t",r[RD]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[j1]=this.scriptTagHolder.uniqueCallbackIdentifier),r[mD]=tu,this.transportSessionId&&(r[vD]=this.transportSessionId),this.lastSessionId&&(r[ID]=this.lastSessionId),this.applicationId&&(r[wD]=this.applicationId),this.appCheckToken&&(r[xg]=this.appCheckToken),typeof location<"u"&&location.hostname&&ED.test(location.hostname)&&(r[yD]=_D);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){e.forceAllow_=!0}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){return Vt()?!1:e.forceAllow_?!0:!e.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!b1()&&!S1()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){let n=ge(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=xp(n),i=pD(r,$1);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(t,n){if(Vt())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[H1]="t",r[bD]=t,r[SD]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){let n=ge(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},Ug=class e{constructor(t,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Vt())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=I1(),window[L1+this.uniqueCallbackIdentifier]=t,window[F1+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){Se("frame writing exception"),a.stack&&Se(a.stack),Se(a)}}}static createIFrame_(){let t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||Se("No IE domain setting required")}catch{let r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let t={};t[bD]=this.myID,t[SD]=this.myPW,t[RD]=this.currentSerial;let n=this.urlFn(t),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+ND+r.length<=AD;){let s=this.pendingSegs.shift();r=r+"&"+U1+i+"="+s.seg+"&"+V1+i+"="+s.ts+"&"+B1+i+"="+s.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,r){this.pendingSegs.push({seg:t,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(W1)),o=()=>{clearTimeout(i),r()};this.addTag(t,o)}addTag(t,n){Vt()?this.doNodeLongPoll(t,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Se("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var G1=16384,q1=45e3,ru=null;typeof MozWebSocket<"u"?ru=MozWebSocket:typeof WebSocket<"u"&&(ru=WebSocket);var Cs=(()=>{class e{constructor(n,r,i,o,s,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Us(this.connId),this.stats_=Rm(r),this.connURL=e.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,o,s){let a={};return a[mD]=tu,!Vt()&&typeof location<"u"&&location.hostname&&ED.test(location.hostname)&&(a[yD]=_D),r&&(a[vD]=r),i&&(a[ID]=i),o&&(a[xg]=o),s&&(a[wD]=s),DD(n,CD,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Mr.set("previous_websocket_failure",!0);try{let i;if(Vt()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${tu}/${bm}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new ru(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&ru!==null&&!e.forceDisallow_}static previouslyFailed(){return Mr.isInMemoryStorage||Mr.get("previous_websocket_failure")===!0}markConnectionHealthy(){Mr.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Si(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(y(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=ge(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=pD(r,G1);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(q1))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4;return e})(),K1=(()=>{class e{static get ALL_TRANSPORTS(){return[jg,Cs]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(n){this.initTransports_(n)}initTransports_(n){let r=Cs&&Cs.isAvailable(),i=r&&!Cs.previouslyFailed();if(n.webSocketOnly&&(r||Ze("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Cs];else{let o=this.transports_=[];for(let s of e.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);e.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}e.globalTransportInitialized_=!1;return e})(),Y1=6e4,Z1=5e3,Q1=10*1024,J1=100*1024,Tg="t",LT="d",X1="s",FT="r",eF="e",jT="o",UT="a",VT="n",BT="p",tF="h",Vg=class{constructor(t,n,r,i,o,s,a,c,l,u){this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Us("c:"+this.id+":"),this.transportManager_=new K1(n),this.log_("Connection created"),this.start_()}start_(){let t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ss(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>J1?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Q1?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){let n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(Tg in t){let n=t[Tg];n===UT?this.upgradeIfSecondaryHealthy_():n===FT?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===jT&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){let n=ws("t",t),r=ws("d",t);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:BT,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:UT,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:VT,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){let n=ws("t",t),r=ws("d",t);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){let n=ws(Tg,t);if(LT in t){let r=t[LT];if(n===tF){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===VT){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===X1?this.onConnectionShutdown_(r):n===FT?this.onReset_(r):n===eF?Og("Server Error: "+r):n===jT?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Og("Unknown control packet command: "+n)}}onHandshake_(t){let n=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),tu!==r&&Ze("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Ss(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Y1))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ss(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Z1))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:BT,d:{}}}))}onSecondaryConnectionLost_(){let t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Mr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var iu=class{put(t,n,r,i){}merge(t,n,r,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,r){}onDisconnectMerge(t,n,r){}onDisconnectCancel(t,n){}reportStats(t){}};var ou=class{constructor(t){this.allowedEvents_=t,this.listeners_={},y(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){let r=[...this.listeners_[t]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(t,n,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:r});let i=this.getInitialEvent(t);i&&n.apply(r,i)}off(t,n,r){this.validateEventType_(t);let i=this.listeners_[t]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(t){y(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}};var su=class e extends ou{static getInstance(){return new e}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!cs()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return y(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}};var HT=32,$T=768,Q=class{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}};function W(){return new Q("")}function F(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function jn(e){return e.pieces_.length-e.pieceNum_}function X(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new Q(e.pieces_,t)}function MD(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function nF(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function OD(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function kD(e){if(e.pieceNum_>=e.pieces_.length)return null;let t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Q(t,0)}function me(e,t){let n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Q)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{let r=t.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Q(n,0)}function j(e){return e.pieceNum_>=e.pieces_.length}function Ue(e,t){let n=F(e),r=F(t);if(n===null)return t;if(n===r)return Ue(X(e),X(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Am(e,t){if(jn(e)!==jn(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function St(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(jn(e)>jn(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Bg=class{constructor(t,n){this.errorPrefix_=n,this.parts_=OD(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=ds(this.parts_[r]);PD(this)}};function rF(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=ds(t),PD(e)}function iF(e){let t=e.parts_.pop();e.byteLength_-=ds(t),e.parts_.length>0&&(e.byteLength_-=1)}function PD(e){if(e.byteLength_>$T)throw new Error(e.errorPrefix_+"has a key path longer than "+$T+" bytes ("+e.byteLength_+").");if(e.parts_.length>HT)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+HT+") or object contains a cycle "+Nr(e))}function Nr(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}var Hg=class e extends ou{static getInstance(){return new e}constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(t){return y(t==="visible","Unknown event type: "+t),[this.visible_]}};var Ts=1e3,oF=60*5*1e3,WT=30*1e3,sF=1.3,aF=3e4,cF="server_kill",zT=3,Nm=(()=>{class e extends iu{constructor(n,r,i,o,s,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=e.nextPersistentConnectionId_++,this.log_=Us("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ts,this.maxReconnectDelay_=oF,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Vt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Hg.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&su.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let o=++this.requestNumber_,s={r:o,a:n,b:r};this.log_(ge(s)),y(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(n){this.initConnection_();let r=new jt,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(n,r,i,o){this.initConnection_();let s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),y(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),y(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let c={onComplete:o,hashFn:r,query:n,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let s={p:i},a="q";n.tag&&(s.q=r._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest(a,s,c=>{let l=c.d,u=c.s;e.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(o))===n&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,o),n.onComplete&&n.onComplete(u,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&Bt(n,"w")){let i=Er(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();Ze(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||LC(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=WT)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=xC(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let s=o.s,a=o.d||"error";this.authToken_===n&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),y(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,n._queryObject,r)}sendUnlisten_(n,r,i,o){this.log_("Unlisten on "+n+" for "+r);let s={p:n},a="n";o&&(s.q=i,s.t=o),this.sendRequest(a,s)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,o){let s={p:r,d:i};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,r,i,o){this.putInternal("p",n,r,i,o)}merge(n,r,i,o){this.putInternal("m",n,r,i,o)}putInternal(n,r,i,o,s){this.initConnection_();let a={p:r,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+ge(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):Og("Unrecognized action received from server: "+ge(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){y(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ts,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Ts,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>aF&&(this.reconnectDelay_=Ts),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_),r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*sF)}this.onConnectStatus_(!1)}establishConnection_(){return m(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+e.nextConnectionId_++,s=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(f){y(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[f,h]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?Se("getToken() completed but was canceled"):(Se("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=h&&h.token,c=new Vg(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,p=>{Ze(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(cF)},s))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&Ze(f),l())}}})}interrupt(n){Se("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Se("Resuming connection for reason: "+n),delete this.interruptReasons_[n],kl(this.interruptReasons_)&&(this.reconnectDelay_=Ts,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(s=>Sm(s)).join("$"):i="default";let o=this.removeListen_(n,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,r){let i=new Q(n).toString(),o;if(this.listens.has(i)){let s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(n,r){Se("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=zT&&(this.reconnectDelay_=WT,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){Se("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=zT&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";Vt()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+bm.replace(/\./g,"-")]=1,cs()?n["framework.cordova"]=1:Ml()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=su.getInstance().currentlyOnline();return kl(this.interruptReasons_)&&n}}e.nextPersistentConnectionId_=0,e.nextConnectionId_=0;return e})(),L=class e{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new e(t,n)}};var Vi=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){let r=new L(Ui,t),i=new L(Ui,n);return this.compare(r,i)!==0}minPost(){return L.MIN}};var eu,au=class extends Vi{static get __EMPTY_NODE(){return eu}static set __EMPTY_NODE(t){eu=t}compare(t,n){return Gi(t.name,n.name)}isDefinedOn(t){throw yr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return L.MIN}maxPost(){return new L(kr,eu)}makePost(t,n){return y(typeof t=="string","KeyIndex indexValue must always be a string."),new L(t,eu)}toString(){return".key"}},Fi=new au;var Pi=class{constructor(t,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!t.isEmpty();)if(t=t,s=n?r(t.key,n):1,i&&(s*=-1),s<0)this.isReverse_?t=t.left:t=t.right;else if(s===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}},bt=(()=>{class e{constructor(n,r,i,o,s){this.key=n,this.value=r,this.color=i??e.RED,this.left=o??ut.EMPTY_NODE,this.right=s??ut.EMPTY_NODE}copy(n,r,i,o,s){return new e(n??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let o=this,s=i(n,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(n,r,i),null):s===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(n,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return ut.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,o;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return ut.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return e.RED=!0,e.BLACK=!1,e})(),$g=class{copy(t,n,r,i,o){return this}insert(t,n,r){return new bt(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},ut=class e{constructor(t,n=e.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,bt.BLACK,null,null))}remove(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,bt.BLACK,null,null))}get(t){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(t,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(t){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(t,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Pi(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new Pi(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new Pi(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new Pi(this.root_,null,this.comparator_,!0,t)}};ut.EMPTY_NODE=new $g;function lF(e,t){return Gi(e.name,t.name)}function Mm(e,t){return Gi(e,t)}var Wg;function uF(e){Wg=e}var xD=function(e){return typeof e=="number"?"number:"+gD(e):"string:"+e},LD=function(e){if(e.isLeafNode()){let t=e.val();y(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Bt(t,".sv"),"Priority must be a string or number.")}else y(e===Wg||e.isEmpty(),"priority of unexpected type.");y(e===Wg||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var GT,Bi=(()=>{class e{static set __childrenNodeConstructor(n){GT=n}static get __childrenNodeConstructor(){return GT}constructor(n,r=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,y(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),LD(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new e(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return j(n)?this:F(n)===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=F(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(y(i!==".priority"||jn(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(X(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+xD(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=gD(this.value_):n+=this.value_,this.lazyHash_=fD(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===e.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof e.__childrenNodeConstructor?-1:(y(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,o=e.VALUE_TYPE_ORDER.indexOf(r),s=e.VALUE_TYPE_ORDER.indexOf(i);return y(o>=0,"Unknown leaf type: "+r),y(s>=0,"Unknown leaf type: "+i),o===s?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}e.VALUE_TYPE_ORDER=["object","boolean","number","string"];return e})(),FD,jD;function dF(e){FD=e}function fF(e){jD=e}var zg=class extends Vi{compare(t,n){let r=t.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return o===0?Gi(t.name,n.name):o}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return L.MIN}maxPost(){return new L(kr,new Bi("[PRIORITY-POST]",jD))}makePost(t,n){let r=FD(t);return new L(n,new Bi("[PRIORITY-POST]",r))}toString(){return".priority"}},ie=new zg;var hF=Math.log(2),Gg=class{constructor(t){let n=o=>parseInt(Math.log(o)/hF,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;let i=r(this.count);this.bits_=t+1&i}nextBitIsOne(){let t=!(this.bits_&1<<this.current_);return this.current_--,t}},cu=function(e,t,n,r){e.sort(t);let i=function(c,l){let u=l-c,d,f;if(u===0)return null;if(u===1)return d=e[c],f=n?n(d):d,new bt(f,d.node,bt.BLACK,null,null);{let h=parseInt(u/2,10)+c,p=i(c,h),v=i(h+1,l);return d=e[h],f=n?n(d):d,new bt(f,d.node,bt.BLACK,p,v)}},o=function(c){let l=null,u=null,d=e.length,f=function(p,v){let E=d-p,b=d;d-=p;let ne=i(E+1,b),ve=e[E],Nt=n?n(ve):ve;h(new bt(Nt,ve.node,v,null,ne))},h=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){let v=c.nextBitIsOne(),E=Math.pow(2,c.count-(p+1));v?f(E,bt.BLACK):(f(E,bt.BLACK),f(E,bt.RED))}return u},s=new Gg(e.length),a=o(s);return new ut(r||t,a)};var Dg,ki={},Hi=class e{static get Default(){return y(ki&&ie,"ChildrenNode.ts has not been loaded"),Dg=Dg||new e({".priority":ki},{".priority":ie}),Dg}constructor(t,n){this.indexes_=t,this.indexSet_=n}get(t){let n=Er(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof ut?n:null}hasIndex(t){return Bt(this.indexSet_,t.toString())}addIndex(t,n){y(t!==Fi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=n.getIterator(L.Wrap),s=o.getNext();for(;s;)i=i||t.isDefinedOn(s.node),r.push(s),s=o.getNext();let a;i?a=cu(r,t.getCompare()):a=ki;let c=t.toString(),l=Object.assign({},this.indexSet_);l[c]=t;let u=Object.assign({},this.indexes_);return u[c]=a,new e(u,l)}addToIndexes(t,n){let r=ls(this.indexes_,(i,o)=>{let s=Er(this.indexSet_,o);if(y(s,"Missing index implementation for "+o),i===ki)if(s.isDefinedOn(t.node)){let a=[],c=n.getIterator(L.Wrap),l=c.getNext();for(;l;)l.name!==t.name&&a.push(l),l=c.getNext();return a.push(t),cu(a,s.getCompare())}else return ki;else{let a=n.get(t.name),c=i;return a&&(c=c.remove(new L(t.name,a))),c.insert(t,t.node)}});return new e(r,this.indexSet_)}removeFromIndexes(t,n){let r=ls(this.indexes_,i=>{if(i===ki)return i;{let o=n.get(t.name);return o?i.remove(new L(t.name,o)):i}});return new e(r,this.indexSet_)}};var Ds,M=(()=>{class e{static get EMPTY_NODE(){return Ds||(Ds=new e(new ut(Mm),null,Hi.Default))}constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&LD(this.priorityNode_),this.children_.isEmpty()&&y(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ds}updatePriority(n){return this.children_.isEmpty()?this:new e(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?Ds:r}}getChild(n){let r=F(n);return r===null?this:this.getImmediateChild(r).getChild(X(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(y(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new L(n,r),o,s;r.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(n,r),s=this.indexMap_.addToIndexes(i,this.children_));let a=o.isEmpty()?Ds:this.priorityNode_;return new e(o,a,s)}}updateChild(n,r){let i=F(n);if(i===null)return r;{y(F(n)!==".priority"||jn(n)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(X(n),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,o=0,s=!0;if(this.forEachChild(ie,(a,c)=>{r[a]=c.val(n),i++,s&&e.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+xD(this.getPriority().val())+":"),this.forEachChild(ie,(r,i)=>{let o=i.hash();o!==""&&(n+=":"+r+":"+o)}),this.lazyHash_=n===""?"":fD(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let o=this.resolveIndex_(i);if(o){let s=o.getPredecessorKey(new L(n,r));return s?s.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new L(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new L(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,o=>o);{let o=this.children_.getIteratorFrom(n.name,L.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,o=>o);{let o=this.children_.getReverseIteratorFrom(n.name,L.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===Bs?-1:0}withIndex(n){if(n===Fi||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new e(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===Fi||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(ie),o=r.getIterator(ie),s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===Fi?null:this.indexMap_.get(n.toString())}}return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e})(),qg=class extends M{constructor(){super(new ut(Mm),M.EMPTY_NODE,Hi.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return M.EMPTY_NODE}isEmpty(){return!1}},Bs=new qg;Object.defineProperties(L,{MIN:{value:new L(Ui,M.EMPTY_NODE)},MAX:{value:new L(kr,Bs)}});au.__EMPTY_NODE=M.EMPTY_NODE;Bi.__childrenNodeConstructor=M;uF(Bs);fF(Bs);var pF=!0;function Re(e,t=null){if(e===null)return M.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),y(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){let n=e;return new Bi(n,Re(t))}if(!(e instanceof Array)&&pF){let n=[],r=!1;if(Ve(e,(s,a)=>{if(s.substring(0,1)!=="."){let c=Re(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new L(s,c)))}}),n.length===0)return M.EMPTY_NODE;let o=cu(n,lF,s=>s.name,Mm);if(r){let s=cu(n,ie.getCompare());return new M(o,Re(t),new Hi({".priority":s},{".priority":ie}))}else return new M(o,Re(t),Hi.Default)}else{let n=M.EMPTY_NODE;return Ve(e,(r,i)=>{if(Bt(e,r)&&r.substring(0,1)!=="."){let o=Re(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(Re(t))}}dF(Re);var Kg=class extends Vi{constructor(t){super(),this.indexPath_=t,y(!j(t)&&F(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){let r=this.extractChild(t.node),i=this.extractChild(n.node),o=r.compareTo(i);return o===0?Gi(t.name,n.name):o}makePost(t,n){let r=Re(t),i=M.EMPTY_NODE.updateChild(this.indexPath_,r);return new L(n,i)}maxPost(){let t=M.EMPTY_NODE.updateChild(this.indexPath_,Bs);return new L(kr,t)}toString(){return OD(this.indexPath_,0).join("/")}};var Yg=class extends Vi{compare(t,n){let r=t.node.compareTo(n.node);return r===0?Gi(t.name,n.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return L.MIN}maxPost(){return L.MAX}makePost(t,n){let r=Re(t);return new L(n,r)}toString(){return".value"}},gF=new Yg;function UD(e){return{type:"value",snapshotNode:e}}function $i(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Os(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function ks(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function mF(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}var Ps=class{constructor(t){this.index_=t}updateChild(t,n,r,i,o,s){y(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=t.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(s!=null&&(r.isEmpty()?t.hasChild(n)?s.trackChildChange(Os(n,a)):y(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange($i(n,r)):s.trackChildChange(ks(n,r,a))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(t,n,r){return r!=null&&(t.isLeafNode()||t.forEachChild(ie,(i,o)=>{n.hasChild(i)||r.trackChildChange(Os(i,o))}),n.isLeafNode()||n.forEachChild(ie,(i,o)=>{if(t.hasChild(i)){let s=t.getImmediateChild(i);s.equals(o)||r.trackChildChange(ks(i,o,s))}else r.trackChildChange($i(i,o))})),n.withIndex(this.index_)}updatePriority(t,n){return t.isEmpty()?M.EMPTY_NODE:t.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var lu=class e{constructor(t){this.indexedFilter_=new Ps(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,r=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return n&&r}updateChild(t,n,r,i,o,s){return this.matches(new L(n,r))||(r=M.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,r,i,o,s)}updateFullNode(t,n,r){n.isLeafNode()&&(n=M.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(M.EMPTY_NODE);let o=this;return n.forEachChild(ie,(s,a)=>{o.matches(new L(s,a))||(i=i.updateImmediateChild(s,M.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){let n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){let n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}else return t.getIndex().maxPost()}};var Zg=class{constructor(t){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new lu(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,n,r,i,o,s){return this.rangedFilter_.matches(new L(n,r))||(r=M.EMPTY_NODE),t.getImmediateChild(n).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,r,i,o,s):this.fullLimitUpdateChild_(t,n,r,o,s)}updateFullNode(t,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=M.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=M.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){let a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(M.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let s=0;for(;o.hasNext();){let a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,M.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,n,r,i,o){let s;if(this.reverse_){let d=this.index_.getCompare();s=(f,h)=>d(h,f)}else s=this.index_.getCompare();let a=t;y(a.numChildren()===this.limit_,"");let c=new L(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){let d=a.getImmediateChild(n),f=i.getChildAfterChild(this.index_,l,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);let h=f==null?1:s(f,c);if(u&&!r.isEmpty()&&h>=0)return o?.trackChildChange(ks(n,r,d)),a.updateImmediateChild(n,r);{o?.trackChildChange(Os(n,d));let v=a.updateImmediateChild(n,M.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(o?.trackChildChange($i(f.name,f.node)),v.updateImmediateChild(f.name,f.node)):v}}else return r.isEmpty()?t:u&&s(l,c)>=0?(o!=null&&(o.trackChildChange(Os(l.name,l.node)),o.trackChildChange($i(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,M.EMPTY_NODE)):t}};var Qg=class e{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ie}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return y(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return y(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ui}hasEnd(){return this.endSet_}getIndexEndValue(){return y(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return y(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:kr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return y(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ie}copy(){let t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}};function vF(e){return e.loadsAllData()?new Ps(e.getIndex()):e.hasLimit()?new Zg(e):new lu(e)}function qT(e){let t={};if(e.isDefault())return t;let n;if(e.index_===ie?n="$priority":e.index_===gF?n="$value":e.index_===Fi?n="$key":(y(e.index_ instanceof Kg,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=ge(n),e.startSet_){let r=e.startAfterSet_?"startAfter":"startAt";t[r]=ge(e.indexStartValue_),e.startNameSet_&&(t[r]+=","+ge(e.indexStartName_))}if(e.endSet_){let r=e.endBeforeSet_?"endBefore":"endAt";t[r]=ge(e.indexEndValue_),e.endNameSet_&&(t[r]+=","+ge(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function KT(e){let t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==ie&&(t.i=e.index_.toString()),t}var Jg=class e extends iu{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(y(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,n,r,i){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Us("p:rest:"),this.listens_={}}listen(t,n,r,i){let o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);let s=e.getListenId_(t,r),a={};this.listens_[s]=a;let c=qT(t._queryParams);this.restRequest_(o+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(o,d,!1,r),Er(this.listens_,s)===a){let f;l?l===401?f="permission_denied":f="rest_error:"+l:f="ok",i(f,null)}})}unlisten(t,n){let r=e.getListenId_(t,n);delete this.listens_[r]}get(t){let n=qT(t._queryParams),r=t._path.toString(),i=new jt;return this.restRequest_(r+".json",n,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(t){}restRequest_(t,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+us(n);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Si(a.responseText)}catch{Ze("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Ze("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}};var Xg=class{constructor(){this.rootNode_=M.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}};function uu(){return{value:null,children:new Map}}function VD(e,t,n){if(j(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{let r=F(t);e.children.has(r)||e.children.set(r,uu());let i=e.children.get(r);t=X(t),VD(i,t,n)}}function em(e,t,n){e.value!==null?n(t,e.value):yF(e,(r,i)=>{let o=new Q(t.toString()+"/"+r);em(i,o,n)})}function yF(e,t){e.children.forEach((n,r)=>{t(r,n)})}var tm=class{constructor(t){this.collection_=t,this.last_=null}get(){let t=this.collection_.get(),n=Object.assign({},t);return this.last_&&Ve(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=t,n}};var YT=10*1e3,_F=30*1e3,EF=5*60*1e3,nm=class{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new tm(t);let r=YT+(_F-YT)*Math.random();Ss(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let t=this.statsListener_.get(),n={},r=!1;Ve(t,(i,o)=>{o>0&&Bt(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),Ss(this.reportStats_.bind(this),Math.floor(Math.random()*2*EF))}};var Wt=function(e){return e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",e}(Wt||{});function BD(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Om(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function km(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}var rm=class e{constructor(t,n,r){this.path=t,this.affectedTree=n,this.revert=r,this.type=Wt.ACK_USER_WRITE,this.source=BD()}operationForChild(t){if(j(this.path)){if(this.affectedTree.value!=null)return y(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new Q(t));return new e(W(),n,this.revert)}}else return y(F(this.path)===t,"operationForChild called for unrelated child."),new e(X(this.path),this.affectedTree,this.revert)}};var du=class e{constructor(t,n){this.source=t,this.path=n,this.type=Wt.LISTEN_COMPLETE}operationForChild(t){return j(this.path)?new e(this.source,W()):new e(this.source,X(this.path))}};var Wi=class e{constructor(t,n,r){this.source=t,this.path=n,this.snap=r,this.type=Wt.OVERWRITE}operationForChild(t){return j(this.path)?new e(this.source,W(),this.snap.getImmediateChild(t)):new e(this.source,X(this.path),this.snap)}};var fu=class e{constructor(t,n,r){this.source=t,this.path=n,this.children=r,this.type=Wt.MERGE}operationForChild(t){if(j(this.path)){let n=this.children.subtree(new Q(t));return n.isEmpty()?null:n.value?new Wi(this.source,W(),n.value):new e(this.source,W(),n)}else return y(F(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,X(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var dn=class{constructor(t,n,r){this.node_=t,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(j(t))return this.isFullyInitialized()&&!this.filtered_;let n=F(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}};var im=class{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}};function IF(e,t,n,r){let i=[],o=[];return t.forEach(s=>{s.type==="child_changed"&&e.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(mF(s.childName,s.snapshotNode))}),bs(e,i,"child_removed",t,r,n),bs(e,i,"child_added",t,r,n),bs(e,i,"child_moved",o,r,n),bs(e,i,"child_changed",t,r,n),bs(e,i,"value",t,r,n),i}function bs(e,t,n,r,i,o){let s=r.filter(a=>a.type===n);s.sort((a,c)=>CF(e,a,c)),s.forEach(a=>{let c=wF(e,a,o);i.forEach(l=>{l.respondsTo(a.type)&&t.push(l.createEvent(c,e.query_))})})}function wF(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function CF(e,t,n){if(t.childName==null||n.childName==null)throw yr("Should only compare child_ events.");let r=new L(t.childName,t.snapshotNode),i=new L(n.childName,n.snapshotNode);return e.index_.compare(r,i)}function Cu(e,t){return{eventCache:e,serverCache:t}}function As(e,t,n,r){return Cu(new dn(t,n,r),e.serverCache)}function HD(e,t,n,r){return Cu(e.eventCache,new dn(t,n,r))}function om(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Pr(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var bg,TF=()=>(bg||(bg=new ut(D1)),bg),Be=class e{static fromObject(t){let n=new e(null);return Ve(t,(r,i)=>{n=n.set(new Q(r),i)}),n}constructor(t,n=TF()){this.value=t,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:W(),value:this.value};if(j(t))return null;{let r=F(t),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(X(t),n);return o!=null?{path:me(new Q(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(j(t))return this;{let n=F(t),r=this.children.get(n);return r!==null?r.subtree(X(t)):new e(null)}}set(t,n){if(j(t))return new e(n,this.children);{let r=F(t),o=(this.children.get(r)||new e(null)).set(X(t),n),s=this.children.insert(r,o);return new e(this.value,s)}}remove(t){if(j(t))return this.children.isEmpty()?new e(null):new e(null,this.children);{let n=F(t),r=this.children.get(n);if(r){let i=r.remove(X(t)),o;return i.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,i),this.value===null&&o.isEmpty()?new e(null):new e(this.value,o)}else return this}}get(t){if(j(t))return this.value;{let n=F(t),r=this.children.get(n);return r?r.get(X(t)):null}}setTree(t,n){if(j(t))return n;{let r=F(t),o=(this.children.get(r)||new e(null)).setTree(X(t),n),s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new e(this.value,s)}}fold(t){return this.fold_(W(),t)}fold_(t,n){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(me(t,i),n)}),n(t,this.value,r)}findOnPath(t,n){return this.findOnPath_(t,W(),n)}findOnPath_(t,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(j(t))return null;{let o=F(t),s=this.children.get(o);return s?s.findOnPath_(X(t),me(n,o),r):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,W(),n)}foreachOnPath_(t,n,r){if(j(t))return this;{this.value&&r(n,this.value);let i=F(t),o=this.children.get(i);return o?o.foreachOnPath_(X(t),me(n,i),r):new e(null)}}foreach(t){this.foreach_(W(),t)}foreach_(t,n){this.children.inorderTraversal((r,i)=>{i.foreach_(me(t,r),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,r)=>{r.value&&t(n,r.value)})}};var Rt=class e{constructor(t){this.writeTree_=t}static empty(){return new e(new Be(null))}};function Ns(e,t,n){if(j(t))return new Rt(new Be(n));{let r=e.writeTree_.findRootMostValueAndPath(t);if(r!=null){let i=r.path,o=r.value,s=Ue(i,t);return o=o.updateChild(s,n),new Rt(e.writeTree_.set(i,o))}else{let i=new Be(n),o=e.writeTree_.setTree(t,i);return new Rt(o)}}}function ZT(e,t,n){let r=e;return Ve(n,(i,o)=>{r=Ns(r,me(t,i),o)}),r}function QT(e,t){if(j(t))return Rt.empty();{let n=e.writeTree_.setTree(t,new Be(null));return new Rt(n)}}function sm(e,t){return xr(e,t)!=null}function xr(e,t){let n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(Ue(n.path,t)):null}function JT(e){let t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ie,(r,i)=>{t.push(new L(r,i))}):e.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&t.push(new L(r,i.value))}),t}function Fn(e,t){if(j(t))return e;{let n=xr(e,t);return n!=null?new Rt(new Be(n)):new Rt(e.writeTree_.subtree(t))}}function am(e){return e.writeTree_.isEmpty()}function zi(e,t){return $D(W(),e.writeTree_,t)}function $D(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((i,o)=>{i===".priority"?(y(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):n=$D(me(e,i),o,n)}),!n.getChild(e).isEmpty()&&r!==null&&(n=n.updateChild(me(e,".priority"),r)),n}}function Pm(e,t){return qD(t,e)}function DF(e,t,n,r,i){y(r>e.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Ns(e.visibleWrites,t,n)),e.lastWriteId=r}function bF(e,t){for(let n=0;n<e.allWrites.length;n++){let r=e.allWrites[n];if(r.writeId===t)return r}return null}function SF(e,t){let n=e.allWrites.findIndex(a=>a.writeId===t);y(n>=0,"removeWrite called with nonexistent writeId.");let r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,o=!1,s=e.allWrites.length-1;for(;i&&s>=0;){let a=e.allWrites[s];a.visible&&(s>=n&&RF(a,r.path)?i=!1:St(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return AF(e),!0;if(r.snap)e.visibleWrites=QT(e.visibleWrites,r.path);else{let a=r.children;Ve(a,c=>{e.visibleWrites=QT(e.visibleWrites,me(r.path,c))})}return!0}else return!1}function RF(e,t){if(e.snap)return St(e.path,t);for(let n in e.children)if(e.children.hasOwnProperty(n)&&St(me(e.path,n),t))return!0;return!1}function AF(e){e.visibleWrites=WD(e.allWrites,NF,W()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function NF(e){return e.visible}function WD(e,t,n){let r=Rt.empty();for(let i=0;i<e.length;++i){let o=e[i];if(t(o)){let s=o.path,a;if(o.snap)St(n,s)?(a=Ue(n,s),r=Ns(r,a,o.snap)):St(s,n)&&(a=Ue(s,n),r=Ns(r,W(),o.snap.getChild(a)));else if(o.children){if(St(n,s))a=Ue(n,s),r=ZT(r,a,o.children);else if(St(s,n))if(a=Ue(s,n),j(a))r=ZT(r,W(),o.children);else{let c=Er(o.children,F(a));if(c){let l=c.getChild(X(a));r=Ns(r,W(),l)}}}else throw yr("WriteRecord should have .snap or .children")}}return r}function zD(e,t,n,r,i){if(!r&&!i){let o=xr(e.visibleWrites,t);if(o!=null)return o;{let s=Fn(e.visibleWrites,t);if(am(s))return n;if(n==null&&!sm(s,W()))return null;{let a=n||M.EMPTY_NODE;return zi(s,a)}}}else{let o=Fn(e.visibleWrites,t);if(!i&&am(o))return n;if(!i&&n==null&&!sm(o,W()))return null;{let s=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(St(l.path,t)||St(t,l.path))},a=WD(e.allWrites,s,t),c=n||M.EMPTY_NODE;return zi(a,c)}}}function MF(e,t,n){let r=M.EMPTY_NODE,i=xr(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(ie,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(n){let o=Fn(e.visibleWrites,t);return n.forEachChild(ie,(s,a)=>{let c=zi(Fn(o,new Q(s)),a);r=r.updateImmediateChild(s,c)}),JT(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{let o=Fn(e.visibleWrites,t);return JT(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function OF(e,t,n,r,i){y(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=me(t,n);if(sm(e.visibleWrites,o))return null;{let s=Fn(e.visibleWrites,o);return am(s)?i.getChild(n):zi(s,i.getChild(n))}}function kF(e,t,n,r){let i=me(t,n),o=xr(e.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(n)){let s=Fn(e.visibleWrites,i);return zi(s,r.getNode().getImmediateChild(n))}else return null}function PF(e,t){return xr(e.visibleWrites,t)}function xF(e,t,n,r,i,o,s){let a,c=Fn(e.visibleWrites,t),l=xr(c,W());if(l!=null)a=l;else if(n!=null)a=zi(c,n);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=s.getCompare(),f=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),h=f.getNext();for(;h&&u.length<i;)d(h,r)!==0&&u.push(h),h=f.getNext();return u}else return[]}function LF(){return{visibleWrites:Rt.empty(),allWrites:[],lastWriteId:-1}}function hu(e,t,n,r){return zD(e.writeTree,e.treePath,t,n,r)}function xm(e,t){return MF(e.writeTree,e.treePath,t)}function XT(e,t,n,r){return OF(e.writeTree,e.treePath,t,n,r)}function pu(e,t){return PF(e.writeTree,me(e.treePath,t))}function FF(e,t,n,r,i,o){return xF(e.writeTree,e.treePath,t,n,r,i,o)}function Lm(e,t,n){return kF(e.writeTree,e.treePath,t,n)}function GD(e,t){return qD(me(e.treePath,t),e.writeTree)}function qD(e,t){return{treePath:e,writeTree:t}}var cm=class{constructor(){this.changeMap=new Map}trackChildChange(t){let n=t.type,r=t.childName;y(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),y(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(r,ks(r,t.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(r,Os(r,i.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(r,$i(r,t.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(r,ks(r,t.snapshotNode,i.oldSnap));else throw yr("Illegal combination of changes: "+t+" occurred after "+i)}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}};var lm=class{getCompleteChild(t){return null}getChildAfterChild(t,n,r){return null}},KD=new lm,xs=class{constructor(t,n,r=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(t){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{let r=this.optCompleteServerCache_!=null?new dn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Lm(this.writes_,t,r)}}getChildAfterChild(t,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Pr(this.viewCache_),o=FF(this.writes_,i,n,1,r,t);return o.length===0?null:o[0]}};function jF(e){return{filter:e}}function UF(e,t){y(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),y(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function VF(e,t,n,r,i){let o=new cm,s,a;if(n.type===Wt.OVERWRITE){let l=n;l.source.fromUser?s=um(e,t,l.path,l.snap,r,i,o):(y(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!j(l.path),s=gu(e,t,l.path,l.snap,r,i,a,o))}else if(n.type===Wt.MERGE){let l=n;l.source.fromUser?s=HF(e,t,l.path,l.children,r,i,o):(y(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),s=dm(e,t,l.path,l.children,r,i,a,o))}else if(n.type===Wt.ACK_USER_WRITE){let l=n;l.revert?s=zF(e,t,l.path,r,i,o):s=$F(e,t,l.path,l.affectedTree,r,i,o)}else if(n.type===Wt.LISTEN_COMPLETE)s=WF(e,t,n.path,r,o);else throw yr("Unknown operation type: "+n.type);let c=o.getChanges();return BF(t,s,c),{viewCache:s,changes:c}}function BF(e,t,n){let r=t.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=om(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(UD(om(t)))}}function YD(e,t,n,r,i,o){let s=t.eventCache;if(pu(r,n)!=null)return t;{let a,c;if(j(n))if(y(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){let l=Pr(t),u=l instanceof M?l:M.EMPTY_NODE,d=xm(r,u);a=e.filter.updateFullNode(t.eventCache.getNode(),d,o)}else{let l=hu(r,Pr(t));a=e.filter.updateFullNode(t.eventCache.getNode(),l,o)}else{let l=F(n);if(l===".priority"){y(jn(n)===1,"Can't have a priority with additional path components");let u=s.getNode();c=t.serverCache.getNode();let d=XT(r,n,u,c);d!=null?a=e.filter.updatePriority(u,d):a=s.getNode()}else{let u=X(n),d;if(s.isCompleteForChild(l)){c=t.serverCache.getNode();let f=XT(r,n,s.getNode(),c);f!=null?d=s.getNode().getImmediateChild(l).updateChild(u,f):d=s.getNode().getImmediateChild(l)}else d=Lm(r,l,t.serverCache);d!=null?a=e.filter.updateChild(s.getNode(),l,d,u,i,o):a=s.getNode()}}return As(t,a,s.isFullyInitialized()||j(n),e.filter.filtersNodes())}}function gu(e,t,n,r,i,o,s,a){let c=t.serverCache,l,u=s?e.filter:e.filter.getIndexedFilter();if(j(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let h=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),h,null)}else{let h=F(n);if(!c.isCompleteForPath(n)&&jn(n)>1)return t;let p=X(n),E=c.getNode().getImmediateChild(h).updateChild(p,r);h===".priority"?l=u.updatePriority(c.getNode(),E):l=u.updateChild(c.getNode(),h,E,p,KD,null)}let d=HD(t,l,c.isFullyInitialized()||j(n),u.filtersNodes()),f=new xs(i,d,o);return YD(e,d,n,i,f,a)}function um(e,t,n,r,i,o,s){let a=t.eventCache,c,l,u=new xs(i,t,o);if(j(n))l=e.filter.updateFullNode(t.eventCache.getNode(),r,s),c=As(t,l,!0,e.filter.filtersNodes());else{let d=F(n);if(d===".priority")l=e.filter.updatePriority(t.eventCache.getNode(),r),c=As(t,l,a.isFullyInitialized(),a.isFiltered());else{let f=X(n),h=a.getNode().getImmediateChild(d),p;if(j(f))p=r;else{let v=u.getCompleteChild(d);v!=null?MD(f)===".priority"&&v.getChild(kD(f)).isEmpty()?p=v:p=v.updateChild(f,r):p=M.EMPTY_NODE}if(h.equals(p))c=t;else{let v=e.filter.updateChild(a.getNode(),d,p,f,u,s);c=As(t,v,a.isFullyInitialized(),e.filter.filtersNodes())}}}return c}function eD(e,t){return e.eventCache.isCompleteForChild(t)}function HF(e,t,n,r,i,o,s){let a=t;return r.foreach((c,l)=>{let u=me(n,c);eD(t,F(u))&&(a=um(e,a,u,l,i,o,s))}),r.foreach((c,l)=>{let u=me(n,c);eD(t,F(u))||(a=um(e,a,u,l,i,o,s))}),a}function tD(e,t,n){return n.foreach((r,i)=>{t=t.updateChild(r,i)}),t}function dm(e,t,n,r,i,o,s,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c=t,l;j(n)?l=r:l=new Be(null).setTree(n,r);let u=t.serverCache.getNode();return l.children.inorderTraversal((d,f)=>{if(u.hasChild(d)){let h=t.serverCache.getNode().getImmediateChild(d),p=tD(e,h,f);c=gu(e,c,new Q(d),p,i,o,s,a)}}),l.children.inorderTraversal((d,f)=>{let h=!t.serverCache.isCompleteForChild(d)&&f.value===null;if(!u.hasChild(d)&&!h){let p=t.serverCache.getNode().getImmediateChild(d),v=tD(e,p,f);c=gu(e,c,new Q(d),v,i,o,s,a)}}),c}function $F(e,t,n,r,i,o,s){if(pu(i,n)!=null)return t;let a=t.serverCache.isFiltered(),c=t.serverCache;if(r.value!=null){if(j(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return gu(e,t,n,c.getNode().getChild(n),i,o,a,s);if(j(n)){let l=new Be(null);return c.getNode().forEachChild(Fi,(u,d)=>{l=l.set(new Q(u),d)}),dm(e,t,n,l,i,o,a,s)}else return t}else{let l=new Be(null);return r.foreach((u,d)=>{let f=me(n,u);c.isCompleteForPath(f)&&(l=l.set(u,c.getNode().getChild(f)))}),dm(e,t,n,l,i,o,a,s)}}function WF(e,t,n,r,i){let o=t.serverCache,s=HD(t,o.getNode(),o.isFullyInitialized()||j(n),o.isFiltered());return YD(e,s,n,r,KD,i)}function zF(e,t,n,r,i,o){let s;if(pu(r,n)!=null)return t;{let a=new xs(r,t,i),c=t.eventCache.getNode(),l;if(j(n)||F(n)===".priority"){let u;if(t.serverCache.isFullyInitialized())u=hu(r,Pr(t));else{let d=t.serverCache.getNode();y(d instanceof M,"serverChildren would be complete if leaf node"),u=xm(r,d)}u=u,l=e.filter.updateFullNode(c,u,o)}else{let u=F(n),d=Lm(r,u,t.serverCache);d==null&&t.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=e.filter.updateChild(c,u,d,X(n),a,o):t.eventCache.getNode().hasChild(u)?l=e.filter.updateChild(c,u,M.EMPTY_NODE,X(n),a,o):l=c,l.isEmpty()&&t.serverCache.isFullyInitialized()&&(s=hu(r,Pr(t)),s.isLeafNode()&&(l=e.filter.updateFullNode(l,s,o)))}return s=t.serverCache.isFullyInitialized()||pu(r,W())!=null,As(t,l,s,e.filter.filtersNodes())}}var fm=class{constructor(t,n){this.query_=t,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new Ps(r.getIndex()),o=vF(r);this.processor_=jF(o);let s=n.serverCache,a=n.eventCache,c=i.updateFullNode(M.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(M.EMPTY_NODE,a.getNode(),null),u=new dn(c,s.isFullyInitialized(),i.filtersNodes()),d=new dn(l,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=Cu(d,u),this.eventGenerator_=new im(this.query_)}get query(){return this.query_}};function GF(e){return e.viewCache_.serverCache.getNode()}function qF(e,t){let n=Pr(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!j(t)&&!n.getImmediateChild(F(t)).isEmpty())?n.getChild(t):null}function nD(e){return e.eventRegistrations_.length===0}function KF(e,t){e.eventRegistrations_.push(t)}function rD(e,t,n){let r=[];if(n){y(t==null,"A cancel should cancel all event registrations.");let i=e.query._path;e.eventRegistrations_.forEach(o=>{let s=o.createCancelEvent(n,i);s&&r.push(s)})}if(t){let i=[];for(let o=0;o<e.eventRegistrations_.length;++o){let s=e.eventRegistrations_[o];if(!s.matches(t))i.push(s);else if(t.hasAnyCallback()){i=i.concat(e.eventRegistrations_.slice(o+1));break}}e.eventRegistrations_=i}else e.eventRegistrations_=[];return r}function iD(e,t,n,r){t.type===Wt.MERGE&&t.source.queryId!==null&&(y(Pr(e.viewCache_),"We should always have a full cache before handling merges"),y(om(e.viewCache_),"Missing event cache, even though we have a server cache"));let i=e.viewCache_,o=VF(e.processor_,i,t,n,r);return UF(e.processor_,o.viewCache),y(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,ZD(e,o.changes,o.viewCache.eventCache.getNode(),null)}function YF(e,t){let n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ie,(o,s)=>{r.push($i(o,s))}),n.isFullyInitialized()&&r.push(UD(n.getNode())),ZD(e,r,n.getNode(),t)}function ZD(e,t,n,r){let i=r?[r]:e.eventRegistrations_;return IF(e.eventGenerator_,t,n,i)}var mu,hm=class{constructor(){this.views=new Map}};function ZF(e){y(!mu,"__referenceConstructor has already been defined"),mu=e}function QF(){return y(mu,"Reference.ts has not been loaded"),mu}function JF(e){return e.views.size===0}function Fm(e,t,n,r){let i=t.source.queryId;if(i!==null){let o=e.views.get(i);return y(o!=null,"SyncTree gave us an op for an invalid query."),iD(o,t,n,r)}else{let o=[];for(let s of e.views.values())o=o.concat(iD(s,t,n,r));return o}}function XF(e,t,n,r,i){let o=t._queryIdentifier,s=e.views.get(o);if(!s){let a=hu(n,i?r:null),c=!1;a?c=!0:r instanceof M?(a=xm(n,r),c=!1):(a=M.EMPTY_NODE,c=!1);let l=Cu(new dn(a,c,!1),new dn(r,i,!1));return new fm(t,l)}return s}function ej(e,t,n,r,i,o){let s=XF(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,s),KF(s,n),YF(s,n)}function tj(e,t,n,r){let i=t._queryIdentifier,o=[],s=[],a=Un(e);if(i==="default")for(let[c,l]of e.views.entries())s=s.concat(rD(l,n,r)),nD(l)&&(e.views.delete(c),l.query._queryParams.loadsAllData()||o.push(l.query));else{let c=e.views.get(i);c&&(s=s.concat(rD(c,n,r)),nD(c)&&(e.views.delete(i),c.query._queryParams.loadsAllData()||o.push(c.query)))}return a&&!Un(e)&&o.push(new(QF())(t._repo,t._path)),{removed:o,events:s}}function QD(e){let t=[];for(let n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function ji(e,t){let n=null;for(let r of e.views.values())n=n||qF(r,t);return n}function JD(e,t){if(t._queryParams.loadsAllData())return Tu(e);{let r=t._queryIdentifier;return e.views.get(r)}}function XD(e,t){return JD(e,t)!=null}function Un(e){return Tu(e)!=null}function Tu(e){for(let t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}var vu;function nj(e){y(!vu,"__referenceConstructor has already been defined"),vu=e}function rj(){return y(vu,"Reference.ts has not been loaded"),vu}var ij=1,yu=class{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Be(null),this.pendingWriteTree_=LF(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function oj(e,t,n,r,i){return DF(e.pendingWriteTree_,t,n,r,i),i?Hs(e,new Wi(BD(),t,n)):[]}function xi(e,t,n=!1){let r=bF(e.pendingWriteTree_,t);if(SF(e.pendingWriteTree_,t)){let o=new Be(null);return r.snap!=null?o=o.set(W(),!0):Ve(r.children,s=>{o=o.set(new Q(s),!0)}),Hs(e,new rm(r.path,o,n))}else return[]}function Du(e,t,n){return Hs(e,new Wi(Om(),t,n))}function sj(e,t,n){let r=Be.fromObject(n);return Hs(e,new fu(Om(),t,r))}function aj(e,t){return Hs(e,new du(Om(),t))}function cj(e,t,n){let r=jm(e,n);if(r){let i=Um(r),o=i.path,s=i.queryId,a=Ue(o,t),c=new du(km(s),a);return Vm(e,o,c)}else return[]}function pm(e,t,n,r,i=!1){let o=t._path,s=e.syncPointTree_.get(o),a=[];if(s&&(t._queryIdentifier==="default"||XD(s,t))){let c=tj(s,t,n,r);JF(s)&&(e.syncPointTree_=e.syncPointTree_.remove(o));let l=c.removed;if(a=c.events,!i){let u=l.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=e.syncPointTree_.findOnPath(o,(f,h)=>Un(h));if(u&&!d){let f=e.syncPointTree_.subtree(o);if(!f.isEmpty()){let h=dj(f);for(let p=0;p<h.length;++p){let v=h[p],E=v.query,b=rb(e,v);e.listenProvider_.startListening(Ms(E),_u(e,E),b.hashFn,b.onComplete)}}}!d&&l.length>0&&!r&&(u?e.listenProvider_.stopListening(Ms(t),null):l.forEach(f=>{let h=e.queryToTagMap.get(bu(f));e.listenProvider_.stopListening(Ms(f),h)}))}fj(e,l)}return a}function lj(e,t,n,r){let i=jm(e,r);if(i!=null){let o=Um(i),s=o.path,a=o.queryId,c=Ue(s,t),l=new Wi(km(a),c,n);return Vm(e,s,l)}else return[]}function uj(e,t,n,r){let i=jm(e,r);if(i){let o=Um(i),s=o.path,a=o.queryId,c=Ue(s,t),l=Be.fromObject(n),u=new fu(km(a),c,l);return Vm(e,s,u)}else return[]}function oD(e,t,n,r=!1){let i=t._path,o=null,s=!1;e.syncPointTree_.foreachOnPath(i,(f,h)=>{let p=Ue(f,i);o=o||ji(h,p),s=s||Un(h)});let a=e.syncPointTree_.get(i);a?(s=s||Un(a),o=o||ji(a,W())):(a=new hm,e.syncPointTree_=e.syncPointTree_.set(i,a));let c;o!=null?c=!0:(c=!1,o=M.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((h,p)=>{let v=ji(p,W());v&&(o=o.updateImmediateChild(h,v))}));let l=XD(a,t);if(!l&&!t._queryParams.loadsAllData()){let f=bu(t);y(!e.queryToTagMap.has(f),"View does not exist, but we have a tag");let h=hj();e.queryToTagMap.set(f,h),e.tagToQueryMap.set(h,f)}let u=Pm(e.pendingWriteTree_,i),d=ej(a,t,n,u,o,c);if(!l&&!s&&!r){let f=JD(a,t);d=d.concat(pj(e,t,f))}return d}function eb(e,t,n){let i=e.pendingWriteTree_,o=e.syncPointTree_.findOnPath(t,(s,a)=>{let c=Ue(s,t),l=ji(a,c);if(l)return l});return zD(i,t,o,n,!0)}function Hs(e,t){return tb(t,e.syncPointTree_,null,Pm(e.pendingWriteTree_,W()))}function tb(e,t,n,r){if(j(e.path))return nb(e,t,n,r);{let i=t.get(W());n==null&&i!=null&&(n=ji(i,W()));let o=[],s=F(e.path),a=e.operationForChild(s),c=t.children.get(s);if(c&&a){let l=n?n.getImmediateChild(s):null,u=GD(r,s);o=o.concat(tb(a,c,l,u))}return i&&(o=o.concat(Fm(i,e,r,n))),o}}function nb(e,t,n,r){let i=t.get(W());n==null&&i!=null&&(n=ji(i,W()));let o=[];return t.children.inorderTraversal((s,a)=>{let c=n?n.getImmediateChild(s):null,l=GD(r,s),u=e.operationForChild(s);u&&(o=o.concat(nb(u,a,c,l)))}),i&&(o=o.concat(Fm(i,e,r,n))),o}function rb(e,t){let n=t.query,r=_u(e,n);return{hashFn:()=>(GF(t)||M.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?cj(e,n._path,r):aj(e,n._path);{let o=R1(i,n);return pm(e,n,null,o)}}}}function _u(e,t){let n=bu(t);return e.queryToTagMap.get(n)}function bu(e){return e._path.toString()+"$"+e._queryIdentifier}function jm(e,t){return e.tagToQueryMap.get(t)}function Um(e){let t=e.indexOf("$");return y(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Q(e.substr(0,t))}}function Vm(e,t,n){let r=e.syncPointTree_.get(t);y(r,"Missing sync point for query tag that we're tracking");let i=Pm(e.pendingWriteTree_,t);return Fm(r,n,i,null)}function dj(e){return e.fold((t,n,r)=>{if(n&&Un(n))return[Tu(n)];{let i=[];return n&&(i=QD(n)),Ve(r,(o,s)=>{i=i.concat(s)}),i}})}function Ms(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(rj())(e._repo,e._path):e}function fj(e,t){for(let n=0;n<t.length;++n){let r=t[n];if(!r._queryParams.loadsAllData()){let i=bu(r),o=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(o)}}}function hj(){return ij++}function pj(e,t,n){let r=t._path,i=_u(e,t),o=rb(e,n),s=e.listenProvider_.startListening(Ms(t),i,o.hashFn,o.onComplete),a=e.syncPointTree_.subtree(r);if(i)y(!Un(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,u,d)=>{if(!j(l)&&u&&Un(u))return[Tu(u).query];{let f=[];return u&&(f=f.concat(QD(u).map(h=>h.query))),Ve(d,(h,p)=>{f=f.concat(p)}),f}});for(let l=0;l<c.length;++l){let u=c[l];e.listenProvider_.stopListening(Ms(u),_u(e,u))}}return s}var gm=class e{constructor(t){this.node_=t}getImmediateChild(t){let n=this.node_.getImmediateChild(t);return new e(n)}node(){return this.node_}},mm=class e{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){let n=me(this.path_,t);return new e(this.syncTree_,n)}node(){return eb(this.syncTree_,this.path_)}},gj=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},sD=function(e,t,n){if(!e||typeof e!="object")return e;if(y(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return mj(e[".sv"],t,n);if(typeof e[".sv"]=="object")return vj(e[".sv"],t);y(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},mj=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:y(!1,"Unexpected server value: "+e)}},vj=function(e,t,n){e.hasOwnProperty("increment")||y(!1,"Unexpected server value: "+JSON.stringify(e,null,2));let r=e.increment;typeof r!="number"&&y(!1,"Unexpected increment value: "+r);let i=t.node();if(y(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return typeof s!="number"?r:s+r},yj=function(e,t,n,r){return Bm(t,new mm(n,e),r)},_j=function(e,t,n){return Bm(e,new gm(t),n)};function Bm(e,t,n){let r=e.getPriority().val(),i=sD(r,t.getImmediateChild(".priority"),n),o;if(e.isLeafNode()){let s=e,a=sD(s.getValue(),t,n);return a!==s.getValue()||i!==s.getPriority().val()?new Bi(a,Re(i)):e}else{let s=e;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new Bi(i))),s.forEachChild(ie,(a,c)=>{let l=Bm(c,t.getImmediateChild(a),n);l!==c&&(o=o.updateImmediateChild(a,l))}),o}}var Ls=class{constructor(t="",n=null,r={children:{},childCount:0}){this.name=t,this.parent=n,this.node=r}};function Hm(e,t){let n=t instanceof Q?t:new Q(t),r=e,i=F(n);for(;i!==null;){let o=Er(r.node.children,i)||{children:{},childCount:0};r=new Ls(i,r,o),n=X(n),i=F(n)}return r}function qi(e){return e.node.value}function ib(e,t){e.node.value=t,vm(e)}function ob(e){return e.node.childCount>0}function Ej(e){return qi(e)===void 0&&!ob(e)}function Su(e,t){Ve(e.node.children,(n,r)=>{t(new Ls(n,e,r))})}function sb(e,t,n,r){n&&!r&&t(e),Su(e,i=>{sb(i,t,!0,r)}),n&&r&&t(e)}function Ij(e,t,n){let r=n?e:e.parent;for(;r!==null;){if(t(r))return!0;r=r.parent}return!1}function $s(e){return new Q(e.parent===null?e.name:$s(e.parent)+"/"+e.name)}function vm(e){e.parent!==null&&wj(e.parent,e.name,e)}function wj(e,t,n){let r=Ej(n),i=Bt(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,vm(e)):!r&&!i&&(e.node.children[t]=n.node,e.node.childCount++,vm(e))}var Cj=/[\[\].#$\/\u0000-\u001F\u007F]/,Tj=/[\[\].#$\u0000-\u001F\u007F]/,Sg=10*1024*1024,ab=function(e){return typeof e=="string"&&e.length!==0&&!Cj.test(e)},cb=function(e){return typeof e=="string"&&e.length!==0&&!Tj.test(e)},Dj=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),cb(e)};var lb=function(e,t,n){let r=n instanceof Q?new Bg(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+Nr(r));if(typeof t=="function")throw new Error(e+"contains a function "+Nr(r)+" with contents = "+t.toString());if(hD(t))throw new Error(e+"contains "+t.toString()+" "+Nr(r));if(typeof t=="string"&&t.length>Sg/3&&ds(t)>Sg)throw new Error(e+"contains a string greater than "+Sg+" utf8 bytes "+Nr(r)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let i=!1,o=!1;if(Ve(t,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!ab(s)))throw new Error(e+" contains an invalid key ("+s+") "+Nr(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);rF(r,s),lb(e,a,r),iF(r)}),i&&o)throw new Error(e+' contains ".value" child '+Nr(r)+" in addition to actual children.")}};var ub=function(e,t,n,r){if(!(r&&n===void 0)&&!cb(n))throw new Error(Vp(e,t)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},bj=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ub(e,t,n,r)};var Sj=function(e,t){let n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!ab(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Dj(n))throw new Error(Vp(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var ym=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function db(e,t){let n=null;for(let r=0;r<t.length;r++){let i=t[r],o=i.getPath();n!==null&&!Am(o,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function fb(e,t,n){db(e,n),hb(e,r=>Am(r,t))}function Lr(e,t,n){db(e,n),hb(e,r=>St(r,t)||St(t,r))}function hb(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){let i=e.eventLists_[r];if(i){let o=i.path;t(o)?(Rj(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function Rj(e){for(let t=0;t<e.events.length;t++){let n=e.events[t];if(n!==null){e.events[t]=null;let r=n.getEventRunner();Or&&Se("event: "+n.toString()),Vs(r)}}}var Aj="repo_interrupt",Nj=25,_m=class{constructor(t,n,r,i){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ym,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=uu(),this.transactionQueueTree_=new Ls,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function Mj(e,t,n){if(e.stats_=Rm(e.repoInfo_),e.forceRestClient_||O1())e.server_=new Jg(e.repoInfo_,(r,i,o,s)=>{aD(e,r,i,o,s)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>cD(e,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ge(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Nm(e.repoInfo_,t,(r,i,o,s)=>{aD(e,r,i,o,s)},r=>{cD(e,r)},r=>{kj(e,r)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(r=>{e.server_.refreshAuthToken(r)}),e.appCheckProvider_.addTokenChangeListener(r=>{e.server_.refreshAppCheckToken(r.token)}),e.statsReporter_=P1(e.repoInfo_,()=>new nm(e.stats_,e.server_)),e.infoData_=new Xg,e.infoSyncTree_=new yu({startListening:(r,i,o,s)=>{let a=[],c=e.infoData_.getNode(r._path);return c.isEmpty()||(a=Du(e.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),$m(e,"connected",!1),e.serverSyncTree_=new yu({startListening:(r,i,o,s)=>(e.server_.listen(r,o,i,(a,c)=>{let l=s(a,c);Lr(e.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{e.server_.unlisten(r,i)}})}function Oj(e){let n=e.infoData_.getNode(new Q(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function pb(e){return gj({timestamp:Oj(e)})}function aD(e,t,n,r,i){e.dataUpdateCount++;let o=new Q(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let s=[];if(i)if(r){let c=ls(n,l=>Re(l));s=uj(e.serverSyncTree_,o,c,i)}else{let c=Re(n);s=lj(e.serverSyncTree_,o,c,i)}else if(r){let c=ls(n,l=>Re(l));s=sj(e.serverSyncTree_,o,c)}else{let c=Re(n);s=Du(e.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=zm(e,o)),Lr(e.eventQueue_,a,s)}function cD(e,t){$m(e,"connected",t),t===!1&&xj(e)}function kj(e,t){Ve(t,(n,r)=>{$m(e,n,r)})}function $m(e,t,n){let r=new Q("/.info/"+t),i=Re(n);e.infoData_.updateSnapshot(r,i);let o=Du(e.infoSyncTree_,r,i);Lr(e.eventQueue_,r,o)}function Pj(e){return e.nextWriteId_++}function xj(e){gb(e,"onDisconnectEvents");let t=pb(e),n=uu();em(e.onDisconnect_,W(),(i,o)=>{let s=yj(i,o,e.serverSyncTree_,t);VD(n,i,s)});let r=[];em(n,W(),(i,o)=>{r=r.concat(Du(e.serverSyncTree_,i,o));let s=Vj(e,i);zm(e,s)}),e.onDisconnect_=uu(),Lr(e.eventQueue_,W(),r)}function Lj(e,t,n){let r;F(t._path)===".info"?r=oD(e.infoSyncTree_,t,n):r=oD(e.serverSyncTree_,t,n),fb(e.eventQueue_,t._path,r)}function lD(e,t,n){let r;F(t._path)===".info"?r=pm(e.infoSyncTree_,t,n):r=pm(e.serverSyncTree_,t,n),fb(e.eventQueue_,t._path,r)}function Fj(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Aj)}function gb(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),Se(n,...t)}function mb(e,t,n){return eb(e.serverSyncTree_,t,n)||M.EMPTY_NODE}function Wm(e,t=e.transactionQueueTree_){if(t||Ru(e,t),qi(t)){let n=yb(e,t);y(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&jj(e,$s(t),n)}else ob(t)&&Su(t,n=>{Wm(e,n)})}function jj(e,t,n){let r=n.map(l=>l.currentWriteId),i=mb(e,t,r),o=i,s=i.hash();for(let l=0;l<n.length;l++){let u=n[l];y(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=Ue(t,u.path);o=o.updateChild(d,u.currentOutputSnapshotRaw)}let a=o.val(!0),c=t;e.server_.put(c.toString(),a,l=>{gb(e,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let f=0;f<n.length;f++)n[f].status=2,u=u.concat(xi(e.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();Ru(e,Hm(e.transactionQueueTree_,t)),Wm(e,e.transactionQueueTree_),Lr(e.eventQueue_,t,u);for(let f=0;f<d.length;f++)Vs(d[f])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Ze("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}zm(e,t)}},s)}function zm(e,t){let n=vb(e,t),r=$s(n),i=yb(e,n);return Uj(e,i,r),r}function Uj(e,t,n){if(t.length===0)return;let r=[],i=[],s=t.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){let c=t[a],l=Ue(n,c.path),u=!1,d;if(y(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(xi(e.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=Nj)u=!0,d="maxretry",i=i.concat(xi(e.serverSyncTree_,c.currentWriteId,!0));else{let f=mb(e,c.path,s);c.currentInputSnapshot=f;let h=t[a].update(f.val());if(h!==void 0){lb("transaction failed: Data returned ",h,c.path);let p=Re(h);typeof h=="object"&&h!=null&&Bt(h,".priority")||(p=p.updatePriority(f.getPriority()));let E=c.currentWriteId,b=pb(e),ne=_j(p,f,b);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=ne,c.currentWriteId=Pj(e),s.splice(s.indexOf(E),1),i=i.concat(oj(e.serverSyncTree_,c.path,ne,c.currentWriteId,c.applyLocally)),i=i.concat(xi(e.serverSyncTree_,E,!0))}else u=!0,d="nodata",i=i.concat(xi(e.serverSyncTree_,c.currentWriteId,!0))}Lr(e.eventQueue_,n,i),i=[],u&&(t[a].status=2,function(f){setTimeout(f,Math.floor(0))}(t[a].unwatcher),t[a].onComplete&&(d==="nodata"?r.push(()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot)):r.push(()=>t[a].onComplete(new Error(d),!1,null))))}Ru(e,e.transactionQueueTree_);for(let a=0;a<r.length;a++)Vs(r[a]);Wm(e,e.transactionQueueTree_)}function vb(e,t){let n,r=e.transactionQueueTree_;for(n=F(t);n!==null&&qi(r)===void 0;)r=Hm(r,n),t=X(t),n=F(t);return r}function yb(e,t){let n=[];return _b(e,t,n),n.sort((r,i)=>r.order-i.order),n}function _b(e,t,n){let r=qi(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Su(t,i=>{_b(e,i,n)})}function Ru(e,t){let n=qi(t);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,ib(t,n.length>0?n:void 0)}Su(t,r=>{Ru(e,r)})}function Vj(e,t){let n=$s(vb(e,t)),r=Hm(e.transactionQueueTree_,t);return Ij(r,i=>{Rg(e,i)}),Rg(e,r),sb(r,i=>{Rg(e,i)}),n}function Rg(e,t){let n=qi(t);if(n){let r=[],i=[],o=-1;for(let s=0;s<n.length;s++)n[s].status===3||(n[s].status===1?(y(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(y(n[s].status===0,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(xi(e.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?ib(t,void 0):n.length=o+1,Lr(e.eventQueue_,$s(t),i);for(let s=0;s<r.length;s++)Vs(r[s])}}function Bj(e){let t="",n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}t+="/"+i}return t}function Hj(e){let t={};e.charAt(0)==="?"&&(e=e.substring(1));for(let n of e.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ze(`Invalid query segment '${n}' in query '${e}'`)}return t}var uD=function(e,t){let n=$j(e),r=n.namespace;n.domain==="firebase.com"&&un(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&un("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||C1();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new nu(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new Q(n.pathString)}},$j=function(e){let t="",n="",r="",i="",o="",s=!0,a="https",c=443;if(typeof e=="string"){let l=e.indexOf("//");l>=0&&(a=e.substring(0,l-1),e=e.substring(l+2));let u=e.indexOf("/");u===-1&&(u=e.length);let d=e.indexOf("?");d===-1&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(i=Bj(e.substring(u,d)));let f=Hj(e.substring(Math.min(e.length,d)));l=t.indexOf(":"),l>=0?(s=a==="https"||a==="wss",c=parseInt(t.substring(l+1),10)):l=t.length;let h=t.slice(0,l);if(h.toLowerCase()==="localhost")n="localhost";else if(h.split(".").length<=2)n=h;else{let p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),o=r}"ns"in f&&(o=f.ns)}return{host:t,port:c,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};var Eu=class{constructor(t,n,r,i){this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ge(this.snapshot.exportVal())}},Iu=class{constructor(t,n,r){this.eventRegistration=t,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Em=class{constructor(t,n){this.snapshotCallback=t,this.cancelCallback=n}onValue(t,n){this.snapshotCallback.call(null,t,n)}onCancel(t){return y(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}};var Im=class e{constructor(t,n,r,i){this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return j(this._path)?null:MD(this._path)}get ref(){return new fn(this._repo,this._path)}get _queryIdentifier(){let t=KT(this._queryParams),n=Sm(t);return n==="{}"?"default":n}get _queryObject(){return KT(this._queryParams)}isEqual(t){if(t=Ct(t),!(t instanceof e))return!1;let n=this._repo===t._repo,r=Am(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+nF(this._path)}};var fn=class e extends Im{constructor(t,n){super(t,n,new Qg,!1)}get parent(){let t=kD(this._path);return t===null?null:new e(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}},wu=class e{constructor(t,n,r){this._node=t,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){let n=new Q(t),r=Fs(this.ref,t);return new e(this._node.getChild(n),r,ie)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>t(new e(i,Fs(this.ref,r),ie)))}hasChild(t){let n=new Q(t);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function Eb(e,t){return e=Ct(e),e._checkNotDeleted("ref"),t!==void 0?Fs(e._root,t):e._root}function Fs(e,t){return e=Ct(e),F(e._path)===null?bj("child","path",t,!1):ub("child","path",t,!1),new fn(e._repo,me(e._path,t))}var wm=class e{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,n){let r=n._queryParams.getIndex();return new Eu("value",this,new wu(t.snapshotNode,new fn(n._repo,n._path),r))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new Iu(this,t,n):null}matches(t){return t instanceof e?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},Cm=class e{constructor(t,n){this.eventType=t,this.callbackContext=n}respondsTo(t){let n=t==="children_added"?"child_added":t;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new Iu(this,t,n):null}createEvent(t,n){y(t.childName!=null,"Child events should have a childName.");let r=Fs(new fn(n._repo,n._path),t.childName),i=n._queryParams.getIndex();return new Eu(t.type,this,new wu(t.snapshotNode,r,i),t.prevName)}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof e?this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function Wj(e,t,n,r,i){let o;if(typeof r=="object"&&(o=void 0,i=r),typeof r=="function"&&(o=r),i&&i.onlyOnce){let c=n,l=(u,d)=>{lD(e._repo,e,a),c(u,d)};l.userCallback=n.userCallback,l.context=n.context,n=l}let s=new Em(n,o||void 0),a=t==="value"?new wm(s):new Cm(t,s);return Lj(e._repo,e,a),()=>lD(e._repo,e,a)}function Ib(e,t,n,r){return Wj(e,"value",t,n,r)}ZF(fn);nj(fn);var zj="FIREBASE_DATABASE_EMULATOR_HOST",Tm={},Gj=!1;function qj(e,t,n,r){let i=t.lastIndexOf(":"),o=t.substring(0,i),s=_r(o);e.repoInfo_=new nu(t,s,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(e.authTokenProvider_=r)}function Kj(e,t,n,r,i){let o=r||e.options.databaseURL;o===void 0&&(e.options.projectId||un("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Se("Using default host for project ",e.options.projectId),o=`${e.options.projectId}-default-rtdb.firebaseio.com`);let s=uD(o,i),a=s.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[zj]),l?(c=!0,o=`http://${l}?ns=${a.namespace}`,s=uD(o,i),a=s.repoInfo):c=!s.repoInfo.secure;let u=i&&c?new Rs(Rs.OWNER):new Pg(e.name,e.options,t);Sj("Invalid Firebase Database URL",s),j(s.path)||un("Database URL must point to the root of a Firebase Database (not including a child path).");let d=Zj(a,e,u,new kg(e,n));return new Dm(d,e)}function Yj(e,t){let n=Tm[t];(!n||n[e.key]!==e)&&un(`Database ${t}(${e.repoInfo_}) has already been deleted.`),Fj(e),delete n[e.key]}function Zj(e,t,n,r){let i=Tm[t.name];i||(i={},Tm[t.name]=i);let o=i[e.toURLString()];return o&&un("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new _m(e,Gj,n,r),i[e.toURLString()]=o,o}var Dm=class{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Mj(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new fn(this._repo,W())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Yj(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&un("Cannot call "+t+" on a deleted database.")}};function wb(e=Ni(),t){let n=Ll(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){let r=RC("database");r&&Cb(n,...r)}return n}function Cb(e,t,n,r={}){e=Ct(e),e._checkNotDeleted("useEmulator");let i=`${t}:${n}`,o=e._repoInternal;if(e._instanceStarted){if(i===e._repoInternal.repoInfo_.host&&Ir(r,o.repoInfo_.emulatorOptions))return;un("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let s;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&un('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Rs(Rs.OWNER);else if(r.mockUserToken){let a=typeof r.mockUserToken=="string"?r.mockUserToken:NC(r.mockUserToken,e.app.options.projectId);s=new Rs(a)}_r(t)&&(jp(t),Up("Database",!0)),qj(o,i,r,s)}function Qj(e){E1(Ai),Tt(new Oe("database",(t,{instanceIdentifier:n})=>{let r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return Kj(r,i,o,n)},"PUBLIC").setMultipleInstances(!0)),se(MT,OT,e),se(MT,OT,"esm2017")}Nm.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};Nm.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};Qj();var Fr=class{constructor(t){return t}},Tb="database",Gm=class{constructor(){return Oi(Tb)}};var qm=new I("angularfire2.database-instances");function Jj(e,t){let n=Ul(Tb,e,t);return n&&new Fr(n)}function Xj(e){return(t,n)=>{let r=t.runOutsideAngular(()=>e(n));return new Fr(r)}}var eU={provide:Gm,deps:[[new xt,qm]]},tU={provide:Fr,useFactory:Jj,deps:[[new xt,qm],br]};function Db(e,...t){return se("angularfire",Tr.full,"rtdb"),Xe([tU,eU,{provide:qm,useFactory:Xj(e),multi:!0,deps:[Y,pe,Dr,gs,[new xt,Xl],[new xt,Bl],...t]}])}var bb=Pn(wb,!0);var Sb=Pn(Ib,!0);var Rb=Pn(Eb,!0,2);var Au=class e{constructor(t,n){this.database=t;this.platformId=n}getTiles(){return Dl(this.platformId)?new P(t=>{let n=Rb(this.database,"Boards"),r=Sb(n,i=>{let o=i.val();if(o){let s=[];for(let a in o){let c=[];for(let l in o[a])if(o[a].hasOwnProperty(l)){let u=o[a][l];c.push(u)}s.push(c)}t.next(s)}else t.next([])},i=>{t.error(i)});return()=>{r()}}):S([])}static \u0275fac=function(n){return new(n||e)(R(Fr),R(st))};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})};var iU=(e,t)=>({"tile-selected":e,"tile-completed":t});function oU(e,t){if(e&1&&(te(0,"div",15)(1,"div",18),Et(2,"div",19),fe()()),e&2){let n=wi().$implicit;be(),pl("width",n.itemsObtained/n.itemsRequired*100,"%"),cl("aria-valuenow",n.itemsObtained)("aria-valuemax",n.itemsRequired)}}function sU(e,t){if(e&1){let n=Yh();te(0,"button",13),Ii("click",function(){let i=ec(n).$implicit,o=wi(2);return tc(o.onTileClick(i))}),te(1,"div",14),ll(2,oU,3,4,"div",15),Et(3,"img",16),te(4,"p",17),lt(5),fe()()()}if(e&2){let n=t.$implicit,r=wi(2);Nn("ngClass",Zh(5,iU,n===r.selectedTile,n.itemsObtained>=n.itemsRequired)),be(2),ul(n.itemsObtained>=n.itemsRequired?-1:2),be(),Nn("src",n.src,Kc)("alt",n.alt),be(2),Yo(n.title)}}function aU(e,t){if(e&1&&(te(0,"div",7),fl(1,sU,6,8,"button",12,dl),fe()),e&2){let n=t.$implicit;be(),hl(n)}}function cU(e,t){if(e&1&&(te(0,"div"),lt(1),fe(),te(2,"div"),Et(3,"img",20),fe(),te(4,"div",21)(5,"div",22),lt(6,"Points: "),te(7,"p",23),lt(8),fe()(),te(9,"div"),lt(10),fe()()),e&2){let n=wi();be(),Yo(n.selectedTile.description),be(2),Nn("src",n.selectedTile.bossSrc,Kc)("alt",n.selectedTile.alt||""),be(5),Ci(" ",n.selectedTile.points),be(2),gl("",n.selectedTile.itemsObtained," / ",n.selectedTile.itemsRequired," Obtained ")}}function lU(e,t){e&1&&(te(0,"p"),lt(1,"Click on a tile!"),fe())}var Ab=(n=>(n[n.TeamDumb=0]="TeamDumb",n[n.TeamWon=1]="TeamWon",n))(Ab||{}),Nu=class e{constructor(t,n){this.databaseService=t;this.platformId=n}teamEnum=Ab;currentTeam=0;selectedTile=null;board=[];ngOnInit(){if(Np.production===!1){let t=new os;this.board=t.board,this.generateBoard(this.board[this.currentTeam])}else Dl(this.platformId)&&this.loadTilesFromFirebase()}loadTilesFromFirebase(){this.databaseService.getTiles().subscribe({next:t=>{t&&t.length>0&&this.generateBoard(t[this.currentTeam])},error:t=>{console.error("Error loading tiles:",t)}})}generateBoard(t){this.board=[];let n=0;for(let r=0;r<5;r++){this.board[r]=[];for(let i=0;i<5;i++){if(n>=t.length)return;this.board[r][i]=K(_({},t[n]),{id:r*5+i+1}),n++}}}onTileClick(t){this.selectedTile=t}switchTeam(t){if(this.currentTeam=t,Np.production===!1){let n=new os;this.board=n.board,this.generateBoard(this.board[this.currentTeam])}else this.loadTilesFromFirebase()}getTotalPoints(){let t=0;for(let n of this.board)for(let r of n)r.itemsObtained>=r.itemsRequired&&(t+=r.points||0);return t}static \u0275fac=function(n){return new(n||e)(Rn(Au),Rn(st))};static \u0275cmp=gr({type:e,selectors:[["app-cabbingo-board"]],decls:22,vars:4,consts:[[1,"page-wrap"],[1,"banner"],[1,"content"],[1,"row","teams"],[1,"button","btn","col-md-5",3,"click","ngClass"],[1,"row","board"],[1,"tiles","column","col-auto"],[1,"row","tile-row","gap-3"],[1,"infoArea","col-auto"],[1,"infobox","d-flex","flex-column","justify-content-center","align-items-center"],[1,"infobox"],[1,"btn","button","disabled"],[1,"btn","tile",3,"ngClass"],[1,"btn","tile",3,"click","ngClass"],[1,"d-flex","flex-column"],[1,"progress",2,"height","5px"],[1,"tile-image","p-1",3,"src","alt"],[1,"tile-text"],["role","progressbar","aria-valuemin","0",1,"progress-bar","bg-success"],[2,"width","110px"],[1,"bossImage",3,"src","alt"],[1,"d-flex","flex-column","align-items-center"],[1,"d-flex","flex-row"],[1,"mx-2",2,"color","rgb(8, 255, 8)"]],template:function(n,r){n&1&&(te(0,"div",0),Et(1,"div",1),te(2,"div",2)(3,"div",3)(4,"button",4),Ii("click",function(){return r.switchTeam(r.teamEnum.TeamDumb)}),lt(5,"Team 1"),fe(),te(6,"button",4),Ii("click",function(){return r.switchTeam(r.teamEnum.TeamWon)}),lt(7,"Team 2"),fe()(),te(8,"div",5)(9,"div",6),fl(10,aU,3,0,"div",7,dl),fe(),te(12,"div",8)(13,"div",9),ll(14,cU,11,6)(15,lU,2,0,"p"),fe(),te(16,"div",10)(17,"p"),lt(18,"Da Rulez"),fe()(),te(19,"div")(20,"button",11),lt(21),fe()()()()()()),n&2&&(be(4),Nn("ngClass",r.currentTeam===r.teamEnum.TeamDumb?"btn selected-team":""),be(2),Nn("ngClass",r.currentTeam===r.teamEnum.TeamWon?"btn selected-team":""),be(4),hl(r.board),be(4),ul(r.selectedTile?14:15),be(7),Ci("Total points: ",r.getTotalPoints()))},dependencies:[gp],styles:['@font-face{font-family:Runescape;src:url("./media/RuneScape-Plain-12-T6CWJQYQ.otf") format("opentype")}@font-face{font-family:Runescape-Bold;font-weight:700;src:url("./media/RuneScape-Bold-12-YYN5KYKT.otf") format("opentype")}@font-face{font-family:Runescape-Quill;src:url("./media/RuneScape-Quill-2XBT7J23.otf") format("opentype")}.page-wrap[_ngcontent-%COMP%]{background:url(https://www.runescape.com/img/rsp777/bg2.jpg) repeat-y center top;margin:0 auto;overflow:auto;padding:0 50px 19px;width:1198px;background-size:contain}body[_ngcontent-%COMP%]{background:#000;color:#fff;font-family:Runescape-Bold;text-shadow:black 2px 2px;font-size:16px;margin:0;overflow:auto}.banner[_ngcontent-%COMP%]{background:url("./media/Logo-W5ERYSIZ.png") no-repeat center;background-size:contain;display:block;height:190px;margin-top:10px;margin-bottom:10px;min-height:135px;text-align:center}.content[_ngcontent-%COMP%]{background:url("./media/backdrop-body-ZTXHLITM.png") repeat-y top center;padding:30px 63px;position:relative}.content[_ngcontent-%COMP%]:before, .content[_ngcontent-%COMP%]:after{background:url("./media/Backdrop-top2-7H6ZDQMZ.png") no-repeat center top;content:"";height:20px;left:0;position:absolute;top:-10px;width:100%}.content[_ngcontent-%COMP%]:after{background:url("./media/Backdrop-bottom2-GJQ7TAIB.png") no-repeat center bottom;bottom:-10px;top:auto}.button[_ngcontent-%COMP%]{background:url("./media/button-UB2HKL6L.png") no-repeat top center;position:relative;width:243px;height:54px;font-family:Runescape-Bold;font-size:27px;align-content:center;text-align:center}.teams[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-evenly}.board[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:nowrap;justify-content:flex-end;margin-top:30px;max-height:580px;height:580px}.bossImage[_ngcontent-%COMP%]{height:125px}.tile-image[_ngcontent-%COMP%]{height:55px;object-fit:contain;filter:drop-shadow(6px 6px 2mm rgb(0,0,0));z-index:0}.tile-text[_ngcontent-%COMP%]{color:#f93;font-size:16px;height:16px;max-width:120px;white-space:wrap;word-break:break-word;z-index:1;line-height:normal}.tile[_ngcontent-%COMP%]{width:125px;height:100px;flex-direction:column;flex-wrap:nowrap;display:flex;align-content:center;align-items:center;text-align:center;background:url("./media/tile-background-IBII6VZD.png") no-repeat top center}.tile[_ngcontent-%COMP%]:hover{filter:drop-shadow(0px 0px .5mm gold)}.tile-selected[_ngcontent-%COMP%]{border:gold 2px solid}.tile-completed[_ngcontent-%COMP%]{background:url("./media/tile-background-completed-DUHXW4XJ.png") no-repeat top center}.tile-row[_ngcontent-%COMP%]{justify-content:start;padding-top:6px;padding-bottom:6px;padding-left:8px}.tiles[_ngcontent-%COMP%]{top:5px;background:url("./media/tiles-body-ZO7QZILF.png") repeat-y top center;width:705px;padding-top:10px;padding-bottom:10px;position:relative;align-items:center;align-content:center;flex-direction:column;justify-content:space-evenly}.tiles[_ngcontent-%COMP%]:before, .tiles[_ngcontent-%COMP%]:after{background:url("./media/tiles-top-GY2TIOWF.png") no-repeat center top;content:"";height:5px;left:0;position:absolute;top:-5px;width:100%}.tiles[_ngcontent-%COMP%]:after{background:url("./media/tiles-bottom-I2MDT7H2.png") no-repeat center bottom;bottom:-5px;top:auto}.infoArea[_ngcontent-%COMP%]{flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-items:center;display:flex}.infobox[_ngcontent-%COMP%]{width:250px;height:240px;align-content:center;text-align:center;background:url("./media/infobox-4RB4BBKH.png") no-repeat top center;background-size:contain;margin-bottom:20px}.btn[_ngcontent-%COMP%]{--bs-btn-color: var(white) !important;color:#fff!important}.btn[_ngcontent-%COMP%]:hover{color:gold!important}.selected-team[_ngcontent-%COMP%]{filter:drop-shadow(0px 0px 1mm gold)}']})};var Mu=class e{title=cr("cabbingov2");static \u0275fac=function(n){return new(n||e)};static \u0275cmp=gr({type:e,selectors:[["app-root"]],decls:2,vars:0,template:function(n,r){n&1&&(te(0,"main"),Et(1,"app-cabbingo-board"),fe())},dependencies:[Nu],encapsulation:2})};var O="primary",na=Symbol("RouteTitle"),Jm=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Xi(e){return new Jm(e)}function uU(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=e[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function dU(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!zt(e[n],t[n]))return!1;return!0}function zt(e,t){let n=e?Xm(e):void 0,r=t?Xm(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Fb(e[i],t[i]))return!1;return!0}function Xm(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function Fb(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((i,o)=>r[o]===i)}else return e===t}function jb(e){return e.length>0?e[e.length-1]:null}function gn(e){return wd(e)?e:qo(e)?ae(Promise.resolve(e)):S(e)}var fU={exact:Vb,subset:Bb},Ub={exact:hU,subset:pU,ignored:()=>!0};function Nb(e,t,n){return fU[n.paths](e.root,t.root,n.matrixParams)&&Ub[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function hU(e,t){return zt(e,t)}function Vb(e,t,n){if(!Ur(e.segments,t.segments)||!Pu(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!Vb(e.children[r],t.children[r],n))return!1;return!0}function pU(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>Fb(e[n],t[n]))}function Bb(e,t,n){return Hb(e,t,t.segments,n)}function Hb(e,t,n,r){if(e.segments.length>n.length){let i=e.segments.slice(0,n.length);return!(!Ur(i,n)||t.hasChildren()||!Pu(i,n,r))}else if(e.segments.length===n.length){if(!Ur(e.segments,n)||!Pu(e.segments,n,r))return!1;for(let i in t.children)if(!e.children[i]||!Bb(e.children[i],t.children[i],r))return!1;return!0}else{let i=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!Ur(e.segments,i)||!Pu(e.segments,i,r)||!e.children[O]?!1:Hb(e.children[O],t,o,r)}}function Pu(e,t,n){return t.every((r,i)=>Ub[n](e[i].parameters,r.parameters))}var pn=class{root;queryParams;fragment;_queryParamMap;constructor(t=new q([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Xi(this.queryParams),this._queryParamMap}toString(){return vU.serialize(this)}},q=class{segments;children;parent=null;constructor(t,n){this.segments=t,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return xu(this)}},jr=class{path;parameters;_parameterMap;constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=Xi(this.parameters),this._parameterMap}toString(){return Wb(this)}};function gU(e,t){return Ur(e,t)&&e.every((n,r)=>zt(n.parameters,t[r].parameters))}function Ur(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function mU(e,t){let n=[];return Object.entries(e.children).forEach(([r,i])=>{r===O&&(n=n.concat(t(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==O&&(n=n.concat(t(i,r)))}),n}var qu=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:()=>new eo,providedIn:"root"})}return e})(),eo=class{parse(t){let n=new tv(t);return new pn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${Ws(t.root,!0)}`,r=EU(t.queryParams),i=typeof t.fragment=="string"?`#${yU(t.fragment)}`:"";return`${n}${r}${i}`}},vU=new eo;function xu(e){return e.segments.map(t=>Wb(t)).join("/")}function Ws(e,t){if(!e.hasChildren())return xu(e);if(t){let n=e.children[O]?Ws(e.children[O],!1):"",r=[];return Object.entries(e.children).forEach(([i,o])=>{i!==O&&r.push(`${i}:${Ws(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=mU(e,(r,i)=>i===O?[Ws(e.children[O],!1)]:[`${i}:${Ws(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[O]!=null?`${xu(e)}/${n[0]}`:`${xu(e)}/(${n.join("//")})`}}function $b(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ou(e){return $b(e).replace(/%3B/gi,";")}function yU(e){return encodeURI(e)}function ev(e){return $b(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Lu(e){return decodeURIComponent(e)}function Mb(e){return Lu(e.replace(/\+/g,"%20"))}function Wb(e){return`${ev(e.path)}${_U(e.parameters)}`}function _U(e){return Object.entries(e).map(([t,n])=>`;${ev(t)}=${ev(n)}`).join("")}function EU(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Ou(n)}=${Ou(i)}`).join("&"):`${Ou(n)}=${Ou(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var IU=/^[^\/()?;#]+/;function Km(e){let t=e.match(IU);return t?t[0]:""}var wU=/^[^\/()?;=#]+/;function CU(e){let t=e.match(wU);return t?t[0]:""}var TU=/^[^=?&#]+/;function DU(e){let t=e.match(TU);return t?t[0]:""}var bU=/^[^&#]+/;function SU(e){let t=e.match(bU);return t?t[0]:""}var tv=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new q([],{}):new q([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[O]=new q(t,n)),r}parseSegment(){let t=Km(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new w(4009,!1);return this.capture(t),new jr(Lu(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=CU(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Km(this.remaining);i&&(r=i,this.capture(r))}t[Lu(n)]=Lu(r)}parseQueryParam(t){let n=DU(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=SU(this.remaining);s&&(r=s,this.capture(r))}let i=Mb(n),o=Mb(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Km(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new w(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=O);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[O]:new q([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new w(4011,!1)}};function zb(e){return e.segments.length>0?new q([],{[O]:e}):e}function Gb(e){let t={};for(let[r,i]of Object.entries(e.children)){let o=Gb(i);if(r===O&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[r]=o)}let n=new q(e.segments,t);return RU(n)}function RU(e){if(e.numberOfChildren===1&&e.children[O]){let t=e.children[O];return new q(e.segments.concat(t.segments),t.children)}return e}function to(e){return e instanceof pn}function AU(e,t,n=null,r=null){let i=qb(e);return Kb(i,t,n,r)}function qb(e){let t;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new q(o.url,s);return o===e&&(t=a),a}let r=n(e.root),i=zb(r);return t??i}function Kb(e,t,n,r){let i=e;for(;i.parent;)i=i.parent;if(t.length===0)return Ym(i,i,i,n,r);let o=NU(t);if(o.toRoot())return Ym(i,i,new q([],{}),n,r);let s=MU(o,i,e),a=s.processChildren?Gs(s.segmentGroup,s.index,o.commands):Zb(s.segmentGroup,s.index,o.commands);return Ym(i,s.segmentGroup,a,n,r)}function Fu(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function Ys(e){return typeof e=="object"&&e!=null&&e.outlets}function Ym(e,t,n,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;e===t?s=n:s=Yb(e,t,n);let a=zb(Gb(s));return new pn(a,o,i)}function Yb(e,t,n){let r={};return Object.entries(e.children).forEach(([i,o])=>{o===t?r[i]=n:r[i]=Yb(o,t,n)}),new q(e.segments,r)}var ju=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&Fu(r[0]))throw new w(4003,!1);let i=r.find(Ys);if(i&&i!==jb(r))throw new w(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function NU(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new ju(!0,0,e);let t=0,n=!1,r=e.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?t++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new ju(n,t,r)}var Zi=class{segmentGroup;processChildren;index;constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function MU(e,t,n){if(e.isAbsolute)return new Zi(t,!0,0);if(!n)return new Zi(t,!1,NaN);if(n.parent===null)return new Zi(n,!0,0);let r=Fu(e.commands[0])?0:1,i=n.segments.length-1+r;return OU(n,i,e.numberOfDoubleDots)}function OU(e,t,n){let r=e,i=t,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new w(4005,!1);i=r.segments.length}return new Zi(r,!1,i-o)}function kU(e){return Ys(e[0])?e[0].outlets:{[O]:e}}function Zb(e,t,n){if(e??=new q([],{}),e.segments.length===0&&e.hasChildren())return Gs(e,t,n);let r=PU(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let o=new q(e.segments.slice(0,r.pathIndex),{});return o.children[O]=new q(e.segments.slice(r.pathIndex),e.children),Gs(o,0,i)}else return r.match&&i.length===0?new q(e.segments,{}):r.match&&!e.hasChildren()?nv(e,t,n):r.match?Gs(e,0,i):nv(e,t,n)}function Gs(e,t,n){if(n.length===0)return new q(e.segments,{});{let r=kU(n),i={};if(Object.keys(r).some(o=>o!==O)&&e.children[O]&&e.numberOfChildren===1&&e.children[O].segments.length===0){let o=Gs(e.children[O],t,n);return new q(e.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=Zb(e.children[o],t,s))}),Object.entries(e.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new q(e.segments,i)}}function PU(e,t,n){let r=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return o;let s=e.segments[i],a=n[r];if(Ys(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!kb(c,l,s))return o;r+=2}else{if(!kb(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function nv(e,t,n){let r=e.segments.slice(0,t),i=0;for(;i<n.length;){let o=n[i];if(Ys(o)){let c=xU(o.outlets);return new q(r,c)}if(i===0&&Fu(n[0])){let c=e.segments[t];r.push(new jr(c.path,Ob(n[0]))),i++;continue}let s=Ys(o)?o.outlets[O]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Fu(a)?(r.push(new jr(s,Ob(a))),i+=2):(r.push(new jr(s,{})),i++)}return new q(r,{})}function xU(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=nv(new q([],{}),0,r))}),t}function Ob(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function kb(e,t,n){return e==n.path&&zt(t,n.parameters)}var qs="imperative",Te=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(Te||{}),dt=class{id;url;constructor(t,n){this.id=t,this.url=n}},no=class extends dt{type=Te.NavigationStart;navigationTrigger;restoredState;constructor(t,n,r="imperative",i=null){super(t,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Vn=class extends dt{urlAfterRedirects;type=Te.NavigationEnd;constructor(t,n,r){super(t,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},He=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e[e.Aborted=4]="Aborted",e}(He||{}),Uu=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(Uu||{}),hn=class extends dt{reason;code;type=Te.NavigationCancel;constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Bn=class extends dt{reason;code;type=Te.NavigationSkipped;constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i}},Zs=class extends dt{error;target;type=Te.NavigationError;constructor(t,n,r,i){super(t,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Vu=class extends dt{urlAfterRedirects;state;type=Te.RoutesRecognized;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rv=class extends dt{urlAfterRedirects;state;type=Te.GuardsCheckStart;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},iv=class extends dt{urlAfterRedirects;state;shouldActivate;type=Te.GuardsCheckEnd;constructor(t,n,r,i,o){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},ov=class extends dt{urlAfterRedirects;state;type=Te.ResolveStart;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},sv=class extends dt{urlAfterRedirects;state;type=Te.ResolveEnd;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},av=class{route;type=Te.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},cv=class{route;type=Te.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},lv=class{snapshot;type=Te.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},uv=class{snapshot;type=Te.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},dv=class{snapshot;type=Te.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},fv=class{snapshot;type=Te.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Qs=class{},ro=class{url;navigationBehaviorOptions;constructor(t,n){this.url=t,this.navigationBehaviorOptions=n}};function LU(e){return!(e instanceof Qs)&&!(e instanceof ro)}function FU(e,t){return e.providers&&!e._injector&&(e._injector=_i(e.providers,t,`Route: ${e.path}`)),e._injector??t}function At(e){return e.outlet||O}function jU(e,t){let n=e.filter(r=>At(r)===t);return n.push(...e.filter(r=>At(r)!==t)),n}function oo(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var hv=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return oo(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new ra(this.rootInjector)}},ra=(()=>{class e{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new hv(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||e)(R(ce))};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Bu=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=pv(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=pv(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=gv(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return gv(t,this._root).map(n=>n.value)}};function pv(e,t){if(e===t.value)return t;for(let n of t.children){let r=pv(e,n);if(r)return r}return null}function gv(e,t){if(e===t.value)return[t];for(let n of t.children){let r=gv(e,n);if(r.length)return r.unshift(t),r}return[]}var Qe=class{value;children;constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function Yi(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var Hu=class extends Bu{snapshot;constructor(t,n){super(t),this.snapshot=n,Tv(this,t)}toString(){return this.snapshot.toString()}};function Qb(e){let t=UU(e),n=new Ce([new jr("",{})]),r=new Ce({}),i=new Ce({}),o=new Ce({}),s=new Ce(""),a=new Vr(n,r,o,s,i,O,e,t.root);return a.snapshot=t.root,new Hu(new Qe(a,[]),t)}function UU(e){let t={},n={},r={},i="",o=new Qi([],t,r,i,n,O,e,null,{});return new Wu("",new Qe(o,[]))}var Vr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,n,r,i,o,s,a,c){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(B(l=>l[na]))??S(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(B(t=>Xi(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(B(t=>Xi(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function $u(e,t,n="emptyOnly"){let r,{routeConfig:i}=e;return t!==null&&(n==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:_(_({},t.params),e.params),data:_(_({},t.data),e.data),resolve:_(_(_(_({},e.data),t.data),i?.data),e._resolvedData)}:r={params:_({},e.params),data:_({},e.data),resolve:_(_({},e.data),e._resolvedData??{})},i&&Xb(i)&&(r.resolve[na]=i.title),r}var Qi=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[na]}constructor(t,n,r,i,o,s,a,c,l){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Xi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Xi(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},Wu=class extends Bu{url;constructor(t,n){super(n),this.url=t,Tv(this,n)}toString(){return Jb(this._root)}};function Tv(e,t){t.value._routerState=e,t.children.forEach(n=>Tv(e,n))}function Jb(e){let t=e.children.length>0?` { ${e.children.map(Jb).join(", ")} } `:"";return`${e.value}${t}`}function Zm(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,zt(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),zt(t.params,n.params)||e.paramsSubject.next(n.params),dU(t.url,n.url)||e.urlSubject.next(n.url),zt(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function mv(e,t){let n=zt(e.params,t.params)&&gU(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||mv(e.parent,t.parent))}function Xb(e){return typeof e.title=="string"||e.title===null}var VU=new I(""),eS=(()=>{class e{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=O;activateEvents=new Me;deactivateEvents=new Me;attachEvents=new Me;detachEvents=new Me;routerOutletData=zw(void 0);parentContexts=g(ra);location=g($o);changeDetector=g(dp);inputBinder=g(Ku,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new w(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new w(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new w(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new w(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new vv(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||e)};static \u0275dir=Wo({type:e,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Lc]})}return e})(),vv=class{route;childContexts;parent;outletData;constructor(t,n,r,i){this.route=t,this.childContexts=n,this.parent=r,this.outletData=i}get(t,n){return t===Vr?this.route:t===ra?this.childContexts:t===VU?this.outletData:this.parent.get(t,n)}},Ku=new I("");var tS=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=gr({type:e,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Et(0,"router-outlet")},dependencies:[eS],encapsulation:2})}return e})();function Dv(e){let t=e.children&&e.children.map(Dv),n=t?K(_({},e),{children:t}):_({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==O&&(n.component=tS),n}function BU(e,t,n){let r=Js(e,t._root,n?n._root:void 0);return new Hu(r,t)}function Js(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let i=HU(e,t,n);return new Qe(r,i)}else{if(e.shouldAttach(t.value)){let o=e.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>Js(e,a)),s}}let r=$U(t.value),i=t.children.map(o=>Js(e,o));return new Qe(r,i)}}function HU(e,t,n){return t.children.map(r=>{for(let i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return Js(e,r,i);return Js(e,r)})}function $U(e){return new Vr(new Ce(e.url),new Ce(e.params),new Ce(e.queryParams),new Ce(e.fragment),new Ce(e.data),e.outlet,e.component,e)}var Xs=class{redirectTo;navigationBehaviorOptions;constructor(t,n){this.redirectTo=t,this.navigationBehaviorOptions=n}},nS="ngNavigationCancelingError";function zu(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=to(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=rS(!1,He.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function rS(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[nS]=!0,n.cancellationCode=t,n}function WU(e){return iS(e)&&to(e.url)}function iS(e){return!!e&&e[nS]}var zU=(e,t,n,r)=>B(i=>(new yv(t,i.targetRouterState,i.currentRouterState,n,r).activate(e),i)),yv=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,n,r,i,o){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),Zm(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let i=Yi(n);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=Yi(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=Yi(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let i=Yi(n);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new fv(o.value.snapshot))}),t.children.length&&this.forwardEvent(new uv(t.value.snapshot))}activateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(Zm(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Zm(a.route.value),this.activateChildRoutes(t,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(t,null,s.children)}else this.activateChildRoutes(t,null,r)}},Gu=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Ji=class{component;route;constructor(t,n){this.component=t,this.route=n}};function GU(e,t,n){let r=e._root,i=t?t._root:null;return zs(r,i,n,[r.value])}function qU(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function so(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!Bd(e)?e:t.get(e):r}function zs(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Yi(t);return e.children.forEach(s=>{KU(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Ks(a,n.getContext(s),i)),i}function KU(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=YU(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Gu(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?zs(e,t,a?a.children:null,r,i):zs(e,t,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ji(a.outlet.component,s))}else s&&Ks(t,a,i),i.canActivateChecks.push(new Gu(r)),o.component?zs(e,null,a?a.children:null,r,i):zs(e,null,n,r,i);return i}function YU(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!Ur(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Ur(e.url,t.url)||!zt(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!mv(e,t)||!zt(e.queryParams,t.queryParams);case"paramsChange":default:return!mv(e,t)}}function Ks(e,t,n){let r=Yi(e),i=e.value;Object.entries(r).forEach(([o,s])=>{i.component?t?Ks(s,t.children.getContext(o),n):Ks(s,null,n):Ks(s,t,n)}),i.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new Ji(t.outlet.component,i)):n.canDeactivateChecks.push(new Ji(null,i)):n.canDeactivateChecks.push(new Ji(null,i))}function ia(e){return typeof e=="function"}function ZU(e){return typeof e=="boolean"}function QU(e){return e&&ia(e.canLoad)}function JU(e){return e&&ia(e.canActivate)}function XU(e){return e&&ia(e.canActivateChild)}function eV(e){return e&&ia(e.canDeactivate)}function tV(e){return e&&ia(e.canMatch)}function oS(e){return e instanceof qt||e?.name==="EmptyError"}var ku=Symbol("INITIAL_VALUE");function io(){return xe(e=>Pa(e.map(t=>t.pipe(Kt(1),Dd(ku)))).pipe(B(t=>{for(let n of t)if(n!==!0){if(n===ku)return ku;if(n===!1||nV(n))return n}return!0}),Je(t=>t!==ku),Kt(1)))}function nV(e){return to(e)||e instanceof Xs}function rV(e,t){return he(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?S(K(_({},n),{guardsResult:!0})):iV(s,r,i,e).pipe(he(a=>a&&ZU(a)?oV(r,o,e,t):S(a)),B(a=>K(_({},n),{guardsResult:a})))})}function iV(e,t,n,r){return ae(e).pipe(he(i=>uV(i.component,i.route,n,t,r)),Yt(i=>i!==!0,!0))}function oV(e,t,n,r){return ae(t).pipe(ti(i=>ei(aV(i.route.parent,r),sV(i.route,r),lV(e,i.path,n),cV(e,i.route,n))),Yt(i=>i!==!0,!0))}function sV(e,t){return e!==null&&t&&t(new dv(e)),S(!0)}function aV(e,t){return e!==null&&t&&t(new lv(e)),S(!0)}function cV(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return S(!0);let i=r.map(o=>uo(()=>{let s=oo(t)??n,a=so(o,s),c=JU(a)?a.canActivate(t,e):ue(s,()=>a(t,e));return gn(c).pipe(Yt())}));return S(i).pipe(io())}function lV(e,t,n){let r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>qU(s)).filter(s=>s!==null).map(s=>uo(()=>{let a=s.guards.map(c=>{let l=oo(s.node)??n,u=so(c,l),d=XU(u)?u.canActivateChild(r,e):ue(l,()=>u(r,e));return gn(d).pipe(Yt())});return S(a).pipe(io())}));return S(o).pipe(io())}function uV(e,t,n,r,i){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return S(!0);let s=o.map(a=>{let c=oo(t)??i,l=so(a,c),u=eV(l)?l.canDeactivate(e,t,n,r):ue(c,()=>l(e,t,n,r));return gn(u).pipe(Yt())});return S(s).pipe(io())}function dV(e,t,n,r){let i=t.canLoad;if(i===void 0||i.length===0)return S(!0);let o=i.map(s=>{let a=so(s,e),c=QU(a)?a.canLoad(t,n):ue(e,()=>a(t,n));return gn(c)});return S(o).pipe(io(),sS(r))}function sS(e){return pd(_e(t=>{if(typeof t!="boolean")throw zu(e,t)}),B(t=>t===!0))}function fV(e,t,n,r){let i=t.canMatch;if(!i||i.length===0)return S(!0);let o=i.map(s=>{let a=so(s,e),c=tV(a)?a.canMatch(t,n):ue(e,()=>a(t,n));return gn(c)});return S(o).pipe(io(),sS(r))}var ea=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},ta=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function Ki(e){return Xr(new ea(e))}function hV(e){return Xr(new w(4e3,!1))}function pV(e){return Xr(rS(!1,He.GuardRejected))}var _v=class{urlSerializer;urlTree;constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return S(r);if(i.numberOfChildren>1||!i.children[O])return hV(`${t.redirectTo}`);i=i.children[O]}}applyRedirectCommands(t,n,r,i,o){return gV(n,i,o).pipe(B(s=>{if(s instanceof pn)throw new ta(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),t,r);if(s[0]==="/")throw new ta(a);return a}))}applyRedirectCreateUrlTree(t,n,r,i){let o=this.createSegmentGroup(t,n.root,r,i);return new pn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(t,n,r,i){let o=this.createSegments(t,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(t,c,r,i)}),new q(o,s)}createSegments(t,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,n,r){let i=r[n.path.substring(1)];if(!i)throw new w(4001,!1);return i}findOrReturn(t,n){let r=0;for(let i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}};function gV(e,t,n){if(typeof e=="string")return S(e);let r=e,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:l,data:u,title:d}=t;return gn(ue(n,()=>r({params:l,data:u,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:d})))}var Ev={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function mV(e,t,n,r,i){let o=aS(e,t,n);return o.matched?(r=FU(t,r),fV(r,t,n,i).pipe(B(s=>s===!0?o:_({},Ev)))):S(o)}function aS(e,t,n){if(t.path==="**")return vV(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?_({},Ev):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(t.matcher||uU)(n,e,t);if(!i)return _({},Ev);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?_(_({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function vV(e){return{matched:!0,parameters:e.length>0?jb(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function Pb(e,t,n,r){return n.length>0&&EV(e,n,r)?{segmentGroup:new q(t,_V(r,new q(n,e.children))),slicedSegments:[]}:n.length===0&&IV(e,n,r)?{segmentGroup:new q(e.segments,yV(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new q(e.segments,e.children),slicedSegments:n}}function yV(e,t,n,r){let i={};for(let o of n)if(Yu(e,t,o)&&!r[At(o)]){let s=new q([],{});i[At(o)]=s}return _(_({},r),i)}function _V(e,t){let n={};n[O]=t;for(let r of e)if(r.path===""&&At(r)!==O){let i=new q([],{});n[At(r)]=i}return n}function EV(e,t,n){return n.some(r=>Yu(e,t,r)&&At(r)!==O)}function IV(e,t,n){return n.some(r=>Yu(e,t,r))}function Yu(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function wV(e,t,n){return t.length===0&&!e.children[n]}var Iv=class{};function CV(e,t,n,r,i,o,s="emptyOnly"){return new wv(e,t,n,r,i,s,o).recognize()}var TV=31,wv=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,n,r,i,o,s,a){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new _v(this.urlSerializer,this.urlTree)}noMatchError(t){return new w(4002,`'${t.segmentGroup}'`)}recognize(){let t=Pb(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(B(({children:n,rootSnapshot:r})=>{let i=new Qe(r,n),o=new Wu("",i),s=AU(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(t){let n=new Qi([],Object.freeze({}),Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),O,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,O,n).pipe(B(r=>({children:r,rootSnapshot:n})),_n(r=>{if(r instanceof ta)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ea?this.noMatchError(r):r}))}processSegmentGroup(t,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,n,r,o):this.processSegment(t,n,r,r.segments,i,!0,o).pipe(B(s=>s instanceof Qe?[s]:[]))}processChildren(t,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return ae(o).pipe(ti(s=>{let a=r.children[s],c=jU(n,s);return this.processSegmentGroup(t,c,a,s,i)}),Td((s,a)=>(s.push(...a),s)),En(null),Cd(),he(s=>{if(s===null)return Ki(r);let a=cS(s);return DV(a),S(a)}))}processSegment(t,n,r,i,o,s,a){return ae(n).pipe(ti(c=>this.processSegmentAgainstRoute(c._injector??t,n,c,r,i,o,s,a).pipe(_n(l=>{if(l instanceof ea)return S(null);throw l}))),Yt(c=>!!c),_n(c=>{if(oS(c))return wV(r,i,o)?S(new Iv):Ki(r);throw c}))}processSegmentAgainstRoute(t,n,r,i,o,s,a,c){return At(r)!==s&&(s===O||!Yu(i,o,r))?Ki(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,i,n,r,o,s,c):Ki(i)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:f}=aS(n,i,o);if(!c)return Ki(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>TV&&(this.allowRedirects=!1));let h=new Qi(o,l,Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,xb(i),At(i),i.component??i._loadedComponent??null,i,Lb(i)),p=$u(h,a,this.paramsInheritanceStrategy);return h.params=Object.freeze(p.params),h.data=Object.freeze(p.data),this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,h,t).pipe(xe(E=>this.applyRedirects.lineralizeSegments(i,E)),he(E=>this.processSegment(t,r,n,E.concat(f),s,!1,a)))}matchSegmentAgainstRoute(t,n,r,i,o,s){let a=mV(n,r,i,t,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(xe(c=>c.matched?(t=r._injector??t,this.getChildConfig(t,r,i).pipe(xe(({routes:l})=>{let u=r._loadedInjector??t,{parameters:d,consumedSegments:f,remainingSegments:h}=c,p=new Qi(f,d,Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,xb(r),At(r),r.component??r._loadedComponent??null,r,Lb(r)),v=$u(p,s,this.paramsInheritanceStrategy);p.params=Object.freeze(v.params),p.data=Object.freeze(v.data);let{segmentGroup:E,slicedSegments:b}=Pb(n,f,h,l);if(b.length===0&&E.hasChildren())return this.processChildren(u,l,E,p).pipe(B(ve=>new Qe(p,ve)));if(l.length===0&&b.length===0)return S(new Qe(p,[]));let ne=At(r)===o;return this.processSegment(u,l,E,b,ne?O:o,!0,p).pipe(B(ve=>new Qe(p,ve instanceof Qe?[ve]:[])))}))):Ki(n)))}getChildConfig(t,n,r){return n.children?S({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?S({routes:n._loadedRoutes,injector:n._loadedInjector}):dV(t,n,r,this.urlSerializer).pipe(he(i=>i?this.configLoader.loadChildren(t,n).pipe(_e(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):pV(n))):S({routes:[],injector:t})}};function DV(e){e.sort((t,n)=>t.value.outlet===O?-1:n.value.outlet===O?1:t.value.outlet.localeCompare(n.value.outlet))}function bV(e){let t=e.value.routeConfig;return t&&t.path===""}function cS(e){let t=[],n=new Set;for(let r of e){if(!bV(r)){t.push(r);continue}let i=t.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):t.push(r)}for(let r of n){let i=cS(r.children);t.push(new Qe(r.value,i))}return t.filter(r=>!n.has(r))}function xb(e){return e.data||{}}function Lb(e){return e.resolve||{}}function SV(e,t,n,r,i,o){return he(s=>CV(e,t,n,r,s.extractedUrl,i,o).pipe(B(({state:a,tree:c})=>K(_({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function RV(e,t){return he(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return S(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of lS(c))s.add(l);let a=0;return ae(s).pipe(ti(c=>o.has(c)?AV(c,r,e,t):(c.data=$u(c,c.parent,e).resolve,S(void 0))),_e(()=>a++),ni(1),he(c=>a===s.size?S(n):ke))})}function lS(e){let t=e.children.map(n=>lS(n)).flat();return[e,...t]}function AV(e,t,n,r){let i=e.routeConfig,o=e._resolve;return i?.title!==void 0&&!Xb(i)&&(o[na]=i.title),uo(()=>(e.data=$u(e,e.parent,n).resolve,NV(o,e,t,r).pipe(B(s=>(e._resolvedData=s,e.data=_(_({},e.data),s),null)))))}function NV(e,t,n,r){let i=Xm(e);if(i.length===0)return S({});let o={};return ae(i).pipe(he(s=>MV(e[s],t,n,r).pipe(Yt(),_e(a=>{if(a instanceof Xs)throw zu(new eo,a);o[s]=a}))),ni(1),B(()=>o),_n(s=>oS(s)?ke:Xr(s)))}function MV(e,t,n,r){let i=oo(t)??r,o=so(e,i),s=o.resolve?o.resolve(t,n):ue(i,()=>o(t,n));return gn(s)}function Qm(e){return xe(t=>{let n=e(t);return n?ae(n).pipe(B(()=>t)):S(t)})}var uS=(()=>{class e{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===O);return r}getResolvedTitleForRoute(n){return n.data[na]}static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:()=>g(OV),providedIn:"root"})}return e})(),OV=(()=>{class e extends uS{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||e)(R(gC))};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Zu=new I("",{providedIn:"root",factory:()=>({})}),Qu=new I(""),dS=(()=>{class e{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=g(Qh);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return S(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=gn(ue(n,()=>r.loadComponent())).pipe(B(fS),xe(hS),_e(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),fo(()=>{this.componentLoaders.delete(r)})),o=new Yr(i,()=>new we).pipe(Kr());return this.componentLoaders.set(r,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return S({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=kV(r,this.compiler,n,this.onLoadEndListener).pipe(fo(()=>{this.childrenLoaders.delete(r)})),s=new Yr(o,()=>new we).pipe(Kr());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function kV(e,t,n,r){return gn(ue(n,()=>e.loadChildren())).pipe(B(fS),xe(hS),he(i=>i instanceof ol||Array.isArray(i)?S(i):ae(t.compileModuleAsync(i))),B(i=>{r&&r(e);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(Qu,[],{optional:!0,self:!0}).flat()),{routes:s.map(Dv),injector:o}}))}function PV(e){return e&&typeof e=="object"&&"default"in e}function fS(e){return PV(e)?e.default:e}function hS(e){return S(e)}var bv=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:()=>g(xV),providedIn:"root"})}return e})(),xV=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),pS=new I("");var gS=new I(""),mS=(()=>{class e{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new we;transitionAbortWithErrorSubject=new we;configLoader=g(dS);environmentInjector=g(ce);destroyRef=g(rn);urlSerializer=g(qu);rootContexts=g(ra);location=g(Di);inputBindingEnabled=g(Ku,{optional:!0})!==null;titleStrategy=g(uS);options=g(Zu,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=g(bv);createViewTransition=g(pS,{optional:!0});navigationErrorHandler=g(gS,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>S(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new av(i)),r=i=>this.events.next(new cv(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(K(_({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))}setupNavigations(n){return this.transitions=new Ce(null),this.transitions.pipe(Je(r=>r!==null),xe(r=>{let i=!1;return S(r).pipe(xe(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",He.SupersededByNewNavigation),ke;this.currentTransition=r,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?K(_({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()};let s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!s&&a!=="reload"){let c="";return this.events.next(new Bn(o.id,this.urlSerializer.serialize(o.rawUrl),c,Uu.IgnoredSameUrlNavigation)),o.resolve(!1),ke}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return S(o).pipe(xe(c=>(this.events.next(new no(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?ke:Promise.resolve(c))),SV(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),_e(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation=K(_({},this.currentNavigation),{finalUrl:c.urlAfterRedirects});let l=new Vu(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:c,extractedUrl:l,source:u,restoredState:d,extras:f}=o,h=new no(c,this.urlSerializer.serialize(l),u,d);this.events.next(h);let p=Qb(this.rootComponentType).snapshot;return this.currentTransition=r=K(_({},o),{targetSnapshot:p,urlAfterRedirects:l,extras:K(_({},f),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=l,S(r)}else{let c="";return this.events.next(new Bn(o.id,this.urlSerializer.serialize(o.extractedUrl),c,Uu.IgnoredByUrlHandlingStrategy)),o.resolve(!1),ke}}),_e(o=>{let s=new rv(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),B(o=>(this.currentTransition=r=K(_({},o),{guards:GU(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),rV(this.environmentInjector,o=>this.events.next(o)),_e(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw zu(this.urlSerializer,o.guardsResult);let s=new iv(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),Je(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",He.GuardRejected),!1)),Qm(o=>{if(o.guards.canActivateChecks.length!==0)return S(o).pipe(_e(s=>{let a=new ov(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),xe(s=>{let a=!1;return S(s).pipe(RV(this.paramsInheritanceStrategy,this.environmentInjector),_e({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",He.NoDataFromResolver)}}))}),_e(s=>{let a=new sv(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),Qm(o=>{let s=a=>{let c=[];if(a.routeConfig?.loadComponent&&!a.routeConfig._loadedComponent){let l=oo(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(_e(u=>{a.component=u}),B(()=>{})))}for(let l of a.children)c.push(...s(l));return c};return Pa(s(o.targetSnapshot.root)).pipe(En(null),Kt(1))}),Qm(()=>this.afterPreactivation()),xe(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?ae(a).pipe(B(()=>r)):S(r)}),B(o=>{let s=BU(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=K(_({},o),{targetRouterState:s}),this.currentNavigation.targetRouterState=s,r}),_e(()=>{this.events.next(new Qs)}),zU(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Kt(1),La(new P(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(Je(()=>!i&&!r.targetRouterState),_e(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",He.Aborted)}))),_e({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Vn(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),La(this.transitionAbortWithErrorSubject.pipe(_e(o=>{throw o}))),fo(()=>{i||this.cancelNavigationTransition(r,"",He.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),_n(o=>{if(this.destroyed)return r.resolve(!1),ke;if(i=!0,iS(o))this.events.next(new hn(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),WU(o)?this.events.next(new ro(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Zs(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=ue(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Xs){let{message:c,cancellationCode:l}=zu(this.urlSerializer,a);this.events.next(new hn(r.id,this.urlSerializer.serialize(r.extractedUrl),c,l)),this.events.next(new ro(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return ke}))}))}cancelNavigationTransition(n,r,i){let o=new hn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function LV(e){return e!==qs}var FV=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:()=>g(jV),providedIn:"root"})}return e})(),Cv=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},jV=(()=>{class e extends Cv{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Fc(e)))(i||e)}})();static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),vS=(()=>{class e{urlSerializer=g(qu);options=g(Zu,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=g(Di);urlHandlingStrategy=g(bv);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new pn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof pn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=Qb(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:()=>g(UV),providedIn:"root"})}return e})(),UV=(()=>{class e extends vS{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof no?this.updateStateMemento():n instanceof Bn?this.commitTransition(r):n instanceof Vu?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Qs?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof hn&&n.code!==He.SupersededByNewNavigation&&n.code!==He.Redirect?this.restoreHistory(r):n instanceof Zs?this.restoreHistory(r,!0):n instanceof Vn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,c=_(_({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",c)}else{let a=_(_({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Fc(e)))(i||e)}})();static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function yS(e,t){e.events.pipe(Je(n=>n instanceof Vn||n instanceof hn||n instanceof Zs||n instanceof Bn),B(n=>n instanceof Vn||n instanceof Bn?0:(n instanceof hn?n.code===He.Redirect||n.code===He.SupersededByNewNavigation:!1)?2:1),Je(n=>n!==2),Kt(1)).subscribe(()=>{t()})}var VV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},BV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Sv=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=g(al);stateManager=g(vS);options=g(Zu,{optional:!0})||{};pendingTasks=g(yt);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=g(mS);urlSerializer=g(qu);location=g(Di);urlHandlingStrategy=g(bv);injector=g(ce);_events=new we;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=g(FV);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=g(Qu,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!g(Ku,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new re;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof hn&&r.code!==He.Redirect&&r.code!==He.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Vn)this.navigated=!0;else if(r instanceof ro){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=_({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||LV(i.source)},s);this.scheduleNavigation(a,qs,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}LU(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),qs,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=_({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(ot)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Dv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=_(_({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let f=i?i.snapshot:this.routerState.snapshot.root;d=qb(f)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),d=this.currentUrlTree.root}return Kb(d,n,u,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=to(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,qs,null,r)}navigate(n,r={skipLocationChange:!1}){return HV(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=_({},VV):r===!1?i=_({},BV):i=r,to(n))return Nb(this.currentUrlTree,n,i);let o=this.parseUrl(n);return Nb(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((d,f)=>{a=d,c=f});let u=this.pendingTasks.add();return yS(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function HV(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new w(4008,!1)}var $V=new I("");function Rv(e,...t){return Xe([{provide:Qu,multi:!0,useValue:e},[],{provide:Vr,useFactory:WV,deps:[Sv]},{provide:An,multi:!0,useFactory:zV},t.map(n=>n.\u0275providers)])}function WV(e){return e.routerState.root}function zV(){let e=g(pe);return t=>{let n=e.get(je);if(t!==n.components[0])return;let r=e.get(Sv),i=e.get(GV);e.get(qV)===1&&r.initialNavigation(),e.get(KV,null,{optional:!0})?.setUpPreloading(),e.get($V,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var GV=new I("",{factory:()=>new we}),qV=new I("",{providedIn:"root",factory:()=>1});var KV=new I("");var _S=[];var ES={production:!0,firebaseConfig:{apiKey:"AIzaSyB2e36wu47-6DOc2_rAuHfiFTq9vm6GBD0",authDomain:"cabbingo-db.firebaseapp.com",databaseURL:"https://cabbingo-db-default-rtdb.europe-west1.firebasedatabase.app",projectId:"cabbingo-db",storageBucket:"cabbingo-db.firebasestorage.app",messagingSenderId:"684304316440",appId:"1:684304316440:web:0660b0d72a68752cadeb6d"}};var IS={providers:[Rv(_S),_C(yC(),vC()),nT(()=>rT(ES.firebaseConfig)),Db(()=>bb())]};bp(Mu,IS).catch(e=>console.error("Bootstrap error:",e));
